!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){},{}],2:[function(require,module,exports){(function(global){"use strict";function compare(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function isBuffer(e){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var util=require("util/"),hasOwn=Object.prototype.hasOwnProperty,pSlice=Array.prototype.slice,functionsHaveNames="foo"===function(){}.name;function pToString(e){return Object.prototype.toString.call(e)}function isView(e){return!isBuffer(e)&&"function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var assert=module.exports=ok,regex=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(util.isFunction(e)){if(functionsHaveNames)return e.name;var t=e.toString().match(regex);return t&&t[1]}}function truncate(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function inspect(e){if(functionsHaveNames||!util.isFunction(e))return util.inspect(e);var t=getName(e);return"[Function"+(t?": "+t:"")+"]"}function fail(e,t,r,n,i){throw new assert.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function ok(e,t){e||fail(e,!0,t,"==",assert.ok)}function _deepEqual(e,t,r,n){if(e===t)return!0;if(isBuffer(e)&&isBuffer(t))return 0===compare(e,t);if(util.isDate(e)&&util.isDate(t))return e.getTime()===t.getTime();if(util.isRegExp(e)&&util.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(isView(e)&&isView(t)&&pToString(e)===pToString(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===compare(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(isBuffer(e)!==isBuffer(t))return!1;var i=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(util.isPrimitive(e)||util.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=isArguments(e),a=isArguments(t);if(i&&!a||!i&&a)return!1;if(i)return _deepEqual(e=pSlice.call(e),t=pSlice.call(t),r);var s,u,o=objectKeys(e),f=objectKeys(t);if(o.length!==f.length)return!1;for(o.sort(),f.sort(),u=o.length-1;u>=0;u--)if(o[u]!==f[u])return!1;for(u=o.length-1;u>=0;u--)if(!_deepEqual(e[s=o[u]],t[s],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function expectedException(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _throws(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&fail(i,r,"Missing expected exception"+n);var a="string"==typeof n,s=!e&&i&&!r;if((!e&&util.isError(i)&&a&&expectedException(i,r)||s)&&fail(i,r,"Got unwanted exception"+n),e&&i&&r&&!expectedException(i,r)||!e&&i)throw i}assert.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return truncate(inspect(e.actual),128)+" "+e.operator+" "+truncate(inspect(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=getName(t),a=n.indexOf("\n"+i);if(a>=0){var s=n.indexOf("\n",a+1);n=n.substring(s+1)}this.stack=n}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(e,t,r){e!=t&&fail(e,t,r,"==",assert.equal)},assert.notEqual=function(e,t,r){e==t&&fail(e,t,r,"!=",assert.notEqual)},assert.deepEqual=function(e,t,r){_deepEqual(e,t,!1)||fail(e,t,r,"deepEqual",assert.deepEqual)},assert.deepStrictEqual=function(e,t,r){_deepEqual(e,t,!0)||fail(e,t,r,"deepStrictEqual",assert.deepStrictEqual)},assert.notDeepEqual=function(e,t,r){_deepEqual(e,t,!1)&&fail(e,t,r,"notDeepEqual",assert.notDeepEqual)},assert.notDeepStrictEqual=function notDeepStrictEqual(e,t,r){_deepEqual(e,t,!0)&&fail(e,t,r,"notDeepStrictEqual",notDeepStrictEqual)},assert.strictEqual=function(e,t,r){e!==t&&fail(e,t,r,"===",assert.strictEqual)},assert.notStrictEqual=function(e,t,r){e===t&&fail(e,t,r,"!==",assert.notStrictEqual)},assert.throws=function(e,t,r){_throws(!0,e,t,r)},assert.doesNotThrow=function(e,t,r){_throws(!1,e,t,r)},assert.ifError=function(e){if(e)throw e};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)hasOwn.call(e,r)&&t.push(r);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":5}],3:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},{}],4:[function(require,module,exports){module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8}},{}],5:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var t=!1;return function(){if(!t){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),t=!0}return e.apply(this,arguments)}};var debugEnviron,debugs={};function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=function(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var o=Object.keys(r),s=function(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c,a="",l=!1,p=["{","}"];return isArray(r)&&(l=!0,p=["[","]"]),isFunction(r)&&(a=" [Function"+(r.name?": "+r.name:"")+"]"),isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0!==o.length||l&&0!=r.length?t<0?isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=l?function(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,l)}),e.seen.pop(),function(e,r,t){return e.reduce(function(e,r){return r.indexOf("\n"),e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}(c,a,p)):p[0]+a+p[1]}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatProperty(e,r,t,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=function(e){return null==e},exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=function(e){return"symbol"==typeof e},exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}exports.log=function(){var e,r;console.log("%s - %s",(e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":"),[e.getDate(),months[e.getMonth()],r].join(" ")),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":4,_process:17,inherits:3}],6:[function(require,module,exports){"use strict";exports.byteLength=function(o){var r=getLens(o),e=r[0],t=r[1];return 3*(e+t)/4-t},exports.toByteArray=function(o){for(var r,e=getLens(o),t=e[0],n=e[1],u=new Arr(function(o,r,e){return 3*(r+e)/4-e}(0,t,n)),p=0,a=n>0?t-4:t,h=0;h<a;h+=4)r=revLookup[o.charCodeAt(h)]<<18|revLookup[o.charCodeAt(h+1)]<<12|revLookup[o.charCodeAt(h+2)]<<6|revLookup[o.charCodeAt(h+3)],u[p++]=r>>16&255,u[p++]=r>>8&255,u[p++]=255&r;return 2===n&&(r=revLookup[o.charCodeAt(h)]<<2|revLookup[o.charCodeAt(h+1)]>>4,u[p++]=255&r),1===n&&(r=revLookup[o.charCodeAt(h)]<<10|revLookup[o.charCodeAt(h+1)]<<4|revLookup[o.charCodeAt(h+2)]>>2,u[p++]=r>>8&255,u[p++]=255&r),u},exports.fromByteArray=function(o){for(var r,e=o.length,t=e%3,n=[],u=0,p=e-t;u<p;u+=16383)n.push(encodeChunk(o,u,u+16383>p?p:u+16383));return 1===t?(r=o[e-1],n.push(lookup[r>>2]+lookup[r<<4&63]+"==")):2===t&&(r=(o[e-2]<<8)+o[e-1],n.push(lookup[r>>10]+lookup[r>>4&63]+lookup[r<<2&63]+"=")),n.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=o.indexOf("=");return-1===e&&(e=r),[e,e===r?0:4-e%4]}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,n=[],u=r;u<e;u+=3)t=(o[u]<<16&16711680)+(o[u+1]<<8&65280)+(255&o[u+2]),n.push(tripletToBase64(t));return n.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},{}],7:[function(require,module,exports){},{}],8:[function(require,module,exports){"use strict";var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=function(e){return+e!=e&&(e=0),Buffer.alloc(+e)},exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;function createBuffer(e){if(e>K_MAX_LENGTH)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=Buffer.prototype,t}function Buffer(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,r)}function from(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|byteLength(e,t),n=createBuffer(r),f=n.write(e,t);return f!==r&&(n=n.slice(0,f)),n}(e,t);if(ArrayBuffer.isView(e))return fromArrayLike(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r)).__proto__=Buffer.prototype,n}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return Buffer.from(n,t,r);var f=function(e){if(Buffer.isBuffer(e)){var t=0|checked(e.length),r=createBuffer(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}return void 0!==e.length?"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e):"Buffer"===e.type&&Array.isArray(e.data)?fromArrayLike(e.data):void 0}(e);if(f)return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){for(var t=e.length<0?0:0|checked(e.length),r=createBuffer(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function checked(e){if(e>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var f=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(f)return n?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),f=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,f){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),numberIsNaN(r=+r)&&(r=f?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(f)return-1;r=e.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,f);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,f){var i,o=1,u=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,r/=2}function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(f){var h=-1;for(i=r;i<u;i++)if(a(e,i)===a(t,-1===h?0:i-h)){if(-1===h&&(h=i),i-h+1===s)return h*o}else-1!==h&&(i-=i-h),h=-1}else for(r+s>u&&(r=u-s),i=r;i>=0;i--){for(var c=!0,l=0;l<s;l++)if(a(e,i+l)!==a(t,l)){c=!1;break}if(c)return i}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var f=e.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=t.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(t.substr(2*o,2),16);if(numberIsNaN(u))return o;e[r+o]=u}return o}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(function(e,t){for(var r,n,f,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,f=r%256,i.push(f),i.push(n);return i}(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?base64.fromByteArray(e):base64.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],f=t;f<r;){var i,o,u,s,a=e[f],h=null,c=a>239?4:a>223?3:a>191?2:1;if(f+c<=r)switch(c){case 1:a<128&&(h=a);break;case 2:128==(192&(i=e[f+1]))&&(s=(31&a)<<6|63&i)>127&&(h=s);break;case 3:i=e[f+1],o=e[f+2],128==(192&i)&&128==(192&o)&&(s=(15&a)<<12|(63&i)<<6|63&o)>2047&&(s<55296||s>57343)&&(h=s);break;case 4:i=e[f+1],o=e[f+2],u=e[f+3],128==(192&i)&&128==(192&o)&&128==(192&u)&&(s=(15&a)<<18|(63&i)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(h=s)}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),f+=c}return function(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}(n)}exports.kMaxLength=K_MAX_LENGTH,Buffer.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(e,t,r){return from(e,t,r)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(e,t,r){return function(e,t,r){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof r?createBuffer(e).fill(t,r):createBuffer(e).fill(t):createBuffer(e)}(e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,f=0,i=Math.min(r,n);f<i;++f)if(e[f]!==t[f]){r=e[f],n=t[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Buffer.allocUnsafe(t),f=0;for(r=0;r<e.length;++r){var i=e[r];if(isInstance(i,Uint8Array)&&(i=Buffer.from(i)),!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=exports.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,n,f){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),t<0||r>e.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&t>=r)return 0;if(n>=f)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(f>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),u=Math.min(i,o),s=this.slice(n,f),a=e.slice(t,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var f=t;f<r;++f)n+=String.fromCharCode(127&e[f]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var f=t;f<r;++f)n+=String.fromCharCode(e[f]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=t;i<r;++i)f+=toHex(e[i]);return f}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,f,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>f||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function checkIEEE754(e,t,r,n,f,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,f){return t=+t,r>>>=0,f||checkIEEE754(e,0,r,4),ieee754.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,f){return t=+t,r>>>=0,f||checkIEEE754(e,0,r,8),ieee754.write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=Buffer.prototype,n},Buffer.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],f=1,i=0;++i<t&&(f*=256);)n+=this[e+i]*f;return n},Buffer.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],f=1;t>0&&(f*=256);)n+=this[e+--t]*f;return n},Buffer.prototype.readUInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],f=1,i=0;++i<t&&(f*=256);)n+=this[e+i]*f;return n>=(f*=128)&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=t,f=1,i=this[e+--n];n>0&&(f*=256);)i+=this[e+--n]*f;return i>=(f*=128)&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),ieee754.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),ieee754.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),ieee754.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),ieee754.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var f=1,i=0;for(this[t]=255&e;++i<r&&(f*=256);)this[t+i]=e/f&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var f=r-1,i=1;for(this[t+f]=255&e;--f>=0&&(i*=256);)this[t+f]=e/i&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,e,t,r,f-1,-f)}var i=0,o=1,u=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,e,t,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,n){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var f=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=f-1;i>=0;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return f},Buffer.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var f=e.charCodeAt(0);("utf8"===n&&f<128||"latin1"===n)&&(e=f)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=Buffer.isBuffer(e)?e:Buffer.from(e,n),u=o.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var n=e.length,f=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(t-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function base64ToBytes(e){return base64.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,r,n){for(var f=0;f<n&&!(f+r>=t.length||f>=e.length);++f)t[f+r]=e[f];return f}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}},{"base64-js":6,ieee754:11}],9:[function(require,module,exports){(function(Buffer){function objectToString(r){return Object.prototype.toString.call(r)}exports.isArray=function(r){return Array.isArray?Array.isArray(r):"[object Array]"===objectToString(r)},exports.isBoolean=function(r){return"boolean"==typeof r},exports.isNull=function(r){return null===r},exports.isNullOrUndefined=function(r){return null==r},exports.isNumber=function(r){return"number"==typeof r},exports.isString=function(r){return"string"==typeof r},exports.isSymbol=function(r){return"symbol"==typeof r},exports.isUndefined=function(r){return void 0===r},exports.isRegExp=function(r){return"[object RegExp]"===objectToString(r)},exports.isObject=function(r){return"object"==typeof r&&null!==r},exports.isDate=function(r){return"[object Date]"===objectToString(r)},exports.isError=function(r){return"[object Error]"===objectToString(r)||r instanceof Error},exports.isFunction=function(r){return"function"==typeof r},exports.isPrimitive=function(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r},exports.isBuffer=Buffer.isBuffer}).call(this,{isBuffer:require("../../is-buffer/index.js")})},{"../../is-buffer/index.js":13}],10:[function(require,module,exports){var objectCreate=Object.create||function(e){var t=function(){};return t.prototype=e,new t},objectKeys=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},bind=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var hasDefineProperty,defaultMaxListeners=10;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(e){hasDefineProperty=!1}function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,n,r){var i,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=objectCreate(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=$getMaxListeners(e))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else o=s[t]=n,++e._eventsCount;return e}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=bind.call(onceWrapper,r);return i.listener=n,r.wrapFn=i,i}function _listeners(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):arrayClone(i,i.length):[]}function listenerCount(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function arrayClone(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=e}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(e){var t,n,r,i,s,o,a="error"===e;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=arrayClone(e,r),s=0;s<r;++s)i[s].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,o=arrayClone(e,s),a=0;a<s;++a)o[a].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var o=e.length,a=arrayClone(e,o),l=0;l<o;++l)a[l].call(n,r,i,s)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].apply(n,r)}(n,u,this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,i,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=objectCreate(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=objectCreate(null):delete n[e]),this;if(0===arguments.length){var i,s=objectKeys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],11:[function(require,module,exports){exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l}},{}],12:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},{}],13:[function(require,module,exports){function isBuffer(f){return!!f.constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)}module.exports=function(f){return null!=f&&(isBuffer(f)||function(f){return"function"==typeof f.readFloatLE&&"function"==typeof f.slice&&isBuffer(f.slice(0,0))}(f)||!!f._isBuffer)}},{}],14:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)}},{}],15:[function(require,module,exports){(function(process){function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return(t?"/":"")+(r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"))||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return(r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"))||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),o=e(t.split("/")),s=Math.min(n.length,o.length),i=s,u=0;u<s;u++)if(n[u]!==o[u]){i=u;break}var l=[];for(u=i;u<n.length;u++)l.push("..");return(l=l.concat(o.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){if("string"!=typeof r&&(r+=""),0===r.length)return".";for(var t=r.charCodeAt(0),e=47===t,n=-1,o=!0,s=r.length-1;s>=1;--s)if(47===(t=r.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?e?"/":".":e&&1===n?"/":r.slice(0,n)},exports.basename=function(r,t){var e=function(r){"string"!=typeof r&&(r+="");var t,e=0,n=-1,o=!0;for(t=r.length-1;t>=0;--t)if(47===r.charCodeAt(t)){if(!o){e=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":r.slice(e,n)}(r);return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){"string"!=typeof r&&(r+="");for(var t=-1,e=0,n=-1,o=!0,s=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===n&&(o=!1,n=i+1),46===u?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){e=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===e+1?"":r.slice(t,n)};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)}}).call(this,require("_process"))},{_process:17}],16:[function(require,module,exports){(function(process){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports={nextTick:function(e,n,c,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,t,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,n)});case 3:return process.nextTick(function(){e.call(null,n,c)});case 4:return process.nextTick(function(){e.call(null,n,c,r)});default:for(s=new Array(o-1),t=0;t<s.length;)s[t++]=arguments[t];return process.nextTick(function(){e.apply(null,s)})}}}:module.exports=process}).call(this,require("_process"))},{_process:17}],17:[function(require,module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,function(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],18:[function(require,module,exports){(function(global){!function(e){var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,n="object"==typeof module&&module&&!module.nodeType&&module,t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var r,u,i=2147483647,f=36,c=1,l=26,s=38,d=700,p=72,a=128,h="-",v=/^xn--/,g=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=f-c,y=Math.floor,C=String.fromCharCode;function m(e){throw new RangeError(x[e])}function j(e,o){for(var n=e.length,t=[];n--;)t[n]=o(e[n]);return t}function A(e,o){var n=e.split("@"),t="";return n.length>1&&(t=n[0]+"@",e=n[1]),t+j((e=e.replace(w,".")).split("."),o).join(".")}function I(e){for(var o,n,t=[],r=0,u=e.length;r<u;)(o=e.charCodeAt(r++))>=55296&&o<=56319&&r<u?56320==(64512&(n=e.charCodeAt(r++)))?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--):t.push(o);return t}function E(e){return j(e,function(e){var o="";return e>65535&&(o+=C((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+C(e)}).join("")}function F(e,o){return e+22+75*(e<26)-((0!=o)<<5)}function O(e,o,n){var t=0;for(e=n?y(e/d):e>>1,e+=y(e/o);e>b*l>>1;t+=f)e=y(e/b);return y(t+(b+1)*e/(e+s))}function S(e){var o,n,t,r,u,s,d,v,g,w,x,b=[],C=e.length,j=0,A=a,I=p;for((n=e.lastIndexOf(h))<0&&(n=0),t=0;t<n;++t)e.charCodeAt(t)>=128&&m("not-basic"),b.push(e.charCodeAt(t));for(r=n>0?n+1:0;r<C;){for(u=j,s=1,d=f;r>=C&&m("invalid-input"),((v=(x=e.charCodeAt(r++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:f)>=f||v>y((i-j)/s))&&m("overflow"),j+=v*s,!(v<(g=d<=I?c:d>=I+l?l:d-I));d+=f)s>y(i/(w=f-g))&&m("overflow"),s*=w;I=O(j-u,o=b.length+1,0==u),y(j/o)>i-A&&m("overflow"),A+=y(j/o),j%=o,b.splice(j++,0,A)}return E(b)}function T(e){var o,n,t,r,u,s,d,v,g,w,x,b,j,A,E,S=[];for(b=(e=I(e)).length,o=a,n=0,u=p,s=0;s<b;++s)(x=e[s])<128&&S.push(C(x));for(t=r=S.length,r&&S.push(h);t<b;){for(d=i,s=0;s<b;++s)(x=e[s])>=o&&x<d&&(d=x);for(d-o>y((i-n)/(j=t+1))&&m("overflow"),n+=(d-o)*j,o=d,s=0;s<b;++s)if((x=e[s])<o&&++n>i&&m("overflow"),x==o){for(v=n,g=f;!(v<(w=g<=u?c:g>=u+l?l:g-u));g+=f)E=v-w,A=f-w,S.push(C(F(w+E%A,0))),v=y(E/A);S.push(C(F(v,0))),u=O(n,j,t==r),n=0,++t}++n,++o}return S.join("")}if(r={version:"1.4.1",ucs2:{decode:I,encode:E},decode:S,encode:T,toASCII:function(e){return A(e,function(e){return g.test(e)?"xn--"+T(e):e})},toUnicode:function(e){return A(e,function(e){return v.test(e)?S(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return r});else if(o&&n)if(module.exports==o)n.exports=r;else for(u in r)r.hasOwnProperty(u)&&(o[u]=r[u]);else e.punycode=r}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(require,module,exports){"use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;y<p;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)}},{}],20:[function(require,module,exports){"use strict";var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e}},{}],21:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":19,"./encode":20}],22:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":23}],23:[function(require,module,exports){"use strict";var pna=require("process-nextick-args"),objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=Duplex;var util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Duplex.prototype._destroy=function(e,t){this.push(null),this.end(),pna.nextTick(t,e)}},{"./_stream_readable":25,"./_stream_writable":27,"core-util-is":9,inherits:12,"process-nextick-args":16}],24:[function(require,module,exports){"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,i){i(null,r)}},{"./_stream_transform":26,"core-util-is":9,inherits:12}],25:[function(require,module,exports){(function(process,global){"use strict";var pna=require("process-nextick-args");module.exports=Readable;var Duplex,isArray=require("isarray");Readable.ReadableState=ReadableState;require("events").EventEmitter;var EElistenerCount=function(e,t){return e.listeners(t).length},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};var util=require("core-util-is");util.inherits=require("inherits");var debugUtil=require("util"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=require("./internal/streams/BufferList"),destroyImpl=require("./internal/streams/destroy");util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(e,t){e=e||{};var r=t instanceof(Duplex=Duplex||require("./_stream_duplex"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(a||0===a)?a:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex=Duplex||require("./_stream_duplex"),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Stream.call(this)}function readableAddChunk(e,t,r,n,a){var i,d=e._readableState;return null===t?(d.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}}(e,d)):(a||(i=function(e,t){var r;return function(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(d,t)),i?e.emit("error",i):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===Buffer.prototype||(t=function(e){return Buffer.from(e)}(t)),n?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):addChunk(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!r?(t=d.decoder.write(t),d.objectMode||0!==t.length?addChunk(e,d,t,!1):maybeReadMore(e,d)):addChunk(e,d,t,!1))):n||(d.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(d)}function addChunk(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(e,t){this.push(null),t(e)},Readable.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer.from(e,t),t=""),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?pna.nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,pna.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,a=r.data;for(e-=a.length;r=r.next;){var i=r.data,d=e>i.length?i.length:e;if(d===i.length?a+=i:a+=i.slice(0,e),0==(e-=d)){d===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(d));break}++n}return t.length-=n,a}(e,t):function(e,t){var r=Buffer.allocUnsafe(e),n=t.head,a=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,d=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,d),0==(e-=d)){d===i.length?(++a,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(d));break}++a}return t.length-=a,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,pna.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n,a=t.needReadable;return debug("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",a=!0),t.ended||t.reading?debug("reading or ended",a=!1):a&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(n=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit("data",n),n},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===process.stdout||e===process.stderr?b:d;function d(){debug("onend"),e.end()}n.endEmitted?pna.nextTick(a):r.once("end",a),e.on("unpipe",function i(t,a){debug("onunpipe"),t===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,debug("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",o),e.removeListener("error",h),e.removeListener("unpipe",i),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",s),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||o())});var o=function(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}(r);e.on("drain",o);var u=!1,l=!1;function s(t){debug("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf(n.pipes,e))&&!u&&(debug("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function h(t){debug("onerror",t),b(),e.removeListener("error",h),0===EElistenerCount(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",p),b()}function p(){debug("onfinish"),e.removeListener("close",f),b()}function b(){debug("unpipe"),r.unpipe(e)}return r.on("data",s),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",f),e.once("finish",p),e.emit("pipe",r),n.flowing||(debug("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)n[i].emit("unpipe",this,r);return this}var d=indexOf(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable.prototype.on=function(e,t){var r=Stream.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,pna.nextTick(resume_,e,t))}(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var a in e.on("end",function(){if(debug("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){debug("wrapped data"),r.decoder&&(a=r.decoder.write(a)),r.objectMode&&null==a||(r.objectMode||a&&a.length)&&(t.push(a)||(n=!0,e.pause()))}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<kProxyEvents.length;i++)e.on(kProxyEvents[i],this.emit.bind(this,kProxyEvents[i]));return this._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":23,"./internal/streams/BufferList":28,"./internal/streams/destroy":29,"./internal/streams/stream":30,_process:17,"core-util-is":9,events:10,inherits:12,isarray:14,"process-nextick-args":16,"safe-buffer":35,"string_decoder/":37,util:7}],26:[function(require,module,exports){"use strict";module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState={afterTransform:function(r,t){var n=this._transformState;n.transforming=!1;var e=n.writecb;if(!e)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),e(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",prefinish)}function prefinish(){var r=this;"function"==typeof this._flush?this._flush(function(t,n){done(r,t,n)}):done(this,null,null)}function done(r,t,n){if(t)return r.emit("error",t);if(null!=n&&r.push(n),r._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(r._transformState.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var i=this._readableState;(e.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Transform.prototype._destroy=function(r,t){var n=this;Duplex.prototype._destroy.call(this,r,function(r){t(r),n.emit("close")})}},{"./_stream_duplex":23,"core-util-is":9,inherits:12}],27:[function(require,module,exports){(function(process,global,setImmediate){"use strict";var pna=require("process-nextick-args");function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var internalUtil={deprecate:require("util-deprecate")},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};var realHasInstance,destroyImpl=require("./internal/streams/destroy");function nop(){}function WritableState(e,t){Duplex=Duplex||require("./_stream_duplex"),e=e||{};var r=t instanceof Duplex;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(n||0===n)?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(pna.nextTick(n,i),pna.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),finishMaybe(e,t))}(e,r,i,t,n);else{var o=needFinish(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?asyncWrite(afterWrite,e,r,o,n):afterWrite(e,r,o,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(Duplex=Duplex||require("./_stream_duplex"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Stream.call(this)}function writeOrBuffer(e,t,r,i,n,o){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer.from(t,r)),t}(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,s,i,n,o);return f}function doWrite(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function afterWrite(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,s=!0;r;)n[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;n.allBuffers=s,doWrite(e,t,!0,t.length,n,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,u=r.encoding,l=r.callback;if(doWrite(e,t,!1,t.objectMode?1:f.length,f,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function finishMaybe(e,t){var r=needFinish(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,pna.nextTick(callFinal,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||this===Writable&&e&&e._writableState instanceof WritableState}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=!i.objectMode&&function(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}(e);return o&&!Buffer.isBuffer(e)&&(e=function(e){return Buffer.from(e)}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),pna.nextTick(t,r)}(this,r):(o||function(e,t,r,i){var n=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),pna.nextTick(i,o),n=!1),n}(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,o,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?pna.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},require("timers").setImmediate)},{"./_stream_duplex":23,"./internal/streams/destroy":29,"./internal/streams/stream":30,_process:17,"core-util-is":9,inherits:12,"process-nextick-args":16,"safe-buffer":35,timers:38,"util-deprecate":41}],28:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer,util=require("util");function copyBuffer(t,e,i){t.copy(e,i)}module.exports=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var e=Buffer.allocUnsafe(t>>>0),i=this.head,n=0;i;)copyBuffer(i.data,e,n),n+=i.data.length,i=i.next;return e},t}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var t=util.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":35,util:7}],29:[function(require,module,exports){"use strict";var pna=require("process-nextick-args");function emitErrorNT(t,e){t.emit("error",e)}module.exports={destroy:function(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(pna.nextTick(emitErrorNT,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":16}],30:[function(require,module,exports){module.exports=require("events").EventEmitter},{events:10}],31:[function(require,module,exports){module.exports=require("./readable").PassThrough},{"./readable":32}],32:[function(require,module,exports){(exports=module.exports=require("./lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":23,"./lib/_stream_passthrough.js":24,"./lib/_stream_readable.js":25,"./lib/_stream_transform.js":26,"./lib/_stream_writable.js":27}],33:[function(require,module,exports){module.exports=require("./readable").Transform},{"./readable":32}],34:[function(require,module,exports){module.exports=require("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":27}],35:[function(require,module,exports){var buffer=require("buffer"),Buffer=buffer.Buffer;function copyProps(f,r){for(var e in f)r[e]=f[e]}function SafeBuffer(f,r,e){return Buffer(f,r,e)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,r,e){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Buffer(f,r,e)},SafeBuffer.alloc=function(f,r,e){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=Buffer(f);return void 0!==r?"string"==typeof e?u.fill(r,e):u.fill(r):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(f)}},{buffer:8}],36:[function(require,module,exports){module.exports=Stream;var EE=require("events").EventEmitter;function Stream(){EE.call(this)}require("inherits")(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){var t=this;function n(r){e.writable&&!1===e.write(r)&&t.pause&&t.pause()}function a(){t.readable&&t.resume&&t.resume()}t.on("data",n),e.on("drain",a),e._isStdio||r&&!1===r.end||(t.on("end",i),t.on("close",s));var o=!1;function i(){o||(o=!0,e.end())}function s(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function m(e){if(u(),0===EE.listenerCount(this,"error"))throw e}function u(){t.removeListener("data",n),e.removeListener("drain",a),t.removeListener("end",i),t.removeListener("close",s),t.removeListener("error",m),e.removeListener("error",m),t.removeListener("end",u),t.removeListener("close",u),e.removeListener("close",u)}return t.on("error",m),e.on("error",m),t.on("end",u),t.on("close",u),e.on("close",u),e.emit("pipe",t),e}},{events:10,inherits:12,"readable-stream/duplex.js":22,"readable-stream/passthrough.js":31,"readable-stream/readable.js":32,"readable-stream/transform.js":33,"readable-stream/writable.js":34}],37:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer,isEncoding=Buffer.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(Buffer.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(e)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,s=function(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function utf16Text(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function base64Text(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},StringDecoder.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},StringDecoder.prototype.text=function(t,e){var s=function(t,e,s){var i=e.length-1;if(i<s)return 0;var n=utf8CheckByte(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(t.lastNeed=n-2),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":35}],38:[function(require,module,exports){(function(setImmediate,clearImmediate){var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]}}).call(this,require("timers").setImmediate,require("timers").clearImmediate)},{"process/browser.js":17,timers:38}],39:[function(require,module,exports){"use strict";var punycode=require("punycode"),util=require("./util");function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=function(t,s){return urlParse(t,!1,!0).resolve(s)},exports.resolveObject=function(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s},exports.format=function(t){return util.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)},exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,unwise=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");function urlParse(t,s,e){if(t&&util.isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}Url.prototype.parse=function(t,s,e){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t.indexOf("?"),r=-1!==h&&h<t.indexOf("#")?"?":"#",a=t.split(r);a[0]=a[0].replace(/\\/g,"/");var o=t=a.join(r);if(o=o.trim(),!e&&1===t.split("#").length){var n=simplePathPattern.exec(o);if(n)return this.path=o,this.href=o,this.pathname=n[1],n[2]?(this.search=n[2],this.query=s?querystring.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var i=protocolPattern.exec(o);if(i){var l=(i=i[0]).toLowerCase();this.protocol=l,o=o.substr(i.length)}if(e||i||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===o.substr(0,2);!u||i&&hostlessProtocol[i]||(o=o.substr(2),this.slashes=!0)}if(!hostlessProtocol[i]&&(u||i&&!slashedProtocol[i])){for(var p,c,f=-1,m=0;m<hostEndingChars.length;m++)-1!==(v=o.indexOf(hostEndingChars[m]))&&(-1===f||v<f)&&(f=v);for(-1!==(c=-1===f?o.lastIndexOf("@"):o.lastIndexOf("@",f))&&(p=o.slice(0,c),o=o.slice(c+1),this.auth=decodeURIComponent(p)),f=-1,m=0;m<nonHostChars.length;m++){var v;-1!==(v=o.indexOf(nonHostChars[m]))&&(-1===f||v<f)&&(f=v)}-1===f&&(f=o.length),this.host=o.slice(0,f),o=o.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),P=(m=0,y.length);m<P;m++){var d=y[m];if(d&&!d.match(hostnamePartPattern)){for(var b="",q=0,O=d.length;q<O;q++)d.charCodeAt(q)>127?b+="x":b+=d[q];if(!b.match(hostnamePartPattern)){var j=y.slice(0,m),x=y.slice(m+1),U=d.match(hostnamePartStart);U&&(j.push(U[1]),x.unshift(U[2])),x.length&&(o="/"+x.join(".")+o),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=punycode.toASCII(this.hostname));var C=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!unsafeProtocol[l])for(m=0,P=autoEscape.length;m<P;m++){var w=autoEscape[m];if(-1!==o.indexOf(w)){var E=encodeURIComponent(w);E===w&&(E=escape(w)),o=o.split(w).join(E)}}var I=o.indexOf("#");-1!==I&&(this.hash=o.substr(I),o=o.slice(0,I));var R=o.indexOf("?");if(-1!==R?(this.search=o.substr(R),this.query=o.substr(R+1),s&&(this.query=querystring.parse(this.query)),o=o.slice(0,R)):s&&(this.search="",this.query={}),o&&(this.pathname=o),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var S=this.search||"";this.path=C+S}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(a=querystring.stringify(this.query));var o=this.search||a&&"?"+a||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),o&&"?"!==o.charAt(0)&&(o="?"+o),s+r+(e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}for(var e=new Url,h=Object.keys(this),r=0;r<h.length;r++){var a=h[r];e[a]=this[a]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];"protocol"!==i&&(e[i]=t[i])}return slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];e[p]=t[p]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var f=e.pathname||"",m=e.search||"";e.path=f+m}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var v=e.pathname&&"/"===e.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=g||v||e.host&&t.pathname,P=y,d=e.pathname&&e.pathname.split("/")||[],b=(c=t.pathname&&t.pathname.split("/")||[],e.protocol&&!slashedProtocol[e.protocol]);if(b&&(e.hostname="",e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),y=y&&(""===c[0]||""===d[0])),g)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,d=c;else if(c.length)d||(d=[]),d.pop(),d=d.concat(c),e.search=t.search,e.query=t.query;else if(!util.isNullOrUndefined(t.search))return b&&(e.hostname=e.host=d.shift(),(U=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=U.shift(),e.host=e.hostname=U.shift())),e.search=t.search,e.query=t.query,util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!d.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var q=d.slice(-1)[0],O=(e.host||t.host||d.length>1)&&("."===q||".."===q)||""===q,j=0,x=d.length;x>=0;x--)"."===(q=d[x])?d.splice(x,1):".."===q?(d.splice(x,1),j++):j&&(d.splice(x,1),j--);if(!y&&!P)for(;j--;j)d.unshift("..");!y||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),O&&"/"!==d.join("/").substr(-1)&&d.push("");var U,C=""===d[0]||d[0]&&"/"===d[0].charAt(0);return b&&(e.hostname=e.host=C?"":d.length?d.shift():"",(U=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=U.shift(),e.host=e.hostname=U.shift())),(y=y||e.host&&d.length)&&!C&&d.unshift(""),d.length?e.pathname=d.join("/"):(e.pathname=null,e.path=null),util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)}},{"./util":40,punycode:18,querystring:21}],40:[function(require,module,exports){"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}}},{}],41:[function(require,module,exports){(function(global){function config(r){try{if(!global.localStorage)return!1}catch(r){return!1}var e=global.localStorage[r];return null!=e&&"true"===String(e).toLowerCase()}module.exports=function(r,e){if(config("noDeprecation"))return r;var o=!1;return function(){if(!o){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),o=!0}return r.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(require,module,exports){module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8}},{}],43:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var t=!1;return function(){if(!t){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),t=!0}return e.apply(this,arguments)}};var debugEnviron,debugs={};function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=function(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var o=Object.keys(r),s=function(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c,a="",l=!1,p=["{","}"];return isArray(r)&&(l=!0,p=["[","]"]),isFunction(r)&&(a=" [Function"+(r.name?": "+r.name:"")+"]"),isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0!==o.length||l&&0!=r.length?t<0?isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=l?function(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,l)}),e.seen.pop(),function(e,r,t){return e.reduce(function(e,r){return r.indexOf("\n"),e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}(c,a,p)):p[0]+a+p[1]}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatProperty(e,r,t,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=function(e){return null==e},exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=function(e){return"symbol"==typeof e},exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}exports.log=function(){var e,r;console.log("%s - %s",(e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":"),[e.getDate(),months[e.getMonth()],r].join(" ")),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":42,_process:17,inherits:12}],44:[function(require,module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,o=n.execScript;!r&&o&&(o.call(n,"null"),r=n.eval),forEach(Object_keys(e),function(t){n[t]=e[t]}),forEach(globals,function(t){e[t]&&(n[t]=e[t])});var c=Object_keys(n),i=r.call(n,this.code);return forEach(Object_keys(n),function(t){(t in e||-1===indexOf(c,t))&&(e[t]=n[t])}),forEach(globals,function(t){t in e||defineProp(e,t,n[t])}),document.body.removeChild(t),i},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return e&&forEach(Object_keys(t),function(n){e[n]=t[n]}),n},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(n){t[n]=e[n]}),t}},{}],45:[function(require,module,exports){module.exports=async function(e,{identity:t,space:i,role:a,email:n}){return await e.post({identity:t,endpoint:`/spaces/${i}/allow`,query:{role:a,email:n}})}},{}],46:[function(require,module,exports){module.exports=async function(a,{apikey:o,email:t,password:i}){return t&&i?await a.post({endpoint:"/auth",body:{email:t,password:i}}):o?await a.post({endpoint:"/auth",headers:{authorization:`Apikey ${o}`}}):void 0}},{}],47:[function(require,module,exports){module.exports=async function(e,{identity:i,space:t,role:a,email:n}){return await e.post({identity:i,endpoint:`/spaces/${t}/disallow`,query:{role:a,email:n}})}},{}],48:[function(require,module,exports){module.exports=async function(n){const{body:t}=await n.get({endpoint:"/accounts/current"});return t}},{}],49:[function(require,module,exports){module.exports=async function(a,{space:e,domain:n,stream:s}){await a.delete({endpoint:`/spaces/${e}/domains/${n}/streams/${s}/annotation`})}},{}],50:[function(require,module,exports){module.exports=async function(t,{space:a,domain:n,stream:o}){try{const{body:s}=await t.get({endpoint:`/spaces/${a}/domains/${n}/streams/${o}/annotation`});return s}catch(t){if(t&&404===t.statusCode)return;if(t)throw t}}},{}],51:[function(require,module,exports){module.exports=async function(t,{space:a,domain:e,from:o,after:s,to:i,until:n,types:r,limit:c,each:m}){const{body:f}=await t.get({endpoint:`/spaces/${a}/domains/${e}/events`,query:{types:r,from:o,after:s,to:i,until:n,limit:c,schema:"jsonapi"}});for(const t of f.data)await m(t);if(f.meta.cursor)return f.meta.cursor.after}},{}],52:[function(require,module,exports){module.exports=async function(i,{identity:n,space:t,domain:a}){await i.put({identity:n,endpoint:`/spaces/${t}/domains/${a}`})}},{}],53:[function(require,module,exports){module.exports=async function(e,{space:a,domain:n}){await e.delete({endpoint:`/spaces/${a}/domains/${n}`})}},{}],54:[function(require,module,exports){module.exports=async function(e,{identity:t,space:n,domain:d,spec:o}){await e.put({identity:t,endpoint:`/spaces/${n}/domains/${d}/model`,headers:{"content-type":"text/domainmodel; charset=UTF-8"},body:o})}},{}],55:[function(require,module,exports){module.exports=async function(t,{space:a,domain:e,from:o,after:s,to:i,until:n,types:r,limit:c,each:m}){const{body:f}=await t.get({endpoint:`/spaces/${a}/domains/${e}/events`,query:{types:r,from:o,after:s,to:i,until:n,limit:c,schema:"jsonapi"}});for(const t of f.data)await m(t);if(f.meta.cursor)return f.meta.cursor.after}},{}],56:[function(require,module,exports){module.exports=async function(o,{space:a,domain:n,to:e}){await o.post({endpoint:`/spaces/${a}/domains/${n}/rename?to=${e}`})}},{}],57:[function(require,module,exports){module.exports=async function(e,{space:n,domain:a}){await e.delete({endpoint:`/spaces/${n}/domains/${a}/contents`})}},{}],58:[function(require,module,exports){module.exports=async function(o,{space:a,each:n}){const{body:s}=await o.get({endpoint:`/spaces/${a}/domains`});for(const o of s)await n(o)}},{}],59:[function(require,module,exports){module.exports=async function(e,{space:s,domain:a,stream:n,event:t}){await e.delete({endpoint:`/spaces/${s}/domains/${a}/streams/${n}/events/${t}`})}},{}],60:[function(require,module,exports){module.exports=async function(e,{identity:t,space:n,domain:s,stream:a,event:i}){let{body:d}=await e.get({identity:t,endpoint:`/spaces/${n}/domains/${s}/streams/${a}/events/${i}`});return d}},{}],61:[function(require,module,exports){module.exports=async function(n,{name:o,params:t}){let{body:e}=await n.post({endpoint:`/functions/${o}/invoke`,body:t});return e}},{}],62:[function(require,module,exports){module.exports=async function(n,{name:t,src:e}){await n.put({endpoint:`/functions/${t}`,body:e,headers:{"content-type":"text/domainmodel"}})}},{}],63:[function(require,module,exports){(function(process){const Errors=require("../Errors"),HTTP=require("../utils/http");require("../mq");const endpoints={allowAccount:require("./account/allow.js"),authenticateAccount:require("./account/authenticate.js"),disallowAccount:require("./account/disallow.js"),getAccount:require("./account/get.js"),destroyAnnotation:require("./annotation/destroy.js"),readAnnotation:require("./annotation/read.js"),continueCursor:require("./cursor/continue.js"),createDomain:require("./domain/create.js"),destroyDomain:require("./domain/destroy.js"),modelDomain:require("./domain/model.js"),readDomain:require("./domain/read.js"),renameDomain:require("./domain/rename.js"),truncateDomain:require("./domain/truncate.js"),listDomains:require("./domains/list.js"),destroyEvent:require("./event/destroy.js"),readEvent:require("./event/read.js"),invokeFunction:require("./function/invoke.js"),registerFunction:require("./function/register.js"),readModel:require("./model/read.js"),mutateObject:require("./object/mutate.js"),readObject:require("./object/read.js"),listObjects:require("./objects/list.js"),mqSettings:require("./settings/mq.js"),cloneSpace:require("./space/clone.js"),createSpace:require("./space/create.js"),destroySpace:require("./space/destroy.js"),renameSpace:require("./space/rename.js"),listSpaces:require("./spaces/list.js"),annotateStream:require("./stream/annotate.js"),destroyStream:require("./stream/destroy.js"),readStream:require("./stream/read.js"),writeStream:require("./stream/write.js"),listStreams:require("./streams/list.js"),createSubscription:require("./subscription/create.js"),destroySubscription:require("./subscription/destroy.js"),listSubscriptions:require("./subscriptions/list.js"),getType:require("./type/get.js"),setType:require("./type/set.js")};module.exports=class{constructor(e){this.type="persistr",this.identity=e,this.server=process.env.PERSISTR_API_URL||`https://api${function(e){return e?`-${e}`:""}(e.environment)}.persistr.com`,this.http=new HTTP(this.server,this.identity)}async allowAccount(e){return Errors.handle(async()=>endpoints.allowAccount(this.http,e))}async authenticateAccount(e){return Errors.handle(async()=>endpoints.authenticateAccount(this.http,e))}async disallowAccount(e){return Errors.handle(async()=>endpoints.disallowAccount(this.http,e))}async getAccount(e){return Errors.handle(async()=>endpoints.getAccount(this.http,e))}async destroyAnnotation(e){return Errors.handle(async()=>endpoints.destroyAnnotation(this.http,e))}async readAnnotation(e){return Errors.handle(async()=>endpoints.readAnnotation(this.http,e))}async continueCursor(e){return Errors.handle(async()=>endpoints.continueCursor(this.http,e))}async createDomain(e){return Errors.handle(async()=>endpoints.createDomain(this.http,e))}async destroyDomain(e){return Errors.handle(async()=>endpoints.destroyDomain(this.http,e))}async modelDomain(e){return Errors.handle(async()=>endpoints.modelDomain(this.http,e))}async readDomain(e){return Errors.handle(async()=>endpoints.readDomain(this.http,e))}async renameDomain(e){return Errors.handle(async()=>endpoints.renameDomain(this.http,e))}async truncateDomain(e){return Errors.handle(async()=>endpoints.truncateDomain(this.http,e))}async listDomains(e){return Errors.handle(async()=>endpoints.listDomains(this.http,e))}async destroyEvent(e){return Errors.handle(async()=>endpoints.destroyEvent(this.http,e))}async readEvent(e){return Errors.handle(async()=>endpoints.readEvent(this.http,e))}async invokeFunction(e){return Errors.handle(async()=>endpoints.invokeFunction(this.http,e))}async registerFunction(e){return Errors.handle(async()=>endpoints.registerFunction(this.http,e))}async readModel(e){return Errors.handle(async()=>endpoints.readModel(this.http,e))}async mutateObject(e){return Errors.handle(async()=>endpoints.mutateObject(this.http,e))}async readObject(e){return Errors.handle(async()=>endpoints.readObject(this.http,e))}async listObjects(e){return Errors.handle(async()=>endpoints.listObjects(this.http,e))}async mqSettings(e){return Errors.handle(async()=>endpoints.mqSettings(this.http,e))}async cloneSpace(e){return Errors.handle(async()=>endpoints.cloneSpace(this.http,e))}async createSpace(e){return Errors.handle(async()=>endpoints.createSpace(this.http,e))}async destroySpace(e){return Errors.handle(async()=>endpoints.destroySpace(this.http,e))}async renameSpace(e){return Errors.handle(async()=>endpoints.renameSpace(this.http,e))}async listSpaces(e){return Errors.handle(async()=>endpoints.listSpaces(this.http,e))}async annotateStream(e){return Errors.handle(async()=>endpoints.annotateStream(this.http,e))}async destroyStream(e){return Errors.handle(async()=>endpoints.destroyStream(this.http,e))}async readStream(e){return Errors.handle(async()=>endpoints.readStream(this.http,e))}async writeStream(e){return Errors.handle(async()=>endpoints.writeStream(this.http,e))}async listStreams(e){return Errors.handle(async()=>endpoints.listStreams(this.http,e))}async createSubscription(e){return Errors.handle(async()=>endpoints.createSubscription(this.http,e))}async destroySubscription(e){return Errors.handle(async()=>endpoints.destroySubscription(this.http,e))}async listSubscriptions(e){return Errors.handle(async()=>endpoints.listSubscriptions(this.http,e))}async getType(e){return Errors.handle(async()=>endpoints.getType(this.http,e))}async setType(e){return Errors.handle(async()=>endpoints.setType(this.http,e))}}}).call(this,require("_process"))},{"../Errors":92,"../mq":141,"../utils/http":146,"./account/allow.js":45,"./account/authenticate.js":46,"./account/disallow.js":47,"./account/get.js":48,"./annotation/destroy.js":49,"./annotation/read.js":50,"./cursor/continue.js":51,"./domain/create.js":52,"./domain/destroy.js":53,"./domain/model.js":54,"./domain/read.js":55,"./domain/rename.js":56,"./domain/truncate.js":57,"./domains/list.js":58,"./event/destroy.js":59,"./event/read.js":60,"./function/invoke.js":61,"./function/register.js":62,"./model/read.js":64,"./object/mutate.js":65,"./object/read.js":66,"./objects/list.js":67,"./settings/mq.js":68,"./space/clone.js":69,"./space/create.js":70,"./space/destroy.js":71,"./space/rename.js":72,"./spaces/list.js":73,"./stream/annotate.js":74,"./stream/destroy.js":75,"./stream/read.js":76,"./stream/write.js":77,"./streams/list.js":78,"./subscription/create.js":79,"./subscription/destroy.js":80,"./subscriptions/list.js":81,"./type/get.js":82,"./type/set.js":83,_process:17}],64:[function(require,module,exports){module.exports=async function(e,{space:a,domain:c,accept:n}){const{body:o}=await e.get({endpoint:`/spaces/${a}/domains/${c}/model`,headers:{accept:n}});return o}},{}],65:[function(require,module,exports){module.exports=async function(a,{space:s,domain:t,stream:o,type:e,mutation:n,params:m}){await a.post({endpoint:`/spaces/${s}/domains/${t}/streams/${o}/as/${e}/${n}`,body:m})}},{}],66:[function(require,module,exports){module.exports=async function(e,{space:t,domain:n,stream:o,type:s}){let a=`/spaces/${t}/domains/${n}/objects/${s}`;o&&(a+=`/${o}`);const{body:c}=await e.get({endpoint:a});return c}},{}],67:[function(require,module,exports){module.exports=async function(n,{space:o,domain:e}){const{body:s}=await n.get({endpoint:`/spaces/${o}/domains/${e}/objects`});return s}},{}],68:[function(require,module,exports){module.exports=async function(t){const{body:n}=await t.get({endpoint:"/settings/mq"});return n}},{}],69:[function(require,module,exports){module.exports=async function(o,{space:t,to:e}){await o.post({endpoint:`/spaces/${t}/clone?to=${e}`})}},{}],70:[function(require,module,exports){module.exports=async function(t,{identity:e,space:i}){await t.put({identity:e,endpoint:`/spaces/${i}`})}},{}],71:[function(require,module,exports){module.exports=async function(e,{identity:t,space:i}){await e.delete({identity:t,endpoint:`/spaces/${i}`})}},{}],72:[function(require,module,exports){module.exports=async function(e,{space:o,to:t}){await e.post({endpoint:`/spaces/${o}/rename?to=${t}`})}},{}],73:[function(require,module,exports){module.exports=async function(o,{each:t}){const{body:a}=await o.get({endpoint:"/spaces"});for(const o of a)await t(o)}},{}],74:[function(require,module,exports){module.exports=async function(a,{space:n,domain:o,stream:t,annotation:s}){await a.put({endpoint:`/spaces/${n}/domains/${o}/streams/${t}/annotation`,body:s})}},{}],75:[function(require,module,exports){module.exports=async function(e,{space:a,domain:s,stream:n}){await e.delete({endpoint:`/spaces/${a}/domains/${s}/streams/${n}`})}},{}],76:[function(require,module,exports){module.exports=async function(t,{space:a,domain:e,stream:o,from:s,after:r,to:i,until:n,types:m,limit:c,each:f}){const{body:u}=await t.get({endpoint:`/spaces/${a}/domains/${e}/streams/${o}/events`,query:{types:m,from:s,after:r,to:i,until:n,limit:c,schema:"jsonapi"}});for(const t of u.data)await f(t);if(u.meta.cursor)return u.meta.cursor.after}},{}],77:[function(require,module,exports){const{DateTime:DateTime}=require("luxon"),uuidv4=require("uuid/v4");module.exports=async function(e,{space:a,domain:t,stream:i,data:u,meta:d,id:m}){m||(m=uuidv4()),d={tz:DateTime.local().zoneName,...d},await e.put({endpoint:`/spaces/${a}/domains/${t}/streams/${i}/events/${m}`,body:{data:u||{},meta:d}})}},{luxon:195,"uuid/v4":209}],78:[function(require,module,exports){module.exports=async function(a,{space:o,domain:s,each:n}){const{body:t}=await a.get({endpoint:`/spaces/${o}/domains/${s}/streams`});for(const a of t)await n(a)}},{}],79:[function(require,module,exports){const{DateTime:DateTime}=require("luxon");require("uuid/v4");module.exports=async function(e,{adapter:i,filter:t}){await e.post({endpoint:"/subscriptions",body:{adapter:i,filter:t}})}},{luxon:195,"uuid/v4":209}],80:[function(require,module,exports){module.exports=async function(e,{id:i}){await e.delete({endpoint:`/subscriptions/${i}`})}},{}],81:[function(require,module,exports){module.exports=async function(e,{space:n,domain:s,stream:t}){const{body:a}=await e.get({endpoint:"/subscriptions",query:{space:n,domain:s,stream:t}});return a}},{}],82:[function(require,module,exports){module.exports=async function(n,{space:e,domain:a,name:o}){const{body:s}=await n.get({endpoint:`/spaces/${e}/domains/${a}/types/${o}`});return s}},{}],83:[function(require,module,exports){module.exports=async function(e,{space:n,domain:t,name:a,spec:o}){await e.put({endpoint:`/spaces/${n}/domains/${t}/types/${a}`,body:o,headers:{"content-type":"text/domainmodel"}})}},{}],84:[function(require,module,exports){module.exports=class extends(require("./PersistrError")){constructor(){super("Connection refused while attempting to connect to Persistr API")}}},{"./PersistrError":89}],85:[function(require,module,exports){module.exports=class extends(require("./PersistrError")){constructor(r){super(r)}}},{"./PersistrError":89}],86:[function(require,module,exports){module.exports=class extends(require("./PersistrError")){constructor(r){super(r?`Internal error\nWhat went wrong:\n${r.message}`:"Internal error")}}},{"./PersistrError":89}],87:[function(require,module,exports){module.exports=class extends(require("./PersistrError")){constructor({bearer:r}){super(`Invalid bearer token: ${r}`)}}},{"./PersistrError":89}],88:[function(require,module,exports){module.exports=class extends(require("./PersistrError")){constructor(){super("Invalid credentials")}}},{"./PersistrError":89}],89:[function(require,module,exports){module.exports=class extends Error{constructor(r){super(r),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}},{}],90:[function(require,module,exports){module.exports=class extends(require("./PersistrError")){constructor(r,e,s,t){let o=`${r} ${e} ${s}`;try{const r=JSON.parse(t);r&&r.error&&(o=`${o}: ${r.error}`)}catch(r){}super(o),this.statusCode=e}}},{"./PersistrError":89}],91:[function(require,module,exports){module.exports=class extends(require("./PersistrError")){constructor({filter:r,on:e}){super(`Unsupported filter '${r}' on ${e}`)}}},{"./PersistrError":89}],92:[function(require,module,exports){var Errors={ConnectionRefused:require("./ConnectionRefused.js"),Fetch:require("./Fetch.js"),InternalError:require("./InternalError.js"),InvalidBearerToken:require("./InvalidBearerToken.js"),InvalidCredentials:require("./InvalidCredentials.js"),PersistrError:require("./PersistrError.js"),StatusCode:require("./StatusCode.js"),UnsupportedFilter:require("./UnsupportedFilter.js"),handle:async function(r){try{return await r()}catch(r){if(r instanceof Errors.PersistrError)throw r;if(r&&r.error&&"ECONNREFUSED"===r.error.code)throw new Errors.ConnectionRefused;throw r}}};module.exports=Errors},{"./ConnectionRefused.js":84,"./Fetch.js":85,"./InternalError.js":86,"./InvalidBearerToken.js":87,"./InvalidCredentials.js":88,"./PersistrError.js":89,"./StatusCode.js":90,"./UnsupportedFilter.js":91}],93:[function(require,module,exports){module.exports=async function(e,{space:n,domain:a,stream:o}){delete e.annotations[`${n}.${a}.${o}`]}},{}],94:[function(require,module,exports){module.exports=async function(n,{space:a,domain:o,stream:t}){return n.annotations[`${a}.${o}.${t}`]}},{}],95:[function(require,module,exports){module.exports=async function(n,{identity:e,space:i,domain:o}){}},{}],96:[function(require,module,exports){const filter=require("../../utils/filter");module.exports=async function(e,{space:t,domain:n}){e.events=e.events.filter(e=>e.meta.space!==t||e.meta.domain!==n),e.index.events=filter(e.index.events,`${t}.${n}.`)}},{"../../utils/filter":145}],97:[function(require,module,exports){module.exports=async function(e,{space:t,domain:a,from:o,after:i,to:r,until:m,types:s,limit:n,each:f}){let c=e.events.filter(e=>e.meta.space===t&&e.meta.domain===a);s&&(s=Array.isArray(s)?s:[s],c=c.filter(e=>s.some(t=>t===e.meta.type)));for(const e of c)await f(e)}},{}],98:[function(require,module,exports){const filter=require("../../utils/filter");module.exports=async function(e,{space:t,domain:n}){e.events=e.events.filter(e=>e.meta.space!==t||e.meta.domain!==n),e.index.events=filter(e.index.events,`${t}.${n}.`)}},{"../../utils/filter":145}],99:[function(require,module,exports){module.exports=async function(e,{space:t,each:a}){const o=e.events.filter(e=>e.meta.space===t).map(e=>e.meta.domain).sort().filter((e,t,a)=>!t||e!==a[t-1]);for(const e of o)await a(e)}},{}],100:[function(require,module,exports){module.exports=async function(e,{space:n,domain:t,stream:s,event:$}){const d=e.index.events[`${n}.${t}.${s}.${$}`];delete e.index.events[`${n}.${t}.${s}.${$}`],delete e.events[d]}},{}],101:[function(require,module,exports){module.exports=async function(e,{identity:n,space:t,domain:s,stream:i,event:o}){const a=e.index.events[`${t}.${s}.${i}.${o}`];return e.events[a]}},{}],102:[function(require,module,exports){const nodeEval=require("node-eval");module.exports=async function(n,{name:e,params:o}){const a=n.functions[e],t=nodeEval(a,`./${e}.js`);if(t&&"function"==typeof t)return await t(o)}},{"node-eval":198}],103:[function(require,module,exports){module.exports=async function(n,{name:c,src:o}){n.functions[c]=o}},{}],104:[function(require,module,exports){const Errors=require("../Errors"),endpoints={destroyAnnotation:require("./annotation/destroy.js"),readAnnotation:require("./annotation/read.js"),createDomain:require("./domain/create.js"),destroyDomain:require("./domain/destroy.js"),readDomain:require("./domain/read.js"),truncateDomain:require("./domain/truncate.js"),listDomains:require("./domains/list.js"),destroyEvent:require("./event/destroy.js"),readEvent:require("./event/read.js"),invokeFunction:require("./function/invoke.js"),registerFunction:require("./function/register.js"),mqSettings:require("./settings/mq.js"),destroySpace:require("./space/destroy.js"),listSpaces:require("./spaces/list.js"),annotateStream:require("./stream/annotate.js"),destroyStream:require("./stream/destroy.js"),readStream:require("./stream/read.js"),writeStream:require("./stream/write.js"),listStreams:require("./streams/list.js"),getType:require("./type/get.js"),setType:require("./type/set.js")};module.exports=class{constructor(){this.type="local",this.store={events:[],index:{events:{}},annotations:{},functions:{},types:{}}}async destroyAnnotation(e){return Errors.handle(async()=>endpoints.destroyAnnotation(this.store,e))}async readAnnotation(e){return Errors.handle(async()=>endpoints.readAnnotation(this.store,e))}async createDomain(e){return Errors.handle(async()=>endpoints.createDomain(this.store,e))}async destroyDomain(e){return Errors.handle(async()=>endpoints.destroyDomain(this.store,e))}async readDomain(e){return Errors.handle(async()=>endpoints.readDomain(this.store,e))}async truncateDomain(e){return Errors.handle(async()=>endpoints.truncateDomain(this.store,e))}async listDomains(e){return Errors.handle(async()=>endpoints.listDomains(this.store,e))}async destroyEvent(e){return Errors.handle(async()=>endpoints.destroyEvent(this.store,e))}async readEvent(e){return Errors.handle(async()=>endpoints.readEvent(this.store,e))}async invokeFunction(e){return Errors.handle(async()=>endpoints.invokeFunction(this.store,e))}async registerFunction(e){return Errors.handle(async()=>endpoints.registerFunction(this.store,e))}async mqSettings(e){return Errors.handle(async()=>endpoints.mqSettings(this.store,e))}async destroySpace(e){return Errors.handle(async()=>endpoints.destroySpace(this.store,e))}async listSpaces(e){return Errors.handle(async()=>endpoints.listSpaces(this.store,e))}async annotateStream(e){return Errors.handle(async()=>endpoints.annotateStream(this.store,e))}async destroyStream(e){return Errors.handle(async()=>endpoints.destroyStream(this.store,e))}async readStream(e){return Errors.handle(async()=>endpoints.readStream(this.store,e))}async writeStream(e){return Errors.handle(async()=>endpoints.writeStream(this.store,e))}async listStreams(e){return Errors.handle(async()=>endpoints.listStreams(this.store,e))}async getType(e){return Errors.handle(async()=>endpoints.getType(this.store,e))}async setType(e){return Errors.handle(async()=>endpoints.setType(this.store,e))}}},{"../Errors":92,"./annotation/destroy.js":93,"./annotation/read.js":94,"./domain/create.js":95,"./domain/destroy.js":96,"./domain/read.js":97,"./domain/truncate.js":98,"./domains/list.js":99,"./event/destroy.js":100,"./event/read.js":101,"./function/invoke.js":102,"./function/register.js":103,"./settings/mq.js":105,"./space/destroy.js":106,"./spaces/list.js":107,"./stream/annotate.js":108,"./stream/destroy.js":109,"./stream/read.js":110,"./stream/write.js":111,"./streams/list.js":112,"./type/get.js":113,"./type/set.js":114}],105:[function(require,module,exports){module.exports=async function(e){return{type:"local"}}},{}],106:[function(require,module,exports){const filter=require("../../utils/filter");module.exports=async function(e,{space:t}){e.events=e.events.filter(e=>e.meta.space!==t),e.index.events=filter(e.index.events,`${t}.`)}},{"../../utils/filter":145}],107:[function(require,module,exports){module.exports=async function(t,{each:e}){const o=t.events.map(t=>t.meta.space).sort().filter((t,e,o)=>!e||t!==o[e-1]);for(const t of o)await e(t)}},{}],108:[function(require,module,exports){module.exports=async function(n,{space:a,domain:o,stream:t,annotation:s}){n.annotations[`${a}.${o}.${t}`]=s}},{}],109:[function(require,module,exports){const filter=require("../../utils/filter");module.exports=async function(e,{space:t,domain:n,stream:s}){e.events=e.events.filter(e=>e.meta.space!==t||e.meta.domain!==n||e.meta.stream!==s),e.index.events=filter(e.index.events,`${t}.${n}.${s}.`)}},{"../../utils/filter":145}],110:[function(require,module,exports){const matcher=require("matcher");module.exports=async function(e,{space:t,domain:a,stream:r,from:m,after:s,to:i,until:o,types:c,limit:n,each:f}){let l=e.events.filter(e=>e.meta.space===t&&e.meta.domain===a&&e.meta.stream===r);c&&(c=Array.isArray(c)?c:[c],l=l.filter(e=>c.some(t=>matcher.isMatch(e.meta.type,t))));for(const e of l)await f(e)}},{matcher:196}],111:[function(require,module,exports){const{DateTime:DateTime}=require("luxon"),uuidv4=require("uuid/v4");module.exports=async function(e,{space:a,domain:t,stream:s,data:i,meta:m,id:n}){const d={data:i||{},meta:{id:n||uuidv4(),tz:DateTime.local().zoneName,ts:(new Date).toISOString(),...m,stream:s,domain:t,space:a}},u=e.events.push(d)-1;e.index.events[`${a}.${t}.${s}.${d.meta.id}`]=u,await e.messages.publish({channel:`${d.meta.space}.${d.meta.domain}.${d.meta.stream}`,event:d}),await e.messages.publish({channel:`${d.meta.space}.${d.meta.domain}`,event:d})}},{luxon:195,"uuid/v4":209}],112:[function(require,module,exports){module.exports=async function(a,{space:e,domain:t,each:o}){const s=a.events.filter(a=>a.meta.space===e&&a.meta.domain===t).map(a=>a.meta.stream).sort().filter((a,e,t)=>!e||a!==t[e-1]);for(const a of s)await o(a)}},{}],113:[function(require,module,exports){module.exports=async function(e,{space:n,domain:a,name:o}){return e.types[`${n}.${a}.${o}`]}},{}],114:[function(require,module,exports){module.exports=async function(e,{space:n,domain:s,name:a,spec:c}){e.types[`${n}.${s}.${a}`]=c}},{}],115:[function(require,module,exports){(function(process){const amqp=require("amqp-connection-manager");module.exports=class{constructor(e,t){this.account=e,this.subscription=t,this.queue=t.adapter.amqp.queue,this.exchange=t.adapter.amqp.exchange,this.connection=amqp.connect([this.subscription.adapter.amqp.url],{connectionOptions:{clientProperties:{app:`persistr/js ${process.env.npm_package_version}`}}}),this.channel=this.connection.createChannel({json:!0,setup:e=>e.assertQueue(this.queue.name,this.queue.options)})}async on(e){await this.channel.addSetup(t=>Promise.all([t.prefetch(1),t.consume(this.queue.name,async t=>{try{const n=JSON.parse(t.content.toString()).event;n&&await e(n),this.channel.ack(t)}catch(e){console.log(e),this.channel.nack(t)}})])),await this.account.subscription(this.subscription).create()}}}).call(this,require("_process"))},{_process:17,"amqp-connection-manager":151}],116:[function(require,module,exports){const Fn=require("./Fn"),Functions=require("./Functions"),Space=require("./Space"),Spaces=require("./Spaces"),Subscription=require("./Subscription"),Subscriptions=require("./Subscriptions");module.exports=class{constructor(e){this.api=e}async details(){return this.api.getAccount()}functions(){return new Functions(this)}fn(e,t){return new Fn(this,e,t)}subscriptions(e){return new Subscriptions(this,e)}subscription(e){if(e&&"object"==typeof e){const t=e;return new Subscription(this,t.id,t.filter,t.adapter)}return new Subscription(this,e)}spaces(){return new Spaces(this)}databases(){return new Spaces(this)}space(e){return new Space(e,this)}database(e){return new Space(e,this)}db(e){return new Space(e,this)}}},{"./Fn":123,"./Functions":124,"./Space":132,"./Spaces":133,"./Subscription":136,"./Subscriptions":137}],117:[function(require,module,exports){const fs=require("fs");module.exports=class{constructor(t){this.stream=t}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}get domain(){return this.stream.domain}async destroy(){return this.api.destroyAnnotation({space:this.space.name,domain:this.domain.name,stream:this.stream.id})}async export(){const t=await this.read();fs.writeFileSync(`${this.space.name}.${this.domain.name}.${this.stream.id}.annotation.json`,JSON.stringify(t))}async read(){return this.api.readAnnotation({space:this.space.name,domain:this.domain.name,stream:this.stream.id})}}},{fs:1}],118:[function(require,module,exports){const Mutation=require("./Mutation");module.exports=class{constructor({domain:t,stream:e,type:a}){this.domain=t,this.stream=e,this.type=a}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}async instance(t){return new(await this.domain.types().get(this.type))({...t,id:this.stream.id})}mutation(t){return new Mutation({object:this,name:t})}}},{"./Mutation":128}],119:[function(require,module,exports){const Events=require("./Events"),Label=require("./Label"),Model=require("./Model"),PObject=require("./PObject"),PObjects=require("./PObjects"),Stream=require("./Stream"),Streams=require("./Streams"),Types=require("./Types");module.exports=class{constructor(e,t){this.name=e,this.space=t}get api(){return this.account.api}get account(){return this.space.account}streams(){return new Streams(this)}stream(e){return new Stream(e,this)}label(e){return new Label(e,this)}events(e){return new Events({...e,domain:this})}types(){return new Types({domain:this})}model(){return new Model({domain:this})}objects(){return new PObjects({domain:this})}object(e){return new PObject({domain:this,type:e})}async create(){return await this.api.createDomain({space:this.space.name,domain:this.name}),this}async destroy(){await this.api.destroyDomain({space:this.space.name,domain:this.name})}async truncate(){await this.api.truncateDomain({space:this.space.name,domain:this.name})}async rename(e){return await this.api.renameDomain({space:this.space.name,domain:this.name,to:e}),this.name=e,this}async export(){return await this.streams().each(e=>this.stream(e.id).export()),this}}},{"./Events":122,"./Label":126,"./Model":127,"./PObject":129,"./PObjects":130,"./Stream":134,"./Streams":135,"./Types":139}],120:[function(require,module,exports){module.exports=class{constructor(a){this.space=a}get api(){return this.account.api}get account(){return this.space.account}async each(a){return this.api.listDomains({space:this.space.name,each:a}).catch(a=>{throw a})}}},{}],121:[function(require,module,exports){var fs=require("fs");module.exports=class{constructor(t,s){this.stream=t,this.id=s}get account(){return this.space.account}get space(){return this.domain.space}get domain(){return this.stream.domain}async destroy(){return this.account.api.destroyEvent({space:this.space.name,domain:this.domain.name,stream:this.stream.id,event:this.id})}async export(){const t=await this.read(),s=`${this.space.name}.${this.domain.name}.${this.stream.id}.${this.id}.json`;fs.existsSync(s)&&fs.truncateSync(s),fs.writeFileSync(s,`${JSON.stringify(t)}`)}async eachLabel(t){return this}async read(){return this.account.api.readEvent({space:this.space.name,domain:this.domain.name,stream:this.stream.id,event:this.id})}}},{fs:1}],122:[function(require,module,exports){const AsyncQueue=require("async-queue"),Errors=require("../Errors"),Dedup=require("../utils/dedup"),AMQP=require("./AMQP"),Replicator=(require("./Event"),require("./Replicator"));async function replay(t,e){let i=e.stream?t.readStream.bind(t):t.readDomain.bind(t),a=e.after;for(;;){let t=await i({...e,after:a});if(!t)break;a=t,e.from=void 0}return a}const queue=new AsyncQueue;async function notify(t,e,i,a){return new Promise(async(r,s)=>{queue.run(async(s,n)=>{t.seen(e.meta.id)||await i(e,a),r(),n.success()})})}module.exports=class{constructor({domain:t,stream:e,from:i,after:a,to:r,until:s,types:n}){this._domain=t,this.stream=e,this.from=i,this.after=a,this.to=r,this.until=s,this.types=n,this.shouldRead=!0}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}get domain(){return this._domain||this.stream.domain}via(t){if(t.amqp){if(this.from)throw new Errors.UnsupportedFilter({filter:"from",on:"AMQP adapter"});if(this.after)throw new Errors.UnsupportedFilter({filter:"after",on:"AMQP adapter"});if(this.to)throw new Errors.UnsupportedFilter({filter:"to",on:"AMQP adapter"});if(this.until)throw new Errors.UnsupportedFilter({filter:"until",on:"AMQP adapter"});const e={filter:{space:this.space.name,domain:this.domain.name,stream:this.stream,from:this.from,after:this.from,to:this.to,until:this.until,types:this.types},adapter:{amqp:t.amqp}};return new AMQP(this.account,e)}if(t.replicator){if(this.to)throw new Errors.UnsupportedFilter({filter:"to",on:"Replicator adapter"});if(this.until)throw new Errors.UnsupportedFilter({filter:"until",on:"Replicator adapter"});const e={filter:{space:this.space.name,domain:this.domain.name,stream:this.stream,from:this.from,after:this.from,to:this.to,until:this.until,types:this.types},adapter:{replicator:{space:this.space.name,domain:this.domain.name,...t.replicator}}};return new Replicator(this.account,e).create()}if(t.cursor){const e={filter:{space:this.space.name,domain:this.domain.name,stream:this.stream,from:this.from,after:this.from,to:this.to,until:this.until,types:this.types},adapter:{cursor:t.cursor}};return new Cursor(this.account,e)}}async write(t){if(Array.isArray(t)){for(const e of t)await this.api.writeStream({space:this.space.name,domain:this.domain.name,stream:this.stream.id,id:e.id,data:e.data,meta:e.meta});return t.length}return await this.api.writeStream({space:this.space.name,domain:this.domain.name,stream:this.stream.id,id:t.id,data:t.data,meta:t.meta}),1}async each(t){let e=new Dedup,i={space:this.space.name,domain:this.domain.name,stream:this.stream?this.stream.id:void 0,from:this.from,after:this.after,to:this.to,until:this.until||"caught-up",types:this.types,limit:this.limit||50,each:async i=>await notify(e,i,t)},a="past-events";if("past-events"!==this.after&&(a=await replay(this.api,i)),this.to||this.until)return;const r=this.stream?`${this.space.name}.${this.domain.name}.${this.stream.id}`:`${this.space.name}.${this.domain.name}`,s=await this.api.messages.subscribe({channel:r,listener:(i,a)=>notify(e,i,t,a),types:this.types});return"past-events"!==a&&await replay(this.api,{...i,after:a,until:"caught-up"}),s.resume(),s}}},{"../Errors":92,"../utils/dedup":144,"./AMQP":115,"./Event":121,"./Replicator":131,"async-queue":178}],123:[function(require,module,exports){module.exports=class{constructor(t,a,c){this.account=t,this.name=a,this.params=c}get api(){return this.account.api}then(t){return this.thencallback=t,this}catch(t){return this.catchcallback=t,this}async invoke(){return this.api.invokeFunction({name:this.name,params:this.params}).then(this.thencallback).catch(this.catchcallback)}}},{}],124:[function(require,module,exports){const fs=require("fs").promises;module.exports=class{constructor(s){this.account=s}get api(){return this.account.api}async register(s,t){const i=await fs.readFile(t,"utf8");await this.api.registerFunction({name:s,src:i})}async invoke(s,t){await this.api.invokeFunction({name:s,params:t})}}},{fs:1}],125:[function(require,module,exports){const uuidv4=require("uuid/v4"),{Machine:Machine,assign:assign,interpret:interpret}=require("xstate"),EventEmitter=require("events").EventEmitter;module.exports=class{constructor({type:t,id:e,repository:i,registry:s}){this.type=t,this.id=e||uuidv4(),this.repository=i||t.repository,this.stream=this.repository.stream(this.id),this.registry=s||t.registry,this.emitter=new EventEmitter,this.write=(t=>{this.stream.events().write(t)}),this.xstate=Machine({id:`${t.name} ${e}`,context:t.context,states:function(t){for(let e of Object.keys(t))for(let i of Object.keys(t[e]))if("invoke"===i)if(Array.isArray(t[e][i])){let s=[];for(const r of t[e][i])s.push({src:r});t[e][i]=s}else t[e][i]={src:t[e][i]};return t}(t.workflow.states),initial:t.workflow.initial,strict:!1},{actions:t.actions,services:function(t,e,i){for(let s of Object.keys(t)){const r=t[s];t[s]=((t,s)=>n=>{r(e,t,s,t=>i(t)).invoke()})}return t}(t.invocations||{},this.registry,this.write)}),this.mutations=t.mutations,this.service=interpret(this.xstate),this.service.start()}data(){return{state:this.service.state.value,...this.service.state.context}}get state(){return this.service.state.value}on(t,e){this.emitter.on(t,e)}emit(t,e){this.emitter.emit(t,e)}}},{events:10,"uuid/v4":209,xstate:219}],126:[function(require,module,exports){module.exports=class{constructor(e){this.name=e}async eachEvent(e){return this}}},{}],127:[function(require,module,exports){module.exports=class{constructor({domain:a}){this.domain=a}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}async define(a){await this.api.modelDomain({space:this.space.name,domain:this.domain.name,spec:a})}async read({accept:a}){return this.api.readModel({space:this.space.name,domain:this.domain.name,accept:a})}}},{}],128:[function(require,module,exports){module.exports=class{constructor({object:t,name:e}){this.object=t,this.name=e}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}get domain(){return this.object.domain}async invoke(t){return this.api.mutateObject({space:this.space.name,domain:this.domain.name,stream:this.object.stream.id,type:this.object.type,mutation:this.name,params:t})}}},{}],129:[function(require,module,exports){module.exports=class{constructor({domain:t,stream:e,type:s}){this.domain=t,this.stream=e,this.type=s}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}async latest(){let t=this.stream?this.stream.id:void 0;return this.api.readObject({space:this.space.name,domain:this.domain.name,stream:t,type:this.type})}}},{}],130:[function(require,module,exports){module.exports=class{constructor({domain:t}){this.domain=t}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}async all(){return this.api.listObjects({space:this.space.name,domain:this.domain.name})}}},{}],131:[function(require,module,exports){module.exports=class{constructor(t,a){this.account=t,this.subscription=a,this.space=a.adapter.replicator.space,this.domain=a.adapter.replicator.domain,this.stream=a.adapter.replicator.stream}async create(){return await this.account.subscription(this.subscription).create(),this}}},{}],132:[function(require,module,exports){const Domain=require("./Domain"),Domains=require("./Domains");require("./Stream");module.exports=class{constructor(a,e){this.name=a,this.account=e}get api(){return this.account.api}domains(){return new Domains(this)}namespaces(){return new Domains(this)}domain(a){return new Domain(a,this)}namespace(a){return new Domain(a,this)}ns(a){return new Domain(a,this)}async create(){return await this.api.createSpace({space:this.name}),this}async clone(a){await this.api.cloneSpace({space:this.name,to:a})}async destroy(){await this.api.destroySpace({space:this.name})}async rename(a){return await this.api.renameSpace({space:this.name,to:a}),this.name=a,this}async export(){return await this.domains().each(a=>this.domain(a).export()),this}async allow({role:a,email:e}){return await this.api.allowAccount({space:this.name,role:a,email:e}),this}async disallow({role:a,email:e}){return await this.api.disallowAccount({space:this.name,role:a,email:e}),this}}},{"./Domain":119,"./Domains":120,"./Stream":134}],133:[function(require,module,exports){module.exports=class{constructor(c){this.account=c}get api(){return this.account.api}async each(c){return this.api.listSpaces({each:c}).catch(c=>{throw c})}}},{}],134:[function(require,module,exports){const Annotation=require("./Annotation"),DObject=require("./DObject"),Event=require("./Event"),Events=require("./Events"),PObject=require("./PObject"),fs=require("fs"),uuidv4=require("uuid/v4");module.exports=class{constructor(t,e){this.id=t||uuidv4(),this.domain=e}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}events(t){return new Events({...t,stream:this})}event(t){return new Event(this,t)}async annotate(t){return this.api.annotateStream({space:this.space.name,domain:this.domain.name,stream:this.id,annotation:t})}annotation(){return new Annotation(this)}as(t){return new DObject({domain:this.domain,stream:this,type:t})}object(t){return new PObject({domain:this.domain,stream:this,type:t})}async destroy(){return this.api.destroyStream({space:this.space.name,domain:this.domain.name,stream:this.id})}async export(){const t=`${this.space.name}.${this.domain.name}.${this.id}.json`;fs.existsSync(t)&&fs.truncateSync(t),await this.events({until:"caught-up"}).each(e=>{fs.appendFileSync(t,`${JSON.stringify(e)}\n`)})}}},{"./Annotation":117,"./DObject":118,"./Event":121,"./Events":122,"./PObject":129,fs:1,"uuid/v4":209}],135:[function(require,module,exports){require("./Stream"),require("./Label");module.exports=class{constructor(a){this.domain=a}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}async each(a){return this.api.listStreams({space:this.space.name,domain:this.domain.name,each:a}).catch(a=>{throw a})}}},{"./Label":126,"./Stream":134}],136:[function(require,module,exports){module.exports=class{constructor(t,i,r,s){this.account=t,this.id=i,this.filter=r,this.adapter=s}get api(){return this.account.api}async create(){return this.api.createSubscription({adapter:this.adapter,filter:this.filter})}async destroy(){return this.api.destroySubscription({id:this.id})}}},{}],137:[function(require,module,exports){module.exports=class{constructor(s,i){this.account=s,this.options=i}get api(){return this.account.api}async cancel(){this.api.messages.unsubscribe()}async all(){return this.api.listSubscriptions(this.options)}}},{}],138:[function(require,module,exports){const Instance=require("./Instance"),Errors=require("../Errors");module.exports={define:function({name:e,context:t,workflow:o,actions:r,mutations:n,invocations:i,repository:s,registry:a}){let c=function({name:e,context:t,workflow:o,actions:r,mutations:n,invocations:i,repository:s,registry:a}){this.name=e,this.context=t,this.workflow=o,this.actions=r,this.mutations=n,this.invocations=i,this.repository=s,this.registry=a}.bind(null,{name:e,context:t,workflow:o,actions:r,mutations:n,invocations:i,repository:s,registry:a});return new Proxy(c,{construct(e,t){const o=new e(...t),{id:r,repository:n,registry:i}=t[0]||{},s=new Instance({type:o,id:r,repository:n,registry:i});return s.stream.events().each(e=>{s.service.send({type:e.meta.type,data:e.data,meta:e.meta}),s.promise&&s.resolve&&(s.resolve(),s.promise=void 0,s.resolve=void 0,s.reject=void 0),s.emit("mutated",e)}),new Proxy(s,{get:function(e,t){if(t in e)return e[t];if(t in e.service.state.context)return e.service.state.context[t];if(t in e.type.mutations){const o=e.type.mutations[t];return new Proxy(o,{apply:async function(r,n,i){if(e.emit("mutating",{mutation:t,params:i[0]}),"persistr"===e.stream.api.type){if(e.promise)throw new Errors.StatusCode("",409,"Conflict",`{"error":"Command '${t}' cannot be executed on out-of-date object"}`);e.promise=new Promise((t,o)=>{e.resolve=t,e.reject=o}),await e.stream.as(e.type.name).mutation(t).invoke(i[0]),await e.promise}if("local"===e.stream.api.type){const r=o(e.service.state.context,i[0]);if(!e.service.state.nextEvents.includes(r.meta.type))throw new Errors.StatusCode("",422,"Unprocessable Entity",`{"error":"Command '${t}' cannot be executed in state '${e.service.state.value}'"}`);if(e.promise)throw new Errors.StatusCode("",409,"Conflict",`{"error":"Command '${t}' cannot be executed on out-of-date object"}`);e.promise=new Promise((t,o)=>{e.resolve=t,e.reject=o}),await e.stream.events().write(r),await e.promise}}})}}})}})}}},{"../Errors":92,"./Instance":125}],139:[function(require,module,exports){const Type=require("./Type"),fs=require("fs").promises,nodeEval=require("node-eval");module.exports=class{constructor({domain:e}){this.domain=e}get api(){return this.account.api}get account(){return this.space.account}get space(){return this.domain.space}async define(e,a){const s=await fs.readFile(a,"utf8");await this.api.setType({space:this.space.name,domain:this.domain.name,name:e,spec:s})}async get(e){const a=await this.api.getType({space:this.space.name,domain:this.domain.name,name:e}),s=nodeEval(a,`./${e}.js`);return Type.define({...s,repository:this.domain,registry:this.account})}}},{"./Type":138,fs:1,"node-eval":198}],140:[function(require,module,exports){const PubNub=require("pubnub"),matcher=require("matcher");class Subscription{constructor(e,s,t,n){this.mq=e,this.channel=s,this.listener=t,this.types=n,this.types&&(this.types=Array.isArray(n)?n:[n]),this.events=[],this.paused=!0}cancel(){this.mq.unsubscribe({channel:this.channel,listener:this.listener})}pause(){this.paused=!0}resume(){let e=this.events.shift();for(;e;)this.listener(e,this),e=this.events.shift();this.paused=!1}delay(e){this.events.push(e)}}module.exports=class{constructor(e){this.pubnub=new PubNub({subscribeKey:e.subscribeKey,restore:!0}),this.channels=new Map,this.pending=new Map}status(e){if("PNSubscribeOperation"===e.operation&&e&&e.affectedChannels&&e.affectedChannels.length)for(let s of e.affectedChannels){let e=this.pending.get(s);e&&(e.resolve(),this.pending.delete(s))}}handler(e){const s=e.message,t=e.channel;let n=this.channels.get(t);if(n)for(let e of n){if(e.subscription.types){let t=!1;for(let n of e.subscription.types)if(matcher.isMatch(s.meta.type,n)){t=!0;break}if(!t)continue}e.subscription.paused?e.subscription.delay(s):e.listener(s,e.subscription)}}async subscribe({channel:e,listener:s,types:t}){this.listener||(this.listener={status:this.status.bind(this),message:this.handler.bind(this)},this.pubnub.addListener(this.listener));let n=!1,i=this.channels.get(e);i||(i=[],n=!0);let h=new Subscription(this,e,s,t);if(i.find(e=>e.listener===s)||i.push({listener:s,subscription:h}),this.channels.set(e,i),n){let s=new Promise((s,t)=>{this.pending.set(e,{resolve:s,reject:t}),this.pubnub.subscribe({channels:[e]})});await s}return h}unsubscribe(e){let{channel:s,listener:t}=e||{};if(!s)return this.pubnub.unsubscribe({channels:Array.from(this.channels.keys())}),void this.channels.clear();if(s&&!t)return this.pubnub.unsubscribe({channels:[s]}),void this.channels.delete(s);let n=this.channels.get(s)||[];if(0===(n=n.filter(e=>e.listener===t)).length)return this.pubnub.unsubscribe({channels:[s]}),void this.channels.delete(s);this.channels.set(s,n)}}},{matcher:196,pubnub:230}],141:[function(require,module,exports){module.exports={create:function(e){return"PubNub"==e.type?new(require("./PubNub"))(e):"local"==e.type?new(require("./local"))(e):void 0}}},{"./PubNub":140,"./local":142}],142:[function(require,module,exports){const PubSub=require("pubsub-js"),matcher=require("matcher");class Subscription{constructor(s,e,t,i){this.mq=s,this.channel=e,this.listener=t,this.types=i,this.types&&(this.types=Array.isArray(i)?i:[i]),this.events=[],this.paused=!0}cancel(){this.mq.unsubscribe({channel:this.channel,listener:this.listener})}pause(){this.paused=!0}resume(){let s=this.events.shift();for(;s;)this.listener(s,this),s=this.events.shift();this.paused=!1}delay(s){this.events.push(s)}}module.exports=class{constructor(s){this.channels=new Map,this.pending=new Map}publish({channel:s,event:e}){PubSub.publish(s,e)}handler(s,e){let t=this.channels.get(s);if(t)for(let s of t){if(s.subscription.types){let t=!1;for(let i of s.subscription.types)if(matcher.isMatch(e.meta.type,i)){t=!0;break}if(!t)continue}s.subscription.paused?s.subscription.delay(e):s.listener(e,s.subscription)}}async subscribe({channel:s,listener:e,types:t}){this.listener||PubSub.subscribe(s,this.handler.bind(this));let i=this.channels.get(s)||[],n=new Subscription(this,s,e,t);return i.find(s=>s.listener===e)||i.push({listener:e,subscription:n}),this.channels.set(s,i),n}unsubscribe(s){let{channel:e,listener:t}=s||{};if(!e)return PubSub.clearAllSubscriptions(),void this.channels.clear();if(e&&!t)return PubSub.unsubscribe(e),void this.channels.delete(e);let i=this.channels.get(e)||[];if(0===(i=i.filter(s=>s.listener===t)).length)return PubSub.unsubscribe(e),void this.channels.delete(e);this.channels.set(e,i)}}},{matcher:196,"pubsub-js":201}],143:[function(require,module,exports){(function(global){const API=require("./API"),Account=require("./fluent/Account"),Identity=(require("./Errors"),require("./utils/identity")),Local=require("./Local"),MQ=require("./mq");class Persistr{async account(e){const s=new API(e);try{const e=await s.mqSettings();e||console.log("ERROR: Real-time delivery transport not available",error),s.messages=MQ.create(e)}catch(e){401!==e.statusCode&&console.log(e.message)}return new Account(s)}async local(e){const s=new Local(e);try{const e=await s.mqSettings();e||console.log("ERROR: Real-time delivery transport not available",error),s.messages=MQ.create(e),s.store.messages=s.messages}catch(e){401!==e.statusCode&&console.log(e.message)}return new Account(s)}}module.exports={Persistr:Persistr,persistr:new Persistr,Identity:Identity},"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)&&(global.persistr=module.exports.persistr)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./API":63,"./Errors":92,"./Local":104,"./fluent/Account":116,"./mq":141,"./utils/identity":147}],144:[function(require,module,exports){var LRU=require("lru-cache");module.exports=class{constructor(){this.cache=new LRU({max:1e5,length:function(e,c){return 16},maxAge:3e5})}seen(e){if(this.cache.peek(e))return!0;this.cache.set(e,!0)}}},{"lru-cache":194}],145:[function(require,module,exports){module.exports=function(t,e){let r={};return Object.keys(t).filter(t=>!t.startsWith(e)).forEach(e=>{r[e]=t[e]}),r}},{}],146:[function(require,module,exports){const Errors=require("../Errors"),btoa=require("btoa"),crossFetch=require("cross-fetch"),fetch=require("tenacious-fetch");module.exports=class{constructor(t,e){this.server=t,this.identity=e,this.headers={}}async fetch({method:t,endpoint:e,query:i,body:r,headers:s}){const n=`${this.server}${e}${function(t){let e="";if(t&&Object.keys(t).length>0){const i=encodeURIComponent;e="?"+Object.entries(t).filter(t=>t[0]&&t[1]).map(t=>i(t[0])+"="+i(t[1])).join("&")}return e}(i)}`;let o=void 0;this.identity&&this.identity.authorization&&(o=await this.identity.authorization()),o?s={authorization:o,...s}:this.identity&&this.identity.credentials&&(this.identity.credentials.apikey?s={Authorization:`Apikey ${this.identity.credentials.apikey}`,...s}:this.identity.credentials.email&&this.identity.credentials.password&&(s={Authorization:`Basic ${function(t){return btoa(unescape(encodeURIComponent(t)))}(`${this.identity.credentials.email}:${this.identity.credentials.password}`)}`,...s}));let a={method:t,headers:{...this.headers,"content-type":"application/json",...s},credentials:"same-origin",mode:"cors"};r&&(a.headers["content-type"]&&a.headers["content-type"].includes("json")?a.body=JSON.stringify(r):a.body=r);let h=void 0;try{h=await fetch(n,{...a,onRetry:({retriesLeft:t,retryDelay:e,response:i})=>console.log(i.code,`retrying after ${e}ms`),fetcher:crossFetch,retries:3,retryDelay:10,factor:7,retryStatus:[503]})}catch(t){if("ECONNREFUSED"===t.code)throw new Errors.ConnectionRefused;throw new Errors.Fetch(t.message)}if(!h.ok)throw new Errors.StatusCode(n,h.status,h.statusText,await h.text());h.headers.has("Authorization")&&this.identity.authorized&&this.identity.authorized(h.headers.get("Authorization"));let c=await h.text();return c&&(h.headers.has("content-type")?h.headers.get("content-type").includes("json")&&(c=JSON.parse(c)):c=JSON.parse(c)),{body:c||""}}async get(t){return await this.fetch({...t,method:"GET"})}async post(t){return await this.fetch({...t,method:"POST"})}async put(t){return await this.fetch({...t,method:"PUT"})}async patch(t){return await this.fetch({...t,method:"PATCH"})}async delete(t){return await this.fetch({...t,method:"DELETE"})}}},{"../Errors":92,btoa:189,"cross-fetch":192,"tenacious-fetch":205}],147:[function(require,module,exports){module.exports=class{constructor({credentials:e}){e&&(this.email=e.email,this.password=e.password)}get email(){return localStorage.getItem("email")}set email(e){localStorage.setItem("email",e)}async authenticate(e,{email:t,password:a}){localStorage.setItem("email",t),this.password=a,await e.details()}forget(){localStorage.removeItem("authorization"),localStorage.removeItem("email")}get credentials(){if(this.email||this.password)return{email:this.email,password:this.password}}async authorization(){const e=localStorage.getItem("authorization");return e||(this.credentials&&this.credentials.apikey?`Apikey ${this.credentials.apikey}`:this.credentials&&this.credentials.email&&this.credentials.password?`Basic ${function(e){return btoa(unescape(encodeURIComponent(e)))}(`${this.credentials.email}:${this.credentials.password}`)}`:void 0)}async authorized(e){localStorage.setItem("authorization",e)}async revoked(e){localStorage.removeItem("authorization")}}},{}],148:[function(require,module,exports){(function(setImmediate){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _events=require("events"),_amqplib=_interopRequireDefault(require("amqplib")),_url=_interopRequireDefault(require("url")),_ChannelWrapper=_interopRequireDefault(require("./ChannelWrapper")),_helpers=require("./helpers"),_promiseBreaker=_interopRequireDefault(require("promise-breaker"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const HEARTBEAT_IN_SECONDS=5;function neverThrows(){return e=>setImmediate(()=>{throw new Error(`AmqpConnectionManager - should never get here: ${e.message}\n`+e.stack)})}exports.default=class extends _events.EventEmitter{constructor(e,n={}){if(super(),!e&&!n.findServers)throw new Error("Must supply either `urls` or `findServers`");this._channels=[],this._currentUrl=0,this.connectionOptions=n.connectionOptions,this.heartbeatIntervalInSeconds=n.heartbeatIntervalInSeconds||HEARTBEAT_IN_SECONDS,this.reconnectTimeInSeconds=n.reconnectTimeInSeconds||this.heartbeatIntervalInSeconds,this.setMaxListeners(0),this._findServers=n.findServers||(()=>Promise.resolve(e)),this._connect()}createChannel(e={}){const n=new _ChannelWrapper.default(this,e);return this._channels.push(n),n.once("close",()=>{this._channels=this._channels.filter(e=>e!==n)}),n}close(){return this._closed?Promise.resolve():(this._closed=!0,Promise.all(this._channels.map(e=>e.close())).catch(function(){}).then(()=>{this._channels=[],this._currentConnection&&(this._currentConnection.removeAllListeners("close"),this._currentConnection.close()),this._currentConnection=null}))}isConnected(){return!!this._currentConnection}_connect(){return this._closed||this._connecting||this.isConnected()?Promise.resolve():(this._connecting=!0,Promise.resolve().then(()=>!this._urls||this._currentUrl>=this._urls.length?(this._currentUrl=0,_promiseBreaker.default.callFn(this._findServers,0,null)):this._urls).then(e=>{if(e&&!Array.isArray(e)&&(e=[e]),this._urls=e,!e||0===e.length)throw new Error("amqp-connection-manager: No servers found");const n=e[this._currentUrl];this._currentUrl++;const t=n.url||n,r=n.connectionOptions||this.connectionOptions;let s=null;return"object"==typeof t?(s=Object.assign({},n)).heartbeat||(s.heartbeat=this.heartbeatIntervalInSeconds):((s=_url.default.parse(t)).search?s.search+=`&heartbeat=${this.heartbeatIntervalInSeconds}`:s.search=`?heartbeat=${this.heartbeatIntervalInSeconds}`,s=_url.default.format(s)),_amqplib.default.connect(s,r).then(e=>(this._currentConnection=e,e.on("blocked",e=>this.emit("blocked",{reason:e})),e.on("unblocked",()=>this.emit("unblocked")),e.on("error",()=>{}),e.on("close",e=>{this._currentConnection=null,this.emit("disconnect",{err:e}),(0,_helpers.wait)(1e3*this.reconnectTimeInSeconds).then(()=>this._connect()).catch(neverThrows)}),this._connecting=!1,this.emit("connect",{connection:e,url:t}),null))}).catch(e=>(this.emit("disconnect",{err:e}),this._currentConnection=null,(0,_helpers.wait)(1e3*this.reconnectTimeInSeconds).then(()=>(this._connecting=!1,this._connect())))))}}}).call(this,require("timers").setImmediate)},{"./ChannelWrapper":149,"./helpers":150,amqplib:152,events:10,"promise-breaker":200,timers:38,url:39}],149:[function(require,module,exports){(function(Buffer,setImmediate){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,_events=require("events"),_promiseBreaker=(e=require("promise-breaker"))&&e.__esModule?e:{default:e};exports.default=class extends _events.EventEmitter{addSetup(e,n=null){return _promiseBreaker.default.addCallback(n,(this._settingUp||Promise.resolve()).then(()=>(this._setups.push(e),this._channel?_promiseBreaker.default.call(e,this,this._channel):void 0)))}removeSetup(e,n=null,s=null){return _promiseBreaker.default.addCallback(s,()=>(this._setups=this._setups.filter(n=>n!==e),(this._settingUp||Promise.resolve()).then(()=>this._channel?_promiseBreaker.default.call(n,this,this._channel):void 0)))}waitForConnect(e=null){return _promiseBreaker.default.addCallback(e,this._channel&&!this._settingUp?Promise.resolve():new Promise(e=>this.once("connect",e)))}publish(e,n,s,t,i=null){return _promiseBreaker.default.addCallback(i,new Promise((i,h)=>{this._messages.push({type:"publish",exchange:e,routingKey:n,content:s,options:t,resolve:i,reject:h}),this._startWorker()}))}sendToQueue(e,n,s,t=null){return _promiseBreaker.default.addCallback(t,new Promise((t,i)=>(this._messages.push({type:"sendToQueue",queue:e,content:n,options:s,resolve:t,reject:i}),this._startWorker())))}constructor(e,n={}){super(),this._onConnect=this._onConnect.bind(this),this._onDisconnect=this._onDisconnect.bind(this),this._connectionManager=e,this.name=n.name,this.context={},this._json="json"in n&&n.json,this._messages=[],this._unconfirmedMessages=[],this._working=!1,this._settingUp=null,this._channel=null,this._workerNumber=0,this._setups=[],n.setup&&this._setups.push(n.setup),e.isConnected()&&this._onConnect({connection:this._connectionManager._currentConnection}),e.on("connect",this._onConnect),e.on("disconnect",this._onDisconnect)}_onConnect({connection:e}){return this._connection=e,e.createConfirmChannel().then(e=>(this._channel=e,e.on("close",()=>this._onChannelClose(e)),this._settingUp=Promise.all(this._setups.map(n=>_promiseBreaker.default.call(n,this,e).catch(e=>{this._channel&&this.emit("error",e,{name:this.name})}))).then(()=>(this._settingUp=null,this._channel)),this._settingUp)).then(()=>{if(this._channel){if(this._unconfirmedMessages.length>0)for(;this._unconfirmedMessages.length;)this._messages.push(this._unconfirmedMessages.shift());this._startWorker(),this.emit("connect")}}).catch(e=>{this.emit("error",e,{name:this.name}),this._settingUp=null,this._channel=null})}_onChannelClose(e){this._channel===e&&(this._channel=null)}_onDisconnect(){this._channel=null,this._settingUp=null,this._working=!1}queueLength(){return this._messages.length}close(){return Promise.resolve().then(()=>{this._working=!1,0!==this._messages.length&&this._messages.forEach(e=>e.reject(new Error("Channel closed"))),0!==this._unconfirmedMessages.length&&this._unconfirmedMessages.forEach(e=>e.reject(new Error("Channel closed"))),this._connectionManager.removeListener("connect",this._onConnect),this._connectionManager.removeListener("disconnect",this._onDisconnect);const e=this._channel&&this._channel.close()||void 0;return this._channel=null,this.emit("close"),e})}_shouldPublish(){return this._messages.length>0&&!this._settingUp&&this._channel}_startWorker(){!this._working&&this._shouldPublish()&&(this._working=!0,this._workerNumber++,this._publishQueuedMessages(this._workerNumber))}_publishQueuedMessages(e){if(!this._shouldPublish()||!this._working||e!==this._workerNumber)return this._working=!1,Promise.resolve();const n=this._channel,s=this._messages.shift();return this._unconfirmedMessages.push(s),Promise.resolve().then(()=>{const t=this._json?new Buffer.from(JSON.stringify(s.content)):s.content,i=(()=>{switch(s.type){case"publish":return new Promise(function(e,i){const h=n.publish(s.exchange,s.routingKey,t,s.options,n=>{n?i(n):setImmediate(()=>e(h))})});case"sendToQueue":return new Promise(function(e,i){const h=n.sendToQueue(s.queue,t,s.options,n=>{n?i(n):setImmediate(()=>e(h))})});default:throw new Error(`Unhandled message type ${s.type}`)}})();return this._publishQueuedMessages(e),i}).then(e=>{this._unconfirmedMessages.shift(),s.resolve(e)},e=>{this._channel?(this._unconfirmedMessages.shift(),s.reject(e)):this._messages.unshift(this._unconfirmedMessages.shift())}).catch(e=>{this.emit("error",e),this._working=!1}),null}ack(){return this._channel&&this._channel.ack.apply(this._channel,arguments)}ackAll(){return this._channel&&this._channel.ackAll.apply(this._channel,arguments)}nack(){return this._channel&&this._channel.nack.apply(this._channel,arguments)}nackAll(){return this._channel&&this._channel.nackAll.apply(this._channel,arguments)}purgeQueue(){return this._channel&&this._channel.purgeQueue.apply(this._channel,arguments)}checkQueue(){return this._channel&&this._channel.checkQueue.apply(this._channel,arguments)}assertQueue(){return this._channel&&this._channel.assertQueue.apply(this._channel,arguments)}}}).call(this,require("buffer").Buffer,require("timers").setImmediate)},{buffer:8,events:10,"promise-breaker":200,timers:38}],150:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wait=function(e){return new Promise(function(t){return setTimeout(t,e)})}},{}],151:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connect=connect,exports.default=void 0;var e,_AmqpConnectionManager=(e=require("./AmqpConnectionManager"))&&e.__esModule?e:{default:e};function connect(e,n){return new _AmqpConnectionManager.default(e,n)}var _default={connect:connect};exports.default=_default},{"./AmqpConnectionManager":148}],152:[function(require,module,exports){var raw_connect=require("./lib/connect").connect,ChannelModel=require("./lib/channel_model").ChannelModel,Promise=require("bluebird");module.exports.connect=function(e,r){return Promise.fromCallback(function(n){return raw_connect(e,r,n)}).then(function(e){return new ChannelModel(e)})},module.exports.credentials=require("./lib/credentials"),module.exports.IllegalOperationError=require("./lib/error").IllegalOperationError},{"./lib/channel_model":156,"./lib/connect":158,"./lib/credentials":160,"./lib/error":162,bluebird:167}],153:[function(require,module,exports){"use strict";function setIfDefined(e,t,n){null!=n&&(e[t]=n)}var EMPTY_OPTIONS=Object.freeze({}),Args={assertQueue:function(e,t){e=e||"",t=t||EMPTY_OPTIONS;var n=Object.create(t.arguments||null);return setIfDefined(n,"x-expires",t.expires),setIfDefined(n,"x-message-ttl",t.messageTtl),setIfDefined(n,"x-dead-letter-exchange",t.deadLetterExchange),setIfDefined(n,"x-dead-letter-routing-key",t.deadLetterRoutingKey),setIfDefined(n,"x-max-length",t.maxLength),setIfDefined(n,"x-max-priority",t.maxPriority),setIfDefined(n,"x-overflow",t.overflow),setIfDefined(n,"x-queue-mode",t.queueMode),{queue:e,exclusive:!!t.exclusive,durable:void 0===t.durable||t.durable,autoDelete:!!t.autoDelete,arguments:n,passive:!1,ticket:0,nowait:!1}},checkQueue:function(e){return{queue:e,passive:!0,nowait:!1,durable:!0,autoDelete:!1,exclusive:!1,ticket:0}},deleteQueue:function(e,t){return{queue:e,ifUnused:!!(t=t||EMPTY_OPTIONS).ifUnused,ifEmpty:!!t.ifEmpty,ticket:0,nowait:!1}},purgeQueue:function(e){return{queue:e,ticket:0,nowait:!1}},bindQueue:function(e,t,n,r){return{queue:e,exchange:t,routingKey:n,arguments:r,ticket:0,nowait:!1}},unbindQueue:function(e,t,n,r){return{queue:e,exchange:t,routingKey:n,arguments:r,ticket:0,nowait:!1}},assertExchange:function(e,t,n){n=n||EMPTY_OPTIONS;var r=Object.create(n.arguments||null);return setIfDefined(r,"alternate-exchange",n.alternateExchange),{exchange:e,ticket:0,type:t,passive:!1,durable:void 0===n.durable||n.durable,autoDelete:!!n.autoDelete,internal:!!n.internal,nowait:!1,arguments:r}},checkExchange:function(e){return{exchange:e,passive:!0,nowait:!1,durable:!0,internal:!1,type:"",autoDelete:!1,ticket:0}},deleteExchange:function(e,t){return{exchange:e,ifUnused:!!(t=t||EMPTY_OPTIONS).ifUnused,ticket:0,nowait:!1}},bindExchange:function(e,t,n,r){return{source:t,destination:e,routingKey:n,arguments:r,ticket:0,nowait:!1}},unbindExchange:function(e,t,n,r){return{source:t,destination:e,routingKey:n,arguments:r,ticket:0,nowait:!1}},publish:function(e,t,n){function r(e){return void 0===e?void 0:Array.isArray(e)?e.map(String):[String(e)]}n=n||EMPTY_OPTIONS;var i,u=Object.create(n.headers||null);setIfDefined(u,"CC",r(n.CC)),setIfDefined(u,"BCC",r(n.BCC)),void 0!==n.persistent?i=n.persistent?2:1:"number"==typeof n.deliveryMode?i=n.deliveryMode:n.deliveryMode&&(i=2);var a=n.expiration;return void 0!==a&&(a=a.toString()),{exchange:e,routingKey:t,mandatory:!!n.mandatory,immediate:!1,ticket:void 0,contentType:n.contentType,contentEncoding:n.contentEncoding,headers:u,deliveryMode:i,priority:n.priority,correlationId:n.correlationId,replyTo:n.replyTo,expiration:a,messageId:n.messageId,timestamp:n.timestamp,type:n.type,userId:n.userId,appId:n.appId,clusterId:void 0}},consume:function(e,t){t=t||EMPTY_OPTIONS;var n=Object.create(t.arguments||null);return setIfDefined(n,"x-priority",t.priority),{ticket:0,queue:e,consumerTag:t.consumerTag||"",noLocal:!!t.noLocal,noAck:!!t.noAck,exclusive:!!t.exclusive,nowait:!1,arguments:n}},cancel:function(e){return{consumerTag:e,nowait:!1}},get:function(e,t){return{ticket:0,queue:e,noAck:!!(t=t||EMPTY_OPTIONS).noAck}},ack:function(e,t){return{deliveryTag:e,multiple:!!t}},nack:function(e,t,n){return{deliveryTag:e,multiple:!!t,requeue:void 0===n||n}},reject:function(e,t){return{deliveryTag:e,requeue:void 0===t||t}},prefetch:function(e,t){return{prefetchCount:e||0,prefetchSize:0,global:!!t}},recover:function(){return{requeue:!0}}};module.exports=Object.freeze(Args)},{}],154:[function(require,module,exports){"use strict";function BitSet(r){if(r){var t=Math.ceil(r/32);this.words=new Array(t)}else this.words=[];this.wordsInUse=0}var P=BitSet.prototype;function wordIndex(r){return Math.floor(r/32)}function trailingZeros(r){if(0===r)return 32;var t,s=31;return 0!=(t=r<<16)&&(s-=16,r=t),0!=(t=r<<8)&&(s-=8,r=t),0!=(t=r<<4)&&(s-=4,r=t),0!=(t=r<<2)&&(s-=2,r=t),s-(r<<1>>>31)}P.ensureSize=function(r){var t=this.words.length;t<r&&(this.words=this.words.concat(new Array(r-t)))},P.set=function(r){var t=wordIndex(r);t>=this.wordsInUse&&(this.ensureSize(t+1),this.wordsInUse=t+1);var s=1<<r;this.words[t]|=s},P.clear=function(r){var t=wordIndex(r);if(!(t>=this.wordsInUse)){var s=~(1<<r);this.words[t]&=s}},P.get=function(r){var t=wordIndex(r);if(t>=this.wordsInUse)return!1;var s=1<<r;return!!(this.words[t]&s)},P.nextSetBit=function(r){var t=wordIndex(r);if(t>=this.wordsInUse)return-1;for(var s=this.words[t]&4294967295<<r;;){if(s)return 32*t+trailingZeros(s);if(++t===this.wordsInUse)return-1;s=this.words[t]}},P.nextClearBit=function(r){var t=wordIndex(r);if(t>=this.wordsInUse)return r;for(var s=~this.words[t]&4294967295<<r;;){if(s)return 32*t+trailingZeros(s);if(++t==this.wordsInUse)return 32*t;s=~this.words[t]}},module.exports.BitSet=BitSet},{}],155:[function(require,module,exports){"use strict";var defs=require("./defs"),closeMsg=require("./format").closeMessage,inspect=require("./format").inspect,methodName=require("./format").methodName,assert=require("assert"),inherits=require("util").inherits,EventEmitter=require("events").EventEmitter,fmt=require("util").format,IllegalOperationError=require("./error").IllegalOperationError,stackCapture=require("./error").stackCapture,Buffer=require("safe-buffer").Buffer;function Channel(e){EventEmitter.call(this),this.connection=e,this.reply=null,this.pending=[],this.lwm=1,this.unconfirmed=[],this.on("ack",this.handleConfirm.bind(this,function(e){e&&e(null)})),this.on("nack",this.handleConfirm.bind(this,function(e){e&&e(new Error("message nacked"))})),this.on("close",function(){for(var e;e=this.unconfirmed.shift();)e&&e(new Error("channel closed"))}),this.handleMessage=acceptDeliveryOrReturn}inherits(Channel,EventEmitter),module.exports.Channel=Channel,module.exports.acceptMessage=acceptMessage;var C=Channel.prototype;function invalidOp(e,n){return function(){throw new IllegalOperationError(e,n)}}function invalidateSend(e,n,t){e.sendImmediately=e.sendOrEnqueue=e.sendMessage=invalidOp(n,t)}function acceptDeliveryOrReturn(e){var n;if(e.id===defs.BasicDeliver)n="delivery";else{if(e.id!==defs.BasicReturn)throw fmt("Expected BasicDeliver or BasicReturn; got %s",inspect(e));n="return"}var t=this,s=e.fields;return acceptMessage(function(e){e.fields=s,t.emit(n,e)})}function acceptMessage(e){var n=0,t=0,s=null,i={fields:null,properties:null,content:null};return function(s){if(s.id===defs.BasicProperties)return i.properties=s.fields,0===(n=t=s.size)?(i.content=Buffer.alloc(0),e(i),acceptDeliveryOrReturn):r;throw"Expected headers frame after delivery"};function r(o){if(o.content){var l=o.content.length;if(0==(t-=l))return null!==s?(s.push(o.content),i.content=Buffer.concat(s)):i.content=o.content,e(i),acceptDeliveryOrReturn;if(t<0)throw fmt("Too much content sent! Expected %d bytes",n);return null!==s?s.push(o.content):s=[o.content],r}throw"Expected content frame after headers"}}function BaseChannel(e){Channel.call(this,e),this.consumers={}}C.allocate=function(){return this.ch=this.connection.freshChannel(this),this},C.sendImmediately=function(e,n){return this.connection.sendMethod(this.ch,e,n)},C.sendOrEnqueue=function(e,n,t){this.reply?this.pending.push({method:e,fields:n,reply:t}):(assert(0===this.pending.length),this.reply=t,this.sendImmediately(e,n))},C.sendMessage=function(e,n,t){return this.connection.sendMessage(this.ch,defs.BasicPublish,e,defs.BasicProperties,n,t)},C._rpc=function(e,n,t,s){var i=this;this.sendOrEnqueue(e,n,function(n,r){if(null===n){if(r.id===t)return s(null,r);var o=methodName(t),l=new Error(fmt("Expected %s; got %s",o,inspect(r,!1)));return i.closeWithError(r.id,fmt("Expected %s; got %s",o,methodName(r.id)),defs.constants.UNEXPECTED_FRAME,l),s(l)}if(n instanceof Error)return s(n);var a=(n.fields.classId<<16)+n.fields.methodId,c=(l=e===a?fmt("Operation failed: %s; %s",methodName(e),closeMsg(n)):fmt("Channel closed by server: %s",closeMsg(n)),new Error(l));return c.code=n.fields.replyCode,c.classId=n.fields.classId,c.methodId=n.fields.methodId,s(c)})},C.toClosed=function(e){this._rejectPending(),invalidateSend(this,"Channel closed",e),this.accept=invalidOp("Channel closed",e),this.connection.releaseChannel(this.ch),this.emit("close")},C.toClosing=function(e,n){var t=this.sendImmediately.bind(this);invalidateSend(this,"Channel closing",e),this.accept=function(e){if(e.id===defs.ChannelCloseOk){n&&n();var s=stackCapture("ChannelCloseOk frame received");this.toClosed(s)}else e.id===defs.ChannelClose&&t(defs.ChannelCloseOk,{})}},C._rejectPending=function(){function e(e){e(new Error("Channel ended, no reply will be forthcoming"))}var n;for(null!==this.reply&&e(this.reply),this.reply=null;n=this.pending.shift();)e(n.reply);this.pending=null},C.closeBecause=function(e,n,t){this.sendImmediately(defs.ChannelClose,{replyText:e,replyCode:n,methodId:0,classId:0});var s=stackCapture("closeBecause called: "+e);this.toClosing(s,t)},C.closeWithError=function(e,n,t,s){var i=this;this.closeBecause(n,t,function(){s.code=t,e&&(s.classId=defs.info(e).classId,s.methodId=defs.info(e).methodId),i.emit("error",s)})},C.acceptMessageFrame=function(e){try{this.handleMessage=this.handleMessage(e)}catch(n){"string"==typeof n?this.closeWithError(e.id,n,defs.constants.UNEXPECTED_FRAME,new Error(n)):n instanceof Error?this.closeWithError(e.id,"Error while processing message",defs.constants.INTERNAL_ERROR,n):this.closeWithError(e.id,"Internal error while processing message",defs.constants.INTERNAL_ERROR,new Error(n.toString()))}},C.handleConfirm=function(e,n){var t=n.deliveryTag;if(n.multiple){var s=this.unconfirmed.splice(0,t-this.lwm+1);this.lwm=t+1,s.forEach(e)}else{var i;if(t===this.lwm)for(i=this.unconfirmed.shift(),this.lwm++;null===this.unconfirmed[0];)this.unconfirmed.shift(),this.lwm++;else i=this.unconfirmed[t-this.lwm],this.unconfirmed[t-this.lwm]=null;e(i)}},C.pushConfirmCallback=function(e){this.unconfirmed.push(e||!1)},C.accept=function(e){switch(e.id){case void 0:case defs.BasicDeliver:case defs.BasicReturn:case defs.BasicProperties:return this.acceptMessageFrame(e);case defs.BasicAck:return this.emit("ack",e.fields);case defs.BasicNack:return this.emit("nack",e.fields);case defs.BasicCancel:return this.emit("cancel",e.fields);case defs.ChannelClose:if(this.reply){var n=this.reply;this.reply=null,n(e)}var t="Channel closed by server: "+closeMsg(e);this.sendImmediately(defs.ChannelCloseOk,{});var s=new Error(t);s.code=e.fields.replyCode,s.classId=e.fields.classId,s.methodId=e.fields.methodId,this.emit("error",s);var i=stackCapture(t);return void this.toClosed(i);case defs.BasicFlow:return this.closeWithError(e.id,"Flow not implemented",defs.constants.NOT_IMPLEMENTED,new Error("Flow not implemented"));default:if(n=this.reply,this.reply=null,this.pending.length>0){var r=this.pending.shift();this.reply=r.reply,this.sendImmediately(r.method,r.fields)}return n(null,e)}},C.onBufferDrain=function(){this.emit("drain")},inherits(BaseChannel,Channel),module.exports.BaseChannel=BaseChannel,BaseChannel.prototype.registerConsumer=function(e,n){this.consumers[e]=n},BaseChannel.prototype.unregisterConsumer=function(e){delete this.consumers[e]},BaseChannel.prototype.dispatchMessage=function(e,n){var t=e.consumerTag,s=this.consumers[t];if(s)return s(n);throw new Error("Unknown consumer: "+t)},BaseChannel.prototype.handleDelivery=function(e){return this.dispatchMessage(e.fields,e)},BaseChannel.prototype.handleCancel=function(e){return this.dispatchMessage(e,null)}},{"./defs":161,"./error":162,"./format":163,assert:2,events:10,"safe-buffer":204,util:43}],156:[function(require,module,exports){"use strict";var defs=require("./defs"),Promise=require("bluebird"),inherits=require("util").inherits,EventEmitter=require("events").EventEmitter,BaseChannel=require("./channel").BaseChannel,acceptMessage=require("./channel").acceptMessage,Args=require("./api_args");function ChannelModel(e){if(!(this instanceof ChannelModel))return new ChannelModel(e);EventEmitter.call(this),this.connection=e;var n=this;["error","close","blocked","unblocked"].forEach(function(r){e.on(r,n.emit.bind(n,r))})}inherits(ChannelModel,EventEmitter),module.exports.ChannelModel=ChannelModel;var CM=ChannelModel.prototype;function Channel(e){BaseChannel.call(this,e),this.on("delivery",this.handleDelivery.bind(this)),this.on("cancel",this.handleCancel.bind(this))}CM.close=function(){return Promise.fromCallback(this.connection.close.bind(this.connection))},inherits(Channel,BaseChannel),module.exports.Channel=Channel,CM.createChannel=function(){var e=new Channel(this.connection);return e.open().then(function(n){return e})};var C=Channel.prototype;function ConfirmChannel(e){Channel.call(this,e)}C.rpc=function(e,n,r){var t=this;return Promise.fromCallback(function(i){return t._rpc(e,n,r,i)}).then(function(e){return e.fields})},C.open=function(){return Promise.try(this.allocate.bind(this)).then(function(e){return e.rpc(defs.ChannelOpen,{outOfBand:""},defs.ChannelOpenOk)})},C.close=function(){var e=this;return Promise.fromCallback(function(n){return e.closeBecause("Goodbye",defs.constants.REPLY_SUCCESS,n)})},C.assertQueue=function(e,n){return this.rpc(defs.QueueDeclare,Args.assertQueue(e,n),defs.QueueDeclareOk)},C.checkQueue=function(e){return this.rpc(defs.QueueDeclare,Args.checkQueue(e),defs.QueueDeclareOk)},C.deleteQueue=function(e,n){return this.rpc(defs.QueueDelete,Args.deleteQueue(e,n),defs.QueueDeleteOk)},C.purgeQueue=function(e){return this.rpc(defs.QueuePurge,Args.purgeQueue(e),defs.QueuePurgeOk)},C.bindQueue=function(e,n,r,t){return this.rpc(defs.QueueBind,Args.bindQueue(e,n,r,t),defs.QueueBindOk)},C.unbindQueue=function(e,n,r,t){return this.rpc(defs.QueueUnbind,Args.unbindQueue(e,n,r,t),defs.QueueUnbindOk)},C.assertExchange=function(e,n,r){return this.rpc(defs.ExchangeDeclare,Args.assertExchange(e,n,r),defs.ExchangeDeclareOk).then(function(n){return{exchange:e}})},C.checkExchange=function(e){return this.rpc(defs.ExchangeDeclare,Args.checkExchange(e),defs.ExchangeDeclareOk)},C.deleteExchange=function(e,n){return this.rpc(defs.ExchangeDelete,Args.deleteExchange(e,n),defs.ExchangeDeleteOk)},C.bindExchange=function(e,n,r,t){return this.rpc(defs.ExchangeBind,Args.bindExchange(e,n,r,t),defs.ExchangeBindOk)},C.unbindExchange=function(e,n,r,t){return this.rpc(defs.ExchangeUnbind,Args.unbindExchange(e,n,r,t),defs.ExchangeUnbindOk)},C.publish=function(e,n,r,t){var i=Args.publish(e,n,t);return this.sendMessage(i,i,r)},C.sendToQueue=function(e,n,r){return this.publish("",e,n,r)},C.consume=function(e,n,r){var t=this,i=Args.consume(e,r);return Promise.fromCallback(function(e){t._rpc(defs.BasicConsume,i,defs.BasicConsumeOk,e)}).then(function(e){return t.registerConsumer(e.fields.consumerTag,n),e.fields})},C.cancel=function(e){var n=this;return Promise.fromCallback(function(r){n._rpc(defs.BasicCancel,Args.cancel(e),defs.BasicCancelOk,r)}).then(function(r){return n.unregisterConsumer(e),r.fields})},C.get=function(e,n){var r=this,t=Args.get(e,n);return Promise.fromCallback(function(e){return r.sendOrEnqueue(defs.BasicGet,t,e)}).then(function(e){if(e.id===defs.BasicGetEmpty)return!1;if(e.id===defs.BasicGetOk){var n=e.fields;return new Promise(function(e){r.handleMessage=acceptMessage(function(r){r.fields=n,e(r)})})}throw new Error("Unexpected response to BasicGet: "+inspect(e))})},C.ack=function(e,n){this.sendImmediately(defs.BasicAck,Args.ack(e.fields.deliveryTag,n))},C.ackAll=function(){this.sendImmediately(defs.BasicAck,Args.ack(0,!0))},C.nack=function(e,n,r){this.sendImmediately(defs.BasicNack,Args.nack(e.fields.deliveryTag,n,r))},C.nackAll=function(e){this.sendImmediately(defs.BasicNack,Args.nack(0,!0,e))},C.reject=function(e,n){this.sendImmediately(defs.BasicReject,Args.reject(e.fields.deliveryTag,n))},C.prefetch=C.qos=function(e,n){return this.rpc(defs.BasicQos,Args.prefetch(e,n),defs.BasicQosOk)},C.recover=function(){return this.rpc(defs.BasicRecover,Args.recover(),defs.BasicRecoverOk)},inherits(ConfirmChannel,Channel),module.exports.ConfirmChannel=ConfirmChannel,CM.createConfirmChannel=function(){var e=new ConfirmChannel(this.connection);return e.open().then(function(n){return e.rpc(defs.ConfirmSelect,{nowait:!1},defs.ConfirmSelectOk)}).then(function(){return e})};var CC=ConfirmChannel.prototype;CC.publish=function(e,n,r,t,i){return this.pushConfirmCallback(i),C.publish.call(this,e,n,r,t)},CC.sendToQueue=function(e,n,r,t){return this.publish("",e,n,r,t)},CC.waitForConfirms=function(){var e=[],n=this.unconfirmed;return n.forEach(function(r,t){if(null===r);else{var i=new Promise(function(e,i){n[t]=function(n){r&&r(n),null===n?e():i(n)}});e.push(i)}}),Promise.all(e)}},{"./api_args":153,"./channel":155,"./defs":161,bluebird:167,events:10,util:43}],157:[function(require,module,exports){(function(Buffer){"use strict";var ints=require("buffer-more-ints");function encodeTable(e,t,r){var a=r;for(var n in r+=4,t)if(void 0!==t[n]){var i=Buffer.byteLength(n);e.writeUInt8(i,r),r++,e.write(n,r,"utf8"),r+=i,r+=encodeFieldValue(e,t[n],r)}var s=r-a;return e.writeUInt32BE(s-4,a),s}function encodeFieldValue(e,t,r){var a=r,n=typeof t,i=t;function s(t){e.write(t,r),r++}switch(t&&"object"===n&&t.hasOwnProperty("!")&&(i=t.value,n=t["!"]),"number"==n&&(n=function(e){return e>=0x8000000000000000||Math.abs(e)<0x4000000000000&&Math.floor(e)!==e}(i)?"double":i<128&&i>=-128?"byte":i>=-32768&&i<32768?"short":i>=-2147483648&&i<2147483648?"int":"long"),n){case"string":var o=Buffer.byteLength(i,"utf8");s("S"),e.writeUInt32BE(o,r),r+=4,e.write(i,r,"utf8"),r+=o;break;case"object":null===i?s("V"):Array.isArray(i)?(s("A"),r+=function(e,t,r){var a=r;r+=4;for(var n=0,i=t.length;n<i;n++)r+=encodeFieldValue(e,t[n],r);var s=r-a;return e.writeUInt32BE(s-4,a),s}(e,i,r)):Buffer.isBuffer(i)?(s("x"),e.writeUInt32BE(i.length,r),r+=4,i.copy(e,r),r+=i.length):(s("F"),r+=encodeTable(e,i,r));break;case"boolean":s("t"),e.writeUInt8(i?1:0,r),r++;break;case"double":case"float64":s("d"),e.writeDoubleBE(i,r),r+=8;break;case"byte":case"int8":s("b"),e.writeInt8(i,r),r++;break;case"short":case"int16":s("s"),e.writeInt16BE(i,r),r+=2;break;case"int":case"int32":s("I"),e.writeInt32BE(i,r),r+=4;break;case"long":case"int64":s("l"),ints.writeInt64BE(e,i,r),r+=8;break;case"timestamp":s("T"),ints.writeUInt64BE(e,i,r),r+=8;break;case"float":s("f"),e.writeFloatBE(i,r),r+=4;break;case"decimal":if(s("D"),!(i.hasOwnProperty("places")&&i.hasOwnProperty("digits")&&i.places>=0&&i.places<256))throw new TypeError("Decimal value must be {'places': 0..255, 'digits': uint32}, got "+JSON.stringify(i));e[r]=i.places,r++,e.writeUInt32BE(i.digits,r),r+=4;break;default:throw new TypeError("Unknown type to encode: "+n)}return r-a}module.exports.encodeTable=encodeTable,module.exports.decodeFields=function decodeFields(e){var t,r,a,n={},i=0,s=e.length;function o(){var r=String.fromCharCode(e[i]);switch(i++,r){case"b":a=e.readInt8(i),i++;break;case"S":t=e.readUInt32BE(i),i+=4,a=e.toString("utf8",i,i+t),i+=t;break;case"I":a=e.readInt32BE(i),i+=4;break;case"D":var n=e[i];i++;var s=e.readUInt32BE(i);i+=4,a={"!":"decimal",value:{places:n,digits:s}};break;case"T":a=ints.readUInt64BE(e,i),i+=8,a={"!":"timestamp",value:a};break;case"F":t=e.readUInt32BE(i),i+=4,a=decodeFields(e.slice(i,i+t)),i+=t;break;case"A":t=e.readUInt32BE(i),function(e){for(var t=[];i<e;)o(),t.push(a);a=t}((i+=4)+t);break;case"d":a=e.readDoubleBE(i),i+=8;break;case"f":a=e.readFloatBE(i),i+=4;break;case"l":a=ints.readInt64BE(e,i),i+=8;break;case"s":a=e.readInt16BE(i),i+=2;break;case"t":a=0!=e[i],i++;break;case"V":a=null;break;case"x":t=e.readUInt32BE(i),i+=4,a=e.slice(i,i+t),i+=t;break;default:throw new TypeError('Unexpected type tag "'+r+'"')}}for(;i<s;)t=e.readUInt8(i),i++,r=e.toString("utf8",i,i+t),i+=t,o(),n[r]=a;return n}}).call(this,require("buffer").Buffer)},{buffer:8,"buffer-more-ints":190}],158:[function(require,module,exports){(function(process){"use strict";var URL=require("url-parse"),QS=require("querystring"),Connection=require("./connection").Connection,fmt=require("util").format,credentials=require("./credentials");function copyInto(e,n){for(var r=Object.keys(e),t=r.length;t--;){var o=r[t];n[o]=e[o]}return n}var CLIENT_PROPERTIES={product:"amqplib",version:require("../package.json").version,platform:fmt("Node.JS %s",process.version),information:"http://squaremo.github.io/amqp.node",capabilities:{publisher_confirms:!0,exchange_exchange_bindings:!0,"basic.nack":!0,consumer_cancel_notify:!0,"connection.blocked":!0,authentication_failure_close:!0}};function openFrames(e,n,r,t){function o(e,n){return void 0===e?n:parseInt(e)}return e=e?QS.unescape(e):"/",n=n||{},{clientProperties:copyInto(t,Object.create(CLIENT_PROPERTIES)),mechanism:r.mechanism,response:r.response(),locale:n.locale||"en_US",channelMax:o(n.channelMax,0),frameMax:o(n.frameMax,4096),heartbeat:o(n.heartbeat,0),virtualHost:e,capabilities:"",insist:0}}function credentialsFromUrl(e){var n="guest",r="guest";return""==e.username&&""==e.password||(n=e.username?unescape(e.username):"",r=e.password?unescape(e.password):""),credentials.plain(n,r)}module.exports.connect=function(e,n,r){var t=function(e){return copyInto(e,{})}(n||{});e=e||"amqp://localhost";var o,a,s=!!t.noDelay,c=t.timeout,i=!!t.keepAlive,l=t.keepAliveDelay||0,u=t.clientProperties||{};if("object"==typeof e){var p,m;o=(e.protocol||"amqp")+":",t.host=e.hostname,t.port=e.port||("amqp:"===o?5672:5671),null==e.username&&null==e.password?(p="guest",m="guest"):(p=e.username||"",m=e.password||"");var f={locale:e.locale,channelMax:e.channelMax,frameMax:e.frameMax,heartbeat:e.heartbeat};a=openFrames(e.vhost,f,t.credentials||credentials.plain(p,m),u)}else{var h=URL(e,!0);o=h.protocol,t.host=h.hostname,t.port=parseInt(h.port)||("amqp:"===o?5672:5671);var d=h.pathname?h.pathname.substr(1):null;a=openFrames(d,h.query,t.credentials||credentialsFromUrl(h),u)}var v,q=!1;function b(){q=!0,v.setNoDelay(s),i&&v.setKeepAlive(i,l);var e=new Connection(v);e.open(a,function(n,t){c&&v.setTimeout(0),null===n?r(null,e):r(n)})}if("amqp:"===o)v=require("net").connect(t,b);else{if("amqps:"!==o)throw new Error("Expected amqp: or amqps: as the protocol; got "+o);v=require("tls").connect(t,b)}c&&v.setTimeout(c,function(){v.end(),v.destroy(),r(new Error("connect ETIMEDOUT"))}),v.once("error",function(e){q||r(e)})},module.exports.credentialsFromUrl=credentialsFromUrl}).call(this,require("_process"))},{"../package.json":177,"./connection":159,"./credentials":160,_process:17,net:1,querystring:21,tls:1,"url-parse":206,util:43}],159:[function(require,module,exports){"use strict";var defs=require("./defs"),constants=defs.constants,frame=require("./frame"),HEARTBEAT=frame.HEARTBEAT,Mux=require("./mux").Mux,Buffer=require("safe-buffer").Buffer,Duplex=require("stream").Duplex||require("readable-stream/duplex"),EventEmitter=require("events").EventEmitter,Heart=require("./heartbeat").Heart,methodName=require("./format").methodName,closeMsg=require("./format").closeMessage,inspect=require("./format").inspect,BitSet=require("./bitset").BitSet,inherits=require("util").inherits,fmt=require("util").format,PassThrough=require("stream").PassThrough||require("readable-stream/passthrough"),IllegalOperationError=require("./error").IllegalOperationError,stackCapture=require("./error").stackCapture;function Connection(e){EventEmitter.call(this);var t=this.stream=function(e){if(e instanceof Duplex)return e;var t=new Duplex;return t.wrap(e),t._write=function(t,n,r){return e.write(t,n,r)},t}(e);this.muxer=new Mux(t),this.rest=Buffer.alloc(0),this.frameMax=constants.FRAME_MIN_SIZE,this.sentSinceLastCheck=!1,this.recvSinceLastCheck=!1,this.expectSocketClose=!1,this.freeChannels=new BitSet,this.channels=[{channel:{accept:function(e){return function(t){if(t===HEARTBEAT);else if(t.id===defs.ConnectionClose){e.sendMethod(0,defs.ConnectionCloseOk,{});var n=fmt("Connection closed: %s",closeMsg(t)),r=stackCapture(n),s=new Error(n);s.code=t.fields.replyCode,isFatalError(s)&&e.emit("error",s),e.toClosed(r,s)}else t.id===defs.ConnectionBlocked?e.emit("blocked",t.fields.reason):t.id===defs.ConnectionUnblocked?e.emit("unblocked"):e.closeWithError(fmt("Unexpected frame on channel 0"),constants.UNEXPECTED_FRAME,new Error(fmt("Unexpected frame on channel 0: %s",inspect(t,!1))))}}(this)},buffer:e}]}inherits(Connection,EventEmitter);var C=Connection.prototype;function mainAccept(e){var t=this.channels[e.channel];if(t)return t.channel.accept(e);this.closeWithError(fmt("Frame on unknown channel %d",e.channel),constants.CHANNEL_ERROR,new Error(fmt("Frame on unknown channel: %s",inspect(e,!1))))}function invalidOp(e,t){return function(){throw new IllegalOperationError(e,t)}}function invalidateSend(e,t,n){e.sendMethod=e.sendContent=e.sendMessage=invalidOp(t,n)}C.sendProtocolHeader=function(){this.sendBytes(frame.PROTOCOL_HEADER)},C.open=function(e,t){var n=this,r=t||function(){},s=Object.create(e);function o(e){n.step(function(t,n){null!==t?i(t):0!==n.channel?i(new Error(fmt("Frame on channel != 0 during handshake: %s",inspect(n,!1)))):e(n)})}function a(e,t){o(function(n){n.id===e?t(n):i(new Error(fmt("Expected %s; got %s",methodName(e),inspect(n,!1))))})}function i(e){r(e)}function c(e){try{n.sendMethod(0,e,s)}catch(e){i(e)}}function h(e,t){return 0===e||0===t?Math.max(e,t):Math.min(e,t)}function f(t){switch(t.id){case defs.ConnectionSecure:i(new Error("Wasn't expecting to have to go through secure"));break;case defs.ConnectionClose:i(new Error(fmt("Handshake terminated by server: %s",closeMsg(t))));break;case defs.ConnectionTune:var n=t.fields;s.frameMax=h(n.frameMax,e.frameMax),s.channelMax=h(n.channelMax,e.channelMax),s.heartbeat=h(n.heartbeat,e.heartbeat),c(defs.ConnectionTuneOk),c(defs.ConnectionOpen),a(defs.ConnectionOpenOk,l);break;default:i(new Error(fmt("Expected connection.secure, connection.close, or connection.tune during handshake; got %s",inspect(t,!1))))}}function l(e){var t;n.channelMax=s.channelMax||65535,n.frameMax=s.frameMax||4294967295,n.heartbeat=s.heartbeat,n.heartbeater=n.startHeartbeater(),n.accept=mainAccept,t=e,n.stream.removeListener("end",u),n.stream.removeListener("error",u),n.stream.on("error",n.onSocketError.bind(n)),n.stream.on("end",n.onSocketError.bind(n,new Error("Unexpected close"))),n.on("frameError",n.onSocketError.bind(n)),n.acceptLoop(),r(null,t)}function u(e){i(e||new Error("Socket closed abruptly during opening handshake"))}this.stream.on("end",u),this.stream.on("error",u),this.sendProtocolHeader(),a(defs.ConnectionStart,function(t){t.fields.mechanisms.toString().split(" ").indexOf(e.mechanism)<0?i(new Error(fmt("SASL mechanism %s is not provided by the server",e.mechanism))):(n.serverProperties=t.fields.serverProperties,c(defs.ConnectionStartOk),o(f))})},C.close=function(e){var t=e&&function(){e(null)};this.closeBecause("Cheers, thanks",constants.REPLY_SUCCESS,t)},C.closeBecause=function(e,t,n){this.sendMethod(0,defs.ConnectionClose,{replyText:e,replyCode:t,methodId:0,classId:0});var r=stackCapture("closeBecause called: "+e);this.toClosing(r,n)},C.closeWithError=function(e,t,n){this.emit("error",n),this.closeBecause(e,t)},C.onSocketError=function(e){if(!this.expectSocketClose){this.expectSocketClose=!0,this.emit("error",e);var t=stackCapture("Socket error");this.toClosed(t,e)}},C.toClosing=function(e,t){var n=this.sendMethod.bind(this);this.accept=function(e){if(e.id===defs.ConnectionCloseOk){t&&t();var r=stackCapture("ConnectionCloseOk received");this.toClosed(r,void 0)}else e.id===defs.ConnectionClose&&n(0,defs.ConnectionCloseOk,{})},invalidateSend(this,"Connection closing",e)},C._closeChannels=function(e){for(var t=1;t<this.channels.length;t++){var n=this.channels[t];null!==n&&n.channel.toClosed(e)}},C.toClosed=function(e,t){this._closeChannels(e);var n=fmt("Connection closed (%s)",t?t.toString():"by client");invalidateSend(this,n,e),this.accept=invalidOp(n,e),this.close=function(t){t&&t(new IllegalOperationError(n,e))},this.heartbeater&&this.heartbeater.clear(),this.expectSocketClose=!0,this.stream.end(),this.emit("close",t)},C.startHeartbeater=function(){if(0===this.heartbeat)return null;var e=this,t=new Heart(this.heartbeat,this.checkSend.bind(this),this.checkRecv.bind(this));return t.on("timeout",function(){var t=new Error("Heartbeat timeout");e.emit("error",t);var n=stackCapture("Heartbeat timeout");e.toClosed(n,t)}),t.on("beat",function(){e.sendHeartbeat()}),t},C.freshChannel=function(e,t){var n=this.freeChannels.nextClearBit(1);if(n<0||n>this.channelMax)throw new Error("No channels left to allocate");this.freeChannels.set(n);var r=t&&t.highWaterMark||1024,s=new PassThrough({objectMode:!0,highWaterMark:r});return this.channels[n]={channel:e,buffer:s},s.on("drain",function(){e.onBufferDrain()}),this.muxer.pipeFrom(s),n},C.releaseChannel=function(e){this.freeChannels.clear(e),this.channels[e].buffer.end(),this.channels[e]=null},C.acceptLoop=function(){var e=this;function t(){try{for(var t;t=e.recvFrame();)e.accept(t)}catch(t){e.emit("frameError",t)}}e.stream.on("readable",t),t()},C.step=function(e){var t=this;!function n(){var r;try{r=t.recvFrame()}catch(t){return void e(t,null)}r?e(null,r):t.stream.once("readable",n)}()},C.checkSend=function(){var e=this.sentSinceLastCheck;return this.sentSinceLastCheck=!1,e},C.checkRecv=function(){var e=this.recvSinceLastCheck;return this.recvSinceLastCheck=!1,e},C.sendBytes=function(e){this.sentSinceLastCheck=!0,this.stream.write(e)},C.sendHeartbeat=function(){return this.sendBytes(frame.HEARTBEAT_BUF)};var encodeMethod=defs.encodeMethod,encodeProperties=defs.encodeProperties;C.sendMethod=function(e,t,n){var r=encodeMethod(t,e,n);return this.sentSinceLastCheck=!0,this.channels[e].buffer.write(r)},C.sendMessage=function(e,t,n,r,s,o){if(!Buffer.isBuffer(o))throw new TypeError("content is not a buffer");var a=encodeMethod(t,e,n),i=encodeProperties(r,e,o.length,s),c=this.channels[e].buffer;this.sentSinceLastCheck=!0;var h=a.length+i.length,f=o.length>0?o.length+FRAME_OVERHEAD:0,l=h+f;if(l<2048){var u=Buffer.alloc(l),d=a.copy(u,0);return d+=i.copy(u,d),f>0&&makeBodyFrame(e,o).copy(u,d),c.write(u)}if(h<2048){var m=Buffer.alloc(h);d=a.copy(m,0),i.copy(m,d),c.write(m)}else c.write(a),c.write(i);return this.sendContent(e,o)};var FRAME_OVERHEAD=defs.FRAME_OVERHEAD,makeBodyFrame=frame.makeBodyFrame;C.sendContent=function(e,t){if(!Buffer.isBuffer(t))throw new TypeError(fmt("Expected buffer; got %s",t));for(var n=!0,r=this.channels[e].buffer,s=this.frameMax-FRAME_OVERHEAD,o=0;o<t.length;o+=s){var a=o+s,i=a>t.length?t.slice(o):t.slice(o,a),c=makeBodyFrame(e,i);n=r.write(c)}return this.sentSinceLastCheck=!0,n};var parseFrame=frame.parseFrame,decodeFrame=frame.decodeFrame;function isFatalError(e){switch(e&&e.code){case defs.constants.CONNECTION_FORCED:case defs.constants.REPLY_SUCCESS:return!1;default:return!0}}C.recvFrame=function(){var e=parseFrame(this.rest,this.frameMax);if(e)return this.rest=e.rest,decodeFrame(e);var t=this.stream.read();return null!==t&&(this.recvSinceLastCheck=!0,this.rest=Buffer.concat([this.rest,t]),this.recvFrame())},module.exports.Connection=Connection,module.exports.isFatalError=isFatalError},{"./bitset":154,"./defs":161,"./error":162,"./format":163,"./frame":164,"./heartbeat":165,"./mux":166,events:10,"readable-stream/duplex":169,"readable-stream/passthrough":175,"safe-buffer":204,stream:36,util:43}],160:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer,codec=require("./codec");module.exports.plain=function(e,r){return{mechanism:"PLAIN",response:function(){return Buffer.from(["",e,r].join(String.fromCharCode(0)))},username:e,password:r}},module.exports.amqplain=function(e,r){return{mechanism:"AMQPLAIN",response:function(){const n=Buffer.alloc(16384),o=codec.encodeTable(n,{LOGIN:e,PASSWORD:r},0);return n.slice(4,o)},username:e,password:r}},module.exports.external=function(){return{mechanism:"EXTERNAL",response:function(){return Buffer.from("")}}}},{"./codec":157,"safe-buffer":204}],161:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer,codec=require("./codec"),ints=require("buffer-more-ints"),encodeTable=codec.encodeTable,decodeFields=codec.decodeFields,SCRATCH=Buffer.alloc(16384);Object.freeze({});module.exports.constants={FRAME_METHOD:1,FRAME_HEADER:2,FRAME_BODY:3,FRAME_HEARTBEAT:8,FRAME_MIN_SIZE:4096,FRAME_END:206,REPLY_SUCCESS:200,CONTENT_TOO_LARGE:311,NO_ROUTE:312,NO_CONSUMERS:313,ACCESS_REFUSED:403,NOT_FOUND:404,RESOURCE_LOCKED:405,PRECONDITION_FAILED:406,CONNECTION_FORCED:320,INVALID_PATH:402,FRAME_ERROR:501,SYNTAX_ERROR:502,COMMAND_INVALID:503,CHANNEL_ERROR:504,UNEXPECTED_FRAME:505,RESOURCE_ERROR:506,NOT_ALLOWED:530,NOT_IMPLEMENTED:540,INTERNAL_ERROR:541},module.exports.constant_strs={1:"FRAME-METHOD",2:"FRAME-HEADER",3:"FRAME-BODY",8:"FRAME-HEARTBEAT",200:"REPLY-SUCCESS",206:"FRAME-END",311:"CONTENT-TOO-LARGE",312:"NO-ROUTE",313:"NO-CONSUMERS",320:"CONNECTION-FORCED",402:"INVALID-PATH",403:"ACCESS-REFUSED",404:"NOT-FOUND",405:"RESOURCE-LOCKED",406:"PRECONDITION-FAILED",501:"FRAME-ERROR",502:"SYNTAX-ERROR",503:"COMMAND-INVALID",504:"CHANNEL-ERROR",505:"UNEXPECTED-FRAME",506:"RESOURCE-ERROR",530:"NOT-ALLOWED",540:"NOT-IMPLEMENTED",541:"INTERNAL-ERROR",4096:"FRAME-MIN-SIZE"},module.exports.FRAME_OVERHEAD=8,module.exports.decode=function(e,t){switch(e){case 655370:return function(e){var t,r,n=0,o={versionMajor:void 0,versionMinor:void 0,serverProperties:void 0,mechanisms:void 0,locales:void 0};return t=e[n],n++,o.versionMajor=t,t=e[n],n++,o.versionMinor=t,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.serverProperties=t,r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,o.mechanisms=t,r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,o.locales=t,o}(t);case 655371:return function(e){var t,r,n=0,o={clientProperties:void 0,mechanism:void 0,response:void 0,locale:void 0};return r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.clientProperties=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.mechanism=t,r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,o.response=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.locale=t,o}(t);case 655380:return function(e){var t,r,n=0,o={challenge:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,o.challenge=t,o}(t);case 655381:return function(e){var t,r,n=0,o={response:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,o.response=t,o}(t);case 655390:case 655391:return function(e){var t,r=0,n={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return t=e.readUInt16BE(r),r+=2,n.channelMax=t,t=e.readUInt32BE(r),r+=4,n.frameMax=t,t=e.readUInt16BE(r),r+=2,n.heartbeat=t,n}(t);case 655400:return function(e){var t,r,n=0,o={virtualHost:void 0,capabilities:void 0,insist:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.virtualHost=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.capabilities=t,t=!!(1&e[n]),o.insist=t,o}(t);case 655401:return function(e){var t,r,n=0,o={knownHosts:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.knownHosts=t,o}(t);case 655410:return function(e){var t,r,n=0,o={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(n),n+=2,o.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.replyText=t,t=e.readUInt16BE(n),n+=2,o.classId=t,t=e.readUInt16BE(n),n+=2,o.methodId=t,o}(t);case 655411:return{};case 655420:return function(e){var t,r,n=0,o={reason:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.reason=t,o}(t);case 655421:return{};case 1310730:return function(e){var t,r,n=0,o={outOfBand:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.outOfBand=t,o}(t);case 1310731:return function(e){var t,r,n=0,o={channelId:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,o.channelId=t,o}(t);case 1310740:case 1310741:return function(e){var t,r={active:void 0};return t=!!(1&e[0]),r.active=t,r}(t);case 1310760:return function(e){var t,r,n=0,o={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(n),n+=2,o.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.replyText=t,t=e.readUInt16BE(n),n+=2,o.classId=t,t=e.readUInt16BE(n),n+=2,o.methodId=t,o}(t);case 1310761:return{};case 1966090:return function(e){var t,r,n=0,o={realm:void 0,exclusive:void 0,passive:void 0,active:void 0,write:void 0,read:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.realm=t,t=!!(1&e[n]),o.exclusive=t,t=!!(2&e[n]),o.passive=t,t=!!(4&e[n]),o.active=t,t=!!(8&e[n]),o.write=t,t=!!(16&e[n]),o.read=t,o}(t);case 1966091:return function(e){var t,r=0,n={ticket:void 0};return t=e.readUInt16BE(r),r+=2,n.ticket=t,n}(t);case 2621450:return function(e){var t,r,n=0,o={ticket:void 0,exchange:void 0,type:void 0,passive:void 0,durable:void 0,autoDelete:void 0,internal:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.type=t,t=!!(1&e[n]),o.passive=t,t=!!(2&e[n]),o.durable=t,t=!!(4&e[n]),o.autoDelete=t,t=!!(8&e[n]),o.internal=t,t=!!(16&e[n]),o.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.arguments=t,o}(t);case 2621451:return{};case 2621460:return function(e){var t,r,n=0,o={ticket:void 0,exchange:void 0,ifUnused:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,t=!!(1&e[n]),o.ifUnused=t,t=!!(2&e[n]),o.nowait=t,o}(t);case 2621461:return{};case 2621470:return function(e){var t,r,n=0,o={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.destination=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.source=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,t=!!(1&e[n]),o.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.arguments=t,o}(t);case 2621471:return{};case 2621480:return function(e){var t,r,n=0,o={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.destination=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.source=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,t=!!(1&e[n]),o.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.arguments=t,o}(t);case 2621491:return{};case 3276810:return function(e){var t,r,n=0,o={ticket:void 0,queue:void 0,passive:void 0,durable:void 0,exclusive:void 0,autoDelete:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,t=!!(1&e[n]),o.passive=t,t=!!(2&e[n]),o.durable=t,t=!!(4&e[n]),o.exclusive=t,t=!!(8&e[n]),o.autoDelete=t,t=!!(16&e[n]),o.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.arguments=t,o}(t);case 3276811:return function(e){var t,r,n=0,o={queue:void 0,messageCount:void 0,consumerCount:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,t=e.readUInt32BE(n),n+=4,o.messageCount=t,t=e.readUInt32BE(n),n+=4,o.consumerCount=t,o}(t);case 3276820:return function(e){var t,r,n=0,o={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,t=!!(1&e[n]),o.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.arguments=t,o}(t);case 3276821:return{};case 3276830:return function(e){var t,r,n=0,o={ticket:void 0,queue:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,t=!!(1&e[n]),o.nowait=t,o}(t);case 3276831:return function(e){var t,r=0,n={messageCount:void 0};return t=e.readUInt32BE(r),r+=4,n.messageCount=t,n}(t);case 3276840:return function(e){var t,r,n=0,o={ticket:void 0,queue:void 0,ifUnused:void 0,ifEmpty:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,t=!!(1&e[n]),o.ifUnused=t,t=!!(2&e[n]),o.ifEmpty=t,t=!!(4&e[n]),o.nowait=t,o}(t);case 3276841:return function(e){var t,r=0,n={messageCount:void 0};return t=e.readUInt32BE(r),r+=4,n.messageCount=t,n}(t);case 3276850:return function(e){var t,r,n=0,o={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.arguments=t,o}(t);case 3276851:return{};case 3932170:return function(e){var t,r=0,n={prefetchSize:void 0,prefetchCount:void 0,global:void 0};return t=e.readUInt32BE(r),r+=4,n.prefetchSize=t,t=e.readUInt16BE(r),r+=2,n.prefetchCount=t,t=!!(1&e[r]),n.global=t,n}(t);case 3932171:return{};case 3932180:return function(e){var t,r,n=0,o={ticket:void 0,queue:void 0,consumerTag:void 0,noLocal:void 0,noAck:void 0,exclusive:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.consumerTag=t,t=!!(1&e[n]),o.noLocal=t,t=!!(2&e[n]),o.noAck=t,t=!!(4&e[n]),o.exclusive=t,t=!!(8&e[n]),o.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=decodeFields(e.slice(n,n+r)),n+=r,o.arguments=t,o}(t);case 3932181:return function(e){var t,r,n=0,o={consumerTag:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.consumerTag=t,o}(t);case 3932190:return function(e){var t,r,n=0,o={consumerTag:void 0,nowait:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.consumerTag=t,t=!!(1&e[n]),o.nowait=t,o}(t);case 3932191:return function(e){var t,r,n=0,o={consumerTag:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.consumerTag=t,o}(t);case 3932200:return function(e){var t,r,n=0,o={ticket:void 0,exchange:void 0,routingKey:void 0,mandatory:void 0,immediate:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,t=!!(1&e[n]),o.mandatory=t,t=!!(2&e[n]),o.immediate=t,o}(t);case 3932210:return function(e){var t,r,n=0,o={replyCode:void 0,replyText:void 0,exchange:void 0,routingKey:void 0};return t=e.readUInt16BE(n),n+=2,o.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.replyText=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,o}(t);case 3932220:return function(e){var t,r,n=0,o={consumerTag:void 0,deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.consumerTag=t,t=ints.readUInt64BE(e,n),n+=8,o.deliveryTag=t,t=!!(1&e[n]),o.redelivered=t,n++,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,o}(t);case 3932230:return function(e){var t,r,n=0,o={ticket:void 0,queue:void 0,noAck:void 0};return t=e.readUInt16BE(n),n+=2,o.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.queue=t,t=!!(1&e[n]),o.noAck=t,o}(t);case 3932231:return function(e){var t,r,n=0,o={deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0,messageCount:void 0};return t=ints.readUInt64BE(e,n),n+=8,o.deliveryTag=t,t=!!(1&e[n]),o.redelivered=t,n++,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.routingKey=t,t=e.readUInt32BE(n),n+=4,o.messageCount=t,o}(t);case 3932232:return function(e){var t,r,n=0,o={clusterId:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,o.clusterId=t,o}(t);case 3932240:return function(e){var t,r=0,n={deliveryTag:void 0,multiple:void 0};return t=ints.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.multiple=t,n}(t);case 3932250:return function(e){var t,r=0,n={deliveryTag:void 0,requeue:void 0};return t=ints.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.requeue=t,n}(t);case 3932260:case 3932270:return function(e){var t,r={requeue:void 0};return t=!!(1&e[0]),r.requeue=t,r}(t);case 3932271:return{};case 3932280:return function(e){var t,r=0,n={deliveryTag:void 0,multiple:void 0,requeue:void 0};return t=ints.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.multiple=t,t=!!(2&e[r]),n.requeue=t,n}(t);case 5898250:case 5898251:case 5898260:case 5898261:case 5898270:case 5898271:return{};case 5570570:return function(e){var t,r={nowait:void 0};return t=!!(1&e[0]),r.nowait=t,r}(t);case 5570571:return{};case 60:return function(e){var t,r,n,o=2;if(0===(t=e.readUInt16BE(0)))return{};var i={contentType:void 0,contentEncoding:void 0,headers:void 0,deliveryMode:void 0,priority:void 0,correlationId:void 0,replyTo:void 0,expiration:void 0,messageId:void 0,timestamp:void 0,type:void 0,userId:void 0,appId:void 0,clusterId:void 0};return 32768&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.contentType=r),16384&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.contentEncoding=r),8192&t&&(n=e.readUInt32BE(o),o+=4,r=decodeFields(e.slice(o,o+n)),o+=n,i.headers=r),4096&t&&(r=e[o],o++,i.deliveryMode=r),2048&t&&(r=e[o],o++,i.priority=r),1024&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.correlationId=r),512&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.replyTo=r),256&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.expiration=r),128&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.messageId=r),64&t&&(r=ints.readUInt64BE(e,o),o+=8,i.timestamp=r),32&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.type=r),16&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.userId=r),8&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.appId=r),4&t&&(n=e.readUInt8(o),o++,r=e.toString("utf8",o,o+n),o+=n,i.clusterId=r),i}(t);default:throw new Error("Unknown class/method ID")}},module.exports.encodeMethod=function(e,t,r){switch(e){case 655370:return function(e,t){var r,n=0,o=null,i=0,a=0;if(void 0===(o=t.serverProperties))throw new Error("Missing value for mandatory field 'serverProperties'");if("object"!=typeof o)throw new TypeError("Field 'serverProperties' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,a);var u=SCRATCH.slice(a,a+r);if(a+=r,i+=u.length,void 0===(o=t.mechanisms))o=Buffer.from("PLAIN");else if(!Buffer.isBuffer(o))throw new TypeError("Field 'mechanisms' is the wrong type; must be a Buffer");if(i+=o.length,void 0===(o=t.locales))o=Buffer.from("en_US");else if(!Buffer.isBuffer(o))throw new TypeError("Field 'locales' is the wrong type; must be a Buffer");i+=o.length;var d=Buffer.alloc(22+i);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(655370,7),n=11,void 0===(o=t.versionMajor))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'versionMajor' is the wrong type; must be a number (but not NaN)");if(d.writeUInt8(o,n),n++,void 0===(o=t.versionMinor))o=9;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'versionMinor' is the wrong type; must be a number (but not NaN)");return d.writeUInt8(o,n),n++,n+=u.copy(d,n),void 0===(o=t.mechanisms)&&(o=Buffer.from("PLAIN")),r=o.length,d.writeUInt32BE(r,n),n+=4,o.copy(d,n),n+=r,void 0===(o=t.locales)&&(o=Buffer.from("en_US")),r=o.length,d.writeUInt32BE(r,n),n+=4,o.copy(d,n),d[n+=r]=206,d.writeUInt32BE(n-7,3),d}(t,r);case 655371:return function(e,t){var r,n=0,o=null,i=0,a=0;if(void 0===(o=t.clientProperties))throw new Error("Missing value for mandatory field 'clientProperties'");if("object"!=typeof o)throw new TypeError("Field 'clientProperties' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,a);var u=SCRATCH.slice(a,a+r);if(a+=r,i+=u.length,void 0===(o=t.mechanism))o="PLAIN";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'mechanism' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(i+=d,void 0===(o=t.response))throw new Error("Missing value for mandatory field 'response'");if(!Buffer.isBuffer(o))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");if(i+=o.length,void 0===(o=t.locale))o="en_US";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'locale' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(o,"utf8");i+=s;var c=Buffer.alloc(18+i);return c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(655371,7),n=11,n+=u.copy(c,n),void 0===(o=t.mechanism)&&(o="PLAIN"),c[n]=d,n++,c.write(o,n,"utf8"),n+=d,void 0===(o=t.response)&&(o=Buffer.from(void 0)),r=o.length,c.writeUInt32BE(r,n),n+=4,o.copy(c,n),n+=r,void 0===(o=t.locale)&&(o="en_US"),c[n]=s,n++,c.write(o,n,"utf8"),c[n+=s]=206,c.writeUInt32BE(n-7,3),c}(t,r);case 655380:return function(e,t){var r,n=0,o=null,i=0;if(void 0===(o=t.challenge))throw new Error("Missing value for mandatory field 'challenge'");if(!Buffer.isBuffer(o))throw new TypeError("Field 'challenge' is the wrong type; must be a Buffer");i+=o.length;var a=Buffer.alloc(16+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655380,7),n=11,void 0===(o=t.challenge)&&(o=Buffer.from(void 0)),r=o.length,a.writeUInt32BE(r,n),n+=4,o.copy(a,n),a[n+=r]=206,a.writeUInt32BE(n-7,3),a}(t,r);case 655381:return function(e,t){var r,n=0,o=null,i=0;if(void 0===(o=t.response))throw new Error("Missing value for mandatory field 'response'");if(!Buffer.isBuffer(o))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");i+=o.length;var a=Buffer.alloc(16+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655381,7),n=11,void 0===(o=t.response)&&(o=Buffer.from(void 0)),r=o.length,a.writeUInt32BE(r,n),n+=4,o.copy(a,n),a[n+=r]=206,a.writeUInt32BE(n-7,3),a}(t,r);case 655390:return function(e,t){var r=0,n=null,o=Buffer.alloc(20);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(655390,7),r=11,void 0===(n=t.channelMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(o.writeUInt16BE(n,r),r+=2,void 0===(n=t.frameMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(o.writeUInt32BE(n,r),r+=4,void 0===(n=t.heartbeat))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return o.writeUInt16BE(n,r),o[r+=2]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 655391:return function(e,t){var r=0,n=null,o=Buffer.alloc(20);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(655391,7),r=11,void 0===(n=t.channelMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(o.writeUInt16BE(n,r),r+=2,void 0===(n=t.frameMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(o.writeUInt32BE(n,r),r+=4,void 0===(n=t.heartbeat))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return o.writeUInt16BE(n,r),o[r+=2]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 655400:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.virtualHost))n="/";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'virtualHost' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(i+=a,void 0===(n=t.capabilities))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'capabilities' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(n,"utf8");i+=u;var d=Buffer.alloc(15+i);return d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(655400,7),r=11,void 0===(n=t.virtualHost)&&(n="/"),d[r]=a,r++,d.write(n,r,"utf8"),r+=a,void 0===(n=t.capabilities)&&(n=""),d[r]=u,r++,d.write(n,r,"utf8"),r+=u,void 0===(n=t.insist)&&(n=!1),n&&(o+=1),d[r]=o,d[++r]=206,d.writeUInt32BE(r-7,3),d}(t,r);case 655401:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.knownHosts))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'knownHosts' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655401,7),r=11,void 0===(n=t.knownHosts)&&(n=""),a[r]=i,r++,a.write(n,r,"utf8"),a[r+=i]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 655410:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(19+o);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655410,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.replyText)&&(n=""),a[r]=i,r++,a.write(n,r,"utf8"),r+=i,void 0===(n=t.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(n,r),a[r+=2]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 655411:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(655411,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 655420:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.reason))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'reason' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655420,7),r=11,void 0===(n=t.reason)&&(n=""),a[r]=i,r++,a.write(n,r,"utf8"),a[r+=i]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 655421:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(655421,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 1310730:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.outOfBand))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'outOfBand' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310730,7),r=11,void 0===(n=t.outOfBand)&&(n=""),a[r]=i,r++,a.write(n,r,"utf8"),a[r+=i]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 1310731:return function(e,t){var r,n=0,o=null,i=0;if(void 0===(o=t.channelId))o=Buffer.from("");else if(!Buffer.isBuffer(o))throw new TypeError("Field 'channelId' is the wrong type; must be a Buffer");i+=o.length;var a=Buffer.alloc(16+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310731,7),n=11,void 0===(o=t.channelId)&&(o=Buffer.from("")),r=o.length,a.writeUInt32BE(r,n),n+=4,o.copy(a,n),a[n+=r]=206,a.writeUInt32BE(n-7,3),a}(t,r);case 1310740:return function(e,t){var r,n=0,o=0,i=Buffer.alloc(13);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(1310740,7),n=11,void 0===(r=t.active))throw new Error("Missing value for mandatory field 'active'");return r&&(o+=1),i[n]=o,i[++n]=206,i.writeUInt32BE(n-7,3),i}(t,r);case 1310741:return function(e,t){var r,n=0,o=0,i=Buffer.alloc(13);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(1310741,7),n=11,void 0===(r=t.active))throw new Error("Missing value for mandatory field 'active'");return r&&(o+=1),i[n]=o,i[++n]=206,i.writeUInt32BE(n-7,3),i}(t,r);case 1310760:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(19+o);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310760,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.replyText)&&(n=""),a[r]=i,r++,a.write(n,r,"utf8"),r+=i,void 0===(n=t.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(n,r),a[r+=2]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 1310761:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(1310761,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 1966090:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.realm))n="/data";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'realm' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");i+=a;var u=Buffer.alloc(14+i);return u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(1966090,7),r=11,void 0===(n=t.realm)&&(n="/data"),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.exclusive)&&(n=!1),n&&(o+=1),void 0===(n=t.passive)&&(n=!0),n&&(o+=2),void 0===(n=t.active)&&(n=!0),n&&(o+=4),void 0===(n=t.write)&&(n=!0),n&&(o+=8),void 0===(n=t.read)&&(n=!0),n&&(o+=16),u[r]=o,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 1966091:return function(e,t){var r=0,n=null,o=Buffer.alloc(14);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(1966091,7),r=11,void 0===(n=t.ticket))n=1;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return o.writeUInt16BE(n,r),o[r+=2]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 2621450:return function(e,t){var r,n=0,o=null,i=0,a=0,u=0;if(void 0===(o=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(a+=d,void 0===(o=t.type))o="direct";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(o,"utf8");if(a+=s,void 0===(o=t.arguments))o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,u);var c=SCRATCH.slice(u,u+r);u+=r,a+=c.length;var f=Buffer.alloc(17+a);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(2621450,7),n=11,void 0===(o=t.ticket))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(o,n),n+=2,void 0===(o=t.exchange)&&(o=void 0),f[n]=d,n++,f.write(o,n,"utf8"),n+=d,void 0===(o=t.type)&&(o="direct"),f[n]=s,n++,f.write(o,n,"utf8"),n+=s,void 0===(o=t.passive)&&(o=!1),o&&(i+=1),void 0===(o=t.durable)&&(o=!1),o&&(i+=2),void 0===(o=t.autoDelete)&&(o=!1),o&&(i+=4),void 0===(o=t.internal)&&(o=!1),o&&(i+=8),void 0===(o=t.nowait)&&(o=!1),o&&(i+=16),f[n]=i,n++,i=0,f[n+=c.copy(f,n)]=206,f.writeUInt32BE(n-7,3),f}(t,r);case 2621451:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621451,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 2621460:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");i+=a;var u=Buffer.alloc(16+i);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(2621460,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,void 0===(n=t.exchange)&&(n=void 0),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.ifUnused)&&(n=!1),n&&(o+=1),void 0===(n=t.nowait)&&(n=!1),n&&(o+=2),u[r]=o,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 2621461:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621461,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 2621470:return function(e,t){var r,n=0,o=null,i=0,a=0,u=0;if(void 0===(o=t.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(a+=d,void 0===(o=t.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(o,"utf8");if(a+=s,void 0===(o=t.routingKey))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(o,"utf8");if(a+=c,void 0===(o=t.arguments))o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,u);var f=SCRATCH.slice(u,u+r);u+=r,a+=f.length;var l=Buffer.alloc(18+a);if(l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(2621470,7),n=11,void 0===(o=t.ticket))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return l.writeUInt16BE(o,n),n+=2,void 0===(o=t.destination)&&(o=void 0),l[n]=d,n++,l.write(o,n,"utf8"),n+=d,void 0===(o=t.source)&&(o=void 0),l[n]=s,n++,l.write(o,n,"utf8"),n+=s,void 0===(o=t.routingKey)&&(o=""),l[n]=c,n++,l.write(o,n,"utf8"),n+=c,void 0===(o=t.nowait)&&(o=!1),o&&(i+=1),l[n]=i,n++,i=0,l[n+=f.copy(l,n)]=206,l.writeUInt32BE(n-7,3),l}(t,r);case 2621471:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621471,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 2621480:return function(e,t){var r,n=0,o=null,i=0,a=0,u=0;if(void 0===(o=t.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(a+=d,void 0===(o=t.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(o,"utf8");if(a+=s,void 0===(o=t.routingKey))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(o,"utf8");if(a+=c,void 0===(o=t.arguments))o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,u);var f=SCRATCH.slice(u,u+r);u+=r,a+=f.length;var l=Buffer.alloc(18+a);if(l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(2621480,7),n=11,void 0===(o=t.ticket))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return l.writeUInt16BE(o,n),n+=2,void 0===(o=t.destination)&&(o=void 0),l[n]=d,n++,l.write(o,n,"utf8"),n+=d,void 0===(o=t.source)&&(o=void 0),l[n]=s,n++,l.write(o,n,"utf8"),n+=s,void 0===(o=t.routingKey)&&(o=""),l[n]=c,n++,l.write(o,n,"utf8"),n+=c,void 0===(o=t.nowait)&&(o=!1),o&&(i+=1),l[n]=i,n++,i=0,l[n+=f.copy(l,n)]=206,l.writeUInt32BE(n-7,3),l}(t,r);case 2621491:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621491,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3276810:return function(e,t){var r,n=0,o=null,i=0,a=0,u=0;if(void 0===(o=t.queue))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(a+=d,void 0===(o=t.arguments))o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,u);var s=SCRATCH.slice(u,u+r);u+=r,a+=s.length;var c=Buffer.alloc(16+a);if(c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(3276810,7),n=11,void 0===(o=t.ticket))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return c.writeUInt16BE(o,n),n+=2,void 0===(o=t.queue)&&(o=""),c[n]=d,n++,c.write(o,n,"utf8"),n+=d,void 0===(o=t.passive)&&(o=!1),o&&(i+=1),void 0===(o=t.durable)&&(o=!1),o&&(i+=2),void 0===(o=t.exclusive)&&(o=!1),o&&(i+=4),void 0===(o=t.autoDelete)&&(o=!1),o&&(i+=8),void 0===(o=t.nowait)&&(o=!1),o&&(i+=16),c[n]=i,n++,i=0,c[n+=s.copy(c,n)]=206,c.writeUInt32BE(n-7,3),c}(t,r);case 3276811:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.queue))throw new Error("Missing value for mandatory field 'queue'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(21+o);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3276811,7),r=11,void 0===(n=t.queue)&&(n=void 0),a[r]=i,r++,a.write(n,r,"utf8"),r+=i,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");if(a.writeUInt32BE(n,r),r+=4,void 0===(n=t.consumerCount))throw new Error("Missing value for mandatory field 'consumerCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'consumerCount' is the wrong type; must be a number (but not NaN)");return a.writeUInt32BE(n,r),a[r+=4]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3276820:return function(e,t){var r,n=0,o=null,i=0,a=0,u=0;if(void 0===(o=t.queue))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(a+=d,void 0===(o=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(o,"utf8");if(a+=s,void 0===(o=t.routingKey))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(o,"utf8");if(a+=c,void 0===(o=t.arguments))o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,u);var f=SCRATCH.slice(u,u+r);u+=r,a+=f.length;var l=Buffer.alloc(18+a);if(l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(3276820,7),n=11,void 0===(o=t.ticket))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return l.writeUInt16BE(o,n),n+=2,void 0===(o=t.queue)&&(o=""),l[n]=d,n++,l.write(o,n,"utf8"),n+=d,void 0===(o=t.exchange)&&(o=void 0),l[n]=s,n++,l.write(o,n,"utf8"),n+=s,void 0===(o=t.routingKey)&&(o=""),l[n]=c,n++,l.write(o,n,"utf8"),n+=c,void 0===(o=t.nowait)&&(o=!1),o&&(i+=1),l[n]=i,n++,i=0,l[n+=f.copy(l,n)]=206,l.writeUInt32BE(n-7,3),l}(t,r);case 3276821:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3276821,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3276830:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");i+=a;var u=Buffer.alloc(16+i);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3276830,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,void 0===(n=t.queue)&&(n=""),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.nowait)&&(n=!1),n&&(o+=1),u[r]=o,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 3276831:return function(e,t){var r,n=0,o=Buffer.alloc(16);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3276831,7),n=11,void 0===(r=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof r||isNaN(r))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return o.writeUInt32BE(r,n),o[n+=4]=206,o.writeUInt32BE(n-7,3),o}(t,r);case 3276840:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");i+=a;var u=Buffer.alloc(16+i);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3276840,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,void 0===(n=t.queue)&&(n=""),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.ifUnused)&&(n=!1),n&&(o+=1),void 0===(n=t.ifEmpty)&&(n=!1),n&&(o+=2),void 0===(n=t.nowait)&&(n=!1),n&&(o+=4),u[r]=o,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 3276841:return function(e,t){var r,n=0,o=Buffer.alloc(16);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3276841,7),n=11,void 0===(r=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof r||isNaN(r))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return o.writeUInt32BE(r,n),o[n+=4]=206,o.writeUInt32BE(n-7,3),o}(t,r);case 3276850:return function(e,t){var r,n=0,o=null,i=0,a=0;if(void 0===(o=t.queue))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(o,"utf8");if(i+=u,void 0===(o=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(i+=d,void 0===(o=t.routingKey))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(o,"utf8");if(i+=s,void 0===(o=t.arguments))o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,a);var c=SCRATCH.slice(a,a+r);a+=r,i+=c.length;var f=Buffer.alloc(17+i);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(3276850,7),n=11,void 0===(o=t.ticket))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(o,n),n+=2,void 0===(o=t.queue)&&(o=""),f[n]=u,n++,f.write(o,n,"utf8"),n+=u,void 0===(o=t.exchange)&&(o=void 0),f[n]=d,n++,f.write(o,n,"utf8"),n+=d,void 0===(o=t.routingKey)&&(o=""),f[n]=s,n++,f.write(o,n,"utf8"),n+=s,f[n+=c.copy(f,n)]=206,f.writeUInt32BE(n-7,3),f}(t,r);case 3276851:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3276851,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3932170:return function(e,t){var r=0,n=null,o=0,i=Buffer.alloc(19);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3932170,7),r=11,void 0===(n=t.prefetchSize))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'prefetchSize' is the wrong type; must be a number (but not NaN)");if(i.writeUInt32BE(n,r),r+=4,void 0===(n=t.prefetchCount))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'prefetchCount' is the wrong type; must be a number (but not NaN)");return i.writeUInt16BE(n,r),r+=2,void 0===(n=t.global)&&(n=!1),n&&(o+=1),i[r]=o,i[++r]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 3932171:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3932171,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3932180:return function(e,t){var r,n=0,o=null,i=0,a=0,u=0;if(void 0===(o=t.queue))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(o,"utf8");if(a+=d,void 0===(o=t.consumerTag))o="";else if(!("string"==typeof o&&Buffer.byteLength(o)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(o,"utf8");if(a+=s,void 0===(o=t.arguments))o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=encodeTable(SCRATCH,o,u);var c=SCRATCH.slice(u,u+r);u+=r,a+=c.length;var f=Buffer.alloc(17+a);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(3932180,7),n=11,void 0===(o=t.ticket))o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(o,n),n+=2,void 0===(o=t.queue)&&(o=""),f[n]=d,n++,f.write(o,n,"utf8"),n+=d,void 0===(o=t.consumerTag)&&(o=""),f[n]=s,n++,f.write(o,n,"utf8"),n+=s,void 0===(o=t.noLocal)&&(o=!1),o&&(i+=1),void 0===(o=t.noAck)&&(o=!1),o&&(i+=2),void 0===(o=t.exclusive)&&(o=!1),o&&(i+=4),void 0===(o=t.nowait)&&(o=!1),o&&(i+=8),f[n]=i,n++,i=0,f[n+=c.copy(f,n)]=206,f.writeUInt32BE(n-7,3),f}(t,r);case 3932181:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932181,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),a[r]=i,r++,a.write(n,r,"utf8"),a[r+=i]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3932190:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");i+=a;var u=Buffer.alloc(14+i);return u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932190,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.nowait)&&(n=!1),n&&(o+=1),u[r]=o,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 3932191:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932191,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),a[r]=i,r++,a.write(n,r,"utf8"),a[r+=i]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3932200:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.exchange))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(i+=a,void 0===(n=t.routingKey))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(n,"utf8");i+=u;var d=Buffer.alloc(17+i);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(3932200,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(n,r),r+=2,void 0===(n=t.exchange)&&(n=""),d[r]=a,r++,d.write(n,r,"utf8"),r+=a,void 0===(n=t.routingKey)&&(n=""),d[r]=u,r++,d.write(n,r,"utf8"),r+=u,void 0===(n=t.mandatory)&&(n=!1),n&&(o+=1),void 0===(n=t.immediate)&&(n=!1),n&&(o+=2),d[r]=o,d[++r]=206,d.writeUInt32BE(r-7,3),d}(t,r);case 3932210:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");if(o+=i,void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(o+=a,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(n,"utf8");o+=u;var d=Buffer.alloc(17+o);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(3932210,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(n,r),r+=2,void 0===(n=t.replyText)&&(n=""),d[r]=i,r++,d.write(n,r,"utf8"),r+=i,void 0===(n=t.exchange)&&(n=void 0),d[r]=a,r++,d.write(n,r,"utf8"),r+=a,void 0===(n=t.routingKey)&&(n=void 0),d[r]=u,r++,d.write(n,r,"utf8"),d[r+=u]=206,d.writeUInt32BE(r-7,3),d}(t,r);case 3932220:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(i+=a,void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(n,"utf8");if(i+=u,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(n,"utf8");i+=d;var s=Buffer.alloc(24+i);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3932220,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(s,n,r),r+=8,void 0===(n=t.redelivered)&&(n=!1),n&&(o+=1),s[r]=o,r++,o=0,void 0===(n=t.exchange)&&(n=void 0),s[r]=u,r++,s.write(n,r,"utf8"),r+=u,void 0===(n=t.routingKey)&&(n=void 0),s[r]=d,r++,s.write(n,r,"utf8"),s[r+=d]=206,s.writeUInt32BE(r-7,3),s}(t,r);case 3932230:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");i+=a;var u=Buffer.alloc(16+i);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932230,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,void 0===(n=t.queue)&&(n=""),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.noAck)&&(n=!1),n&&(o+=1),u[r]=o,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 3932231:return function(e,t){var r=0,n=null,o=0,i=0;if(void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(i+=a,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(n,"utf8");i+=u;var d=Buffer.alloc(27+i);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(3932231,7),r=11,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");if(ints.writeUInt64BE(d,n,r),r+=8,void 0===(n=t.redelivered)&&(n=!1),n&&(o+=1),d[r]=o,r++,o=0,void 0===(n=t.exchange)&&(n=void 0),d[r]=a,r++,d.write(n,r,"utf8"),r+=a,void 0===(n=t.routingKey)&&(n=void 0),d[r]=u,r++,d.write(n,r,"utf8"),r+=u,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return d.writeUInt32BE(n,r),d[r+=4]=206,d.writeUInt32BE(r-7,3),d}(t,r);case 3932232:return function(e,t){var r=0,n=null,o=0;if(void 0===(n=t.clusterId))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var i=Buffer.byteLength(n,"utf8");o+=i;var a=Buffer.alloc(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932232,7),r=11,void 0===(n=t.clusterId)&&(n=""),a[r]=i,r++,a.write(n,r,"utf8"),a[r+=i]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3932240:return function(e,t){var r=0,n=null,o=0,i=Buffer.alloc(21);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3932240,7),r=11,void 0===(n=t.deliveryTag))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(i,n,r),r+=8,void 0===(n=t.multiple)&&(n=!1),n&&(o+=1),i[r]=o,i[++r]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 3932250:return function(e,t){var r=0,n=null,o=0,i=Buffer.alloc(21);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3932250,7),r=11,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(i,n,r),r+=8,void 0===(n=t.requeue)&&(n=!0),n&&(o+=1),i[r]=o,i[++r]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 3932260:return function(e,t){var r=0,n=null,o=0,i=Buffer.alloc(13);return i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3932260,7),r=11,void 0===(n=t.requeue)&&(n=!1),n&&(o+=1),i[r]=o,i[++r]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 3932270:return function(e,t){var r=0,n=null,o=0,i=Buffer.alloc(13);return i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3932270,7),r=11,void 0===(n=t.requeue)&&(n=!1),n&&(o+=1),i[r]=o,i[++r]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 3932271:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3932271,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3932280:return function(e,t){var r=0,n=null,o=0,i=Buffer.alloc(21);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3932280,7),r=11,void 0===(n=t.deliveryTag))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(i,n,r),r+=8,void 0===(n=t.multiple)&&(n=!1),n&&(o+=1),void 0===(n=t.requeue)&&(n=!0),n&&(o+=2),i[r]=o,i[++r]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 5898250:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898250,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898251:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898251,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898260:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898260,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898261:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898261,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898270:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898270,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898271:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898271,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5570570:return function(e,t){var r=0,n=null,o=0,i=Buffer.alloc(13);return i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(5570570,7),r=11,void 0===(n=t.nowait)&&(n=!1),n&&(o+=1),i[r]=o,i[++r]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 5570571:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5570571,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);default:throw new Error("Unknown class/method ID")}},module.exports.encodeProperties=function(e,t,r,n){switch(e){case 60:return function(e,t,r){var n,o,i=0,a=0,u=0,d=0;if(null!=(n=r.contentType)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'contentType' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(n,"utf8");d+=1,d+=s}if(null!=(n=r.contentEncoding)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'contentEncoding' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(n,"utf8");d+=1,d+=c}if(null!=(n=r.headers)){if("object"!=typeof n)throw new TypeError("Field 'headers' is the wrong type; must be an object");o=encodeTable(SCRATCH,n,u);var f=SCRATCH.slice(u,u+o);u+=o,d+=f.length}if(null!=(n=r.deliveryMode)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryMode' is the wrong type; must be a number (but not NaN)");d+=1}if(null!=(n=r.priority)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'priority' is the wrong type; must be a number (but not NaN)");d+=1}if(null!=(n=r.correlationId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'correlationId' is the wrong type; must be a string (up to 255 chars)");var l=Buffer.byteLength(n,"utf8");d+=1,d+=l}if(null!=(n=r.replyTo)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyTo' is the wrong type; must be a string (up to 255 chars)");var m=Buffer.byteLength(n,"utf8");d+=1,d+=m}if(null!=(n=r.expiration)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'expiration' is the wrong type; must be a string (up to 255 chars)");var h=Buffer.byteLength(n,"utf8");d+=1,d+=h}if(null!=(n=r.messageId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'messageId' is the wrong type; must be a string (up to 255 chars)");var p=Buffer.byteLength(n,"utf8");d+=1,d+=p}if(null!=(n=r.timestamp)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'timestamp' is the wrong type; must be a number (but not NaN)");d+=8}if(null!=(n=r.type)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var g=Buffer.byteLength(n,"utf8");d+=1,d+=g}if(null!=(n=r.userId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'userId' is the wrong type; must be a string (up to 255 chars)");var y=Buffer.byteLength(n,"utf8");d+=1,d+=y}if(null!=(n=r.appId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'appId' is the wrong type; must be a string (up to 255 chars)");var v=Buffer.byteLength(n,"utf8");d+=1,d+=v}if(null!=(n=r.clusterId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var w=Buffer.byteLength(n,"utf8");d+=1,d+=w}var I=Buffer.alloc(22+d);return I[0]=2,I.writeUInt16BE(e,1),I.writeUInt32BE(3932160,7),ints.writeUInt64BE(I,t,11),a=0,i=21,null!=(n=r.contentType)&&(a+=32768,I[i]=s,i++,I.write(n,i,"utf8"),i+=s),null!=(n=r.contentEncoding)&&(a+=16384,I[i]=c,i++,I.write(n,i,"utf8"),i+=c),null!=(n=r.headers)&&(a+=8192,i+=f.copy(I,i)),null!=(n=r.deliveryMode)&&(a+=4096,I.writeUInt8(n,i),i++),null!=(n=r.priority)&&(a+=2048,I.writeUInt8(n,i),i++),null!=(n=r.correlationId)&&(a+=1024,I[i]=l,i++,I.write(n,i,"utf8"),i+=l),null!=(n=r.replyTo)&&(a+=512,I[i]=m,i++,I.write(n,i,"utf8"),i+=m),null!=(n=r.expiration)&&(a+=256,I[i]=h,i++,I.write(n,i,"utf8"),i+=h),null!=(n=r.messageId)&&(a+=128,I[i]=p,i++,I.write(n,i,"utf8"),i+=p),null!=(n=r.timestamp)&&(a+=64,ints.writeUInt64BE(I,n,i),i+=8),null!=(n=r.type)&&(a+=32,I[i]=g,i++,I.write(n,i,"utf8"),i+=g),null!=(n=r.userId)&&(a+=16,I[i]=y,i++,I.write(n,i,"utf8"),i+=y),null!=(n=r.appId)&&(a+=8,I[i]=v,i++,I.write(n,i,"utf8"),i+=v),null!=(n=r.clusterId)&&(a+=4,I[i]=w,i++,I.write(n,i,"utf8"),i+=w),I[i]=206,I.writeUInt32BE(i-7,3),I.writeUInt16BE(a,19),I.slice(0,i+1)}(t,r,n);default:throw new Error("Unknown class/properties ID")}},module.exports.info=function(e){switch(e){case 655370:return methodInfoConnectionStart;case 655371:return methodInfoConnectionStartOk;case 655380:return methodInfoConnectionSecure;case 655381:return methodInfoConnectionSecureOk;case 655390:return methodInfoConnectionTune;case 655391:return methodInfoConnectionTuneOk;case 655400:return methodInfoConnectionOpen;case 655401:return methodInfoConnectionOpenOk;case 655410:return methodInfoConnectionClose;case 655411:return methodInfoConnectionCloseOk;case 655420:return methodInfoConnectionBlocked;case 655421:return methodInfoConnectionUnblocked;case 1310730:return methodInfoChannelOpen;case 1310731:return methodInfoChannelOpenOk;case 1310740:return methodInfoChannelFlow;case 1310741:return methodInfoChannelFlowOk;case 1310760:return methodInfoChannelClose;case 1310761:return methodInfoChannelCloseOk;case 1966090:return methodInfoAccessRequest;case 1966091:return methodInfoAccessRequestOk;case 2621450:return methodInfoExchangeDeclare;case 2621451:return methodInfoExchangeDeclareOk;case 2621460:return methodInfoExchangeDelete;case 2621461:return methodInfoExchangeDeleteOk;case 2621470:return methodInfoExchangeBind;case 2621471:return methodInfoExchangeBindOk;case 2621480:return methodInfoExchangeUnbind;case 2621491:return methodInfoExchangeUnbindOk;case 3276810:return methodInfoQueueDeclare;case 3276811:return methodInfoQueueDeclareOk;case 3276820:return methodInfoQueueBind;case 3276821:return methodInfoQueueBindOk;case 3276830:return methodInfoQueuePurge;case 3276831:return methodInfoQueuePurgeOk;case 3276840:return methodInfoQueueDelete;case 3276841:return methodInfoQueueDeleteOk;case 3276850:return methodInfoQueueUnbind;case 3276851:return methodInfoQueueUnbindOk;case 3932170:return methodInfoBasicQos;case 3932171:return methodInfoBasicQosOk;case 3932180:return methodInfoBasicConsume;case 3932181:return methodInfoBasicConsumeOk;case 3932190:return methodInfoBasicCancel;case 3932191:return methodInfoBasicCancelOk;case 3932200:return methodInfoBasicPublish;case 3932210:return methodInfoBasicReturn;case 3932220:return methodInfoBasicDeliver;case 3932230:return methodInfoBasicGet;case 3932231:return methodInfoBasicGetOk;case 3932232:return methodInfoBasicGetEmpty;case 3932240:return methodInfoBasicAck;case 3932250:return methodInfoBasicReject;case 3932260:return methodInfoBasicRecoverAsync;case 3932270:return methodInfoBasicRecover;case 3932271:return methodInfoBasicRecoverOk;case 3932280:return methodInfoBasicNack;case 5898250:return methodInfoTxSelect;case 5898251:return methodInfoTxSelectOk;case 5898260:return methodInfoTxCommit;case 5898261:return methodInfoTxCommitOk;case 5898270:return methodInfoTxRollback;case 5898271:return methodInfoTxRollbackOk;case 5570570:return methodInfoConfirmSelect;case 5570571:return methodInfoConfirmSelectOk;case 60:return propertiesInfoBasicProperties;default:throw new Error("Unknown class/method ID")}},module.exports.ConnectionStart=655370;var methodInfoConnectionStart=module.exports.methodInfoConnectionStart={id:655370,classId:10,methodId:10,name:"ConnectionStart",args:[{type:"octet",name:"versionMajor",default:0},{type:"octet",name:"versionMinor",default:9},{type:"table",name:"serverProperties"},{type:"longstr",name:"mechanisms",default:"PLAIN"},{type:"longstr",name:"locales",default:"en_US"}]};module.exports.ConnectionStartOk=655371;var methodInfoConnectionStartOk=module.exports.methodInfoConnectionStartOk={id:655371,classId:10,methodId:11,name:"ConnectionStartOk",args:[{type:"table",name:"clientProperties"},{type:"shortstr",name:"mechanism",default:"PLAIN"},{type:"longstr",name:"response"},{type:"shortstr",name:"locale",default:"en_US"}]};module.exports.ConnectionSecure=655380;var methodInfoConnectionSecure=module.exports.methodInfoConnectionSecure={id:655380,classId:10,methodId:20,name:"ConnectionSecure",args:[{type:"longstr",name:"challenge"}]};module.exports.ConnectionSecureOk=655381;var methodInfoConnectionSecureOk=module.exports.methodInfoConnectionSecureOk={id:655381,classId:10,methodId:21,name:"ConnectionSecureOk",args:[{type:"longstr",name:"response"}]};module.exports.ConnectionTune=655390;var methodInfoConnectionTune=module.exports.methodInfoConnectionTune={id:655390,classId:10,methodId:30,name:"ConnectionTune",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};module.exports.ConnectionTuneOk=655391;var methodInfoConnectionTuneOk=module.exports.methodInfoConnectionTuneOk={id:655391,classId:10,methodId:31,name:"ConnectionTuneOk",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};module.exports.ConnectionOpen=655400;var methodInfoConnectionOpen=module.exports.methodInfoConnectionOpen={id:655400,classId:10,methodId:40,name:"ConnectionOpen",args:[{type:"shortstr",name:"virtualHost",default:"/"},{type:"shortstr",name:"capabilities",default:""},{type:"bit",name:"insist",default:!1}]};module.exports.ConnectionOpenOk=655401;var methodInfoConnectionOpenOk=module.exports.methodInfoConnectionOpenOk={id:655401,classId:10,methodId:41,name:"ConnectionOpenOk",args:[{type:"shortstr",name:"knownHosts",default:""}]};module.exports.ConnectionClose=655410;var methodInfoConnectionClose=module.exports.methodInfoConnectionClose={id:655410,classId:10,methodId:50,name:"ConnectionClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};module.exports.ConnectionCloseOk=655411;var methodInfoConnectionCloseOk=module.exports.methodInfoConnectionCloseOk={id:655411,classId:10,methodId:51,name:"ConnectionCloseOk",args:[]};module.exports.ConnectionBlocked=655420;var methodInfoConnectionBlocked=module.exports.methodInfoConnectionBlocked={id:655420,classId:10,methodId:60,name:"ConnectionBlocked",args:[{type:"shortstr",name:"reason",default:""}]};module.exports.ConnectionUnblocked=655421;var methodInfoConnectionUnblocked=module.exports.methodInfoConnectionUnblocked={id:655421,classId:10,methodId:61,name:"ConnectionUnblocked",args:[]};module.exports.ChannelOpen=1310730;var methodInfoChannelOpen=module.exports.methodInfoChannelOpen={id:1310730,classId:20,methodId:10,name:"ChannelOpen",args:[{type:"shortstr",name:"outOfBand",default:""}]};module.exports.ChannelOpenOk=1310731;var methodInfoChannelOpenOk=module.exports.methodInfoChannelOpenOk={id:1310731,classId:20,methodId:11,name:"ChannelOpenOk",args:[{type:"longstr",name:"channelId",default:""}]};module.exports.ChannelFlow=1310740;var methodInfoChannelFlow=module.exports.methodInfoChannelFlow={id:1310740,classId:20,methodId:20,name:"ChannelFlow",args:[{type:"bit",name:"active"}]};module.exports.ChannelFlowOk=1310741;var methodInfoChannelFlowOk=module.exports.methodInfoChannelFlowOk={id:1310741,classId:20,methodId:21,name:"ChannelFlowOk",args:[{type:"bit",name:"active"}]};module.exports.ChannelClose=1310760;var methodInfoChannelClose=module.exports.methodInfoChannelClose={id:1310760,classId:20,methodId:40,name:"ChannelClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};module.exports.ChannelCloseOk=1310761;var methodInfoChannelCloseOk=module.exports.methodInfoChannelCloseOk={id:1310761,classId:20,methodId:41,name:"ChannelCloseOk",args:[]};module.exports.AccessRequest=1966090;var methodInfoAccessRequest=module.exports.methodInfoAccessRequest={id:1966090,classId:30,methodId:10,name:"AccessRequest",args:[{type:"shortstr",name:"realm",default:"/data"},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"passive",default:!0},{type:"bit",name:"active",default:!0},{type:"bit",name:"write",default:!0},{type:"bit",name:"read",default:!0}]};module.exports.AccessRequestOk=1966091;var methodInfoAccessRequestOk=module.exports.methodInfoAccessRequestOk={id:1966091,classId:30,methodId:11,name:"AccessRequestOk",args:[{type:"short",name:"ticket",default:1}]};module.exports.ExchangeDeclare=2621450;var methodInfoExchangeDeclare=module.exports.methodInfoExchangeDeclare={id:2621450,classId:40,methodId:10,name:"ExchangeDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"type",default:"direct"},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"internal",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.ExchangeDeclareOk=2621451;var methodInfoExchangeDeclareOk=module.exports.methodInfoExchangeDeclareOk={id:2621451,classId:40,methodId:11,name:"ExchangeDeclareOk",args:[]};module.exports.ExchangeDelete=2621460;var methodInfoExchangeDelete=module.exports.methodInfoExchangeDelete={id:2621460,classId:40,methodId:20,name:"ExchangeDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"nowait",default:!1}]};module.exports.ExchangeDeleteOk=2621461;var methodInfoExchangeDeleteOk=module.exports.methodInfoExchangeDeleteOk={id:2621461,classId:40,methodId:21,name:"ExchangeDeleteOk",args:[]};module.exports.ExchangeBind=2621470;var methodInfoExchangeBind=module.exports.methodInfoExchangeBind={id:2621470,classId:40,methodId:30,name:"ExchangeBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.ExchangeBindOk=2621471;var methodInfoExchangeBindOk=module.exports.methodInfoExchangeBindOk={id:2621471,classId:40,methodId:31,name:"ExchangeBindOk",args:[]};module.exports.ExchangeUnbind=2621480;var methodInfoExchangeUnbind=module.exports.methodInfoExchangeUnbind={id:2621480,classId:40,methodId:40,name:"ExchangeUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.ExchangeUnbindOk=2621491;var methodInfoExchangeUnbindOk=module.exports.methodInfoExchangeUnbindOk={id:2621491,classId:40,methodId:51,name:"ExchangeUnbindOk",args:[]};module.exports.QueueDeclare=3276810;var methodInfoQueueDeclare=module.exports.methodInfoQueueDeclare={id:3276810,classId:50,methodId:10,name:"QueueDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.QueueDeclareOk=3276811;var methodInfoQueueDeclareOk=module.exports.methodInfoQueueDeclareOk={id:3276811,classId:50,methodId:11,name:"QueueDeclareOk",args:[{type:"shortstr",name:"queue"},{type:"long",name:"messageCount"},{type:"long",name:"consumerCount"}]};module.exports.QueueBind=3276820;var methodInfoQueueBind=module.exports.methodInfoQueueBind={id:3276820,classId:50,methodId:20,name:"QueueBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.QueueBindOk=3276821;var methodInfoQueueBindOk=module.exports.methodInfoQueueBindOk={id:3276821,classId:50,methodId:21,name:"QueueBindOk",args:[]};module.exports.QueuePurge=3276830;var methodInfoQueuePurge=module.exports.methodInfoQueuePurge={id:3276830,classId:50,methodId:30,name:"QueuePurge",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"nowait",default:!1}]};module.exports.QueuePurgeOk=3276831;var methodInfoQueuePurgeOk=module.exports.methodInfoQueuePurgeOk={id:3276831,classId:50,methodId:31,name:"QueuePurgeOk",args:[{type:"long",name:"messageCount"}]};module.exports.QueueDelete=3276840;var methodInfoQueueDelete=module.exports.methodInfoQueueDelete={id:3276840,classId:50,methodId:40,name:"QueueDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"ifEmpty",default:!1},{type:"bit",name:"nowait",default:!1}]};module.exports.QueueDeleteOk=3276841;var methodInfoQueueDeleteOk=module.exports.methodInfoQueueDeleteOk={id:3276841,classId:50,methodId:41,name:"QueueDeleteOk",args:[{type:"long",name:"messageCount"}]};module.exports.QueueUnbind=3276850;var methodInfoQueueUnbind=module.exports.methodInfoQueueUnbind={id:3276850,classId:50,methodId:50,name:"QueueUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"table",name:"arguments",default:{}}]};module.exports.QueueUnbindOk=3276851;var methodInfoQueueUnbindOk=module.exports.methodInfoQueueUnbindOk={id:3276851,classId:50,methodId:51,name:"QueueUnbindOk",args:[]};module.exports.BasicQos=3932170;var methodInfoBasicQos=module.exports.methodInfoBasicQos={id:3932170,classId:60,methodId:10,name:"BasicQos",args:[{type:"long",name:"prefetchSize",default:0},{type:"short",name:"prefetchCount",default:0},{type:"bit",name:"global",default:!1}]};module.exports.BasicQosOk=3932171;var methodInfoBasicQosOk=module.exports.methodInfoBasicQosOk={id:3932171,classId:60,methodId:11,name:"BasicQosOk",args:[]};module.exports.BasicConsume=3932180;var methodInfoBasicConsume=module.exports.methodInfoBasicConsume={id:3932180,classId:60,methodId:20,name:"BasicConsume",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"consumerTag",default:""},{type:"bit",name:"noLocal",default:!1},{type:"bit",name:"noAck",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.BasicConsumeOk=3932181;var methodInfoBasicConsumeOk=module.exports.methodInfoBasicConsumeOk={id:3932181,classId:60,methodId:21,name:"BasicConsumeOk",args:[{type:"shortstr",name:"consumerTag"}]};module.exports.BasicCancel=3932190;var methodInfoBasicCancel=module.exports.methodInfoBasicCancel={id:3932190,classId:60,methodId:30,name:"BasicCancel",args:[{type:"shortstr",name:"consumerTag"},{type:"bit",name:"nowait",default:!1}]};module.exports.BasicCancelOk=3932191;var methodInfoBasicCancelOk=module.exports.methodInfoBasicCancelOk={id:3932191,classId:60,methodId:31,name:"BasicCancelOk",args:[{type:"shortstr",name:"consumerTag"}]};module.exports.BasicPublish=3932200;var methodInfoBasicPublish=module.exports.methodInfoBasicPublish={id:3932200,classId:60,methodId:40,name:"BasicPublish",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange",default:""},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"mandatory",default:!1},{type:"bit",name:"immediate",default:!1}]};module.exports.BasicReturn=3932210;var methodInfoBasicReturn=module.exports.methodInfoBasicReturn={id:3932210,classId:60,methodId:50,name:"BasicReturn",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};module.exports.BasicDeliver=3932220;var methodInfoBasicDeliver=module.exports.methodInfoBasicDeliver={id:3932220,classId:60,methodId:60,name:"BasicDeliver",args:[{type:"shortstr",name:"consumerTag"},{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};module.exports.BasicGet=3932230;var methodInfoBasicGet=module.exports.methodInfoBasicGet={id:3932230,classId:60,methodId:70,name:"BasicGet",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"noAck",default:!1}]};module.exports.BasicGetOk=3932231;var methodInfoBasicGetOk=module.exports.methodInfoBasicGetOk={id:3932231,classId:60,methodId:71,name:"BasicGetOk",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"},{type:"long",name:"messageCount"}]};module.exports.BasicGetEmpty=3932232;var methodInfoBasicGetEmpty=module.exports.methodInfoBasicGetEmpty={id:3932232,classId:60,methodId:72,name:"BasicGetEmpty",args:[{type:"shortstr",name:"clusterId",default:""}]};module.exports.BasicAck=3932240;var methodInfoBasicAck=module.exports.methodInfoBasicAck={id:3932240,classId:60,methodId:80,name:"BasicAck",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1}]};module.exports.BasicReject=3932250;var methodInfoBasicReject=module.exports.methodInfoBasicReject={id:3932250,classId:60,methodId:90,name:"BasicReject",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"requeue",default:!0}]};module.exports.BasicRecoverAsync=3932260;var methodInfoBasicRecoverAsync=module.exports.methodInfoBasicRecoverAsync={id:3932260,classId:60,methodId:100,name:"BasicRecoverAsync",args:[{type:"bit",name:"requeue",default:!1}]};module.exports.BasicRecover=3932270;var methodInfoBasicRecover=module.exports.methodInfoBasicRecover={id:3932270,classId:60,methodId:110,name:"BasicRecover",args:[{type:"bit",name:"requeue",default:!1}]};module.exports.BasicRecoverOk=3932271;var methodInfoBasicRecoverOk=module.exports.methodInfoBasicRecoverOk={id:3932271,classId:60,methodId:111,name:"BasicRecoverOk",args:[]};module.exports.BasicNack=3932280;var methodInfoBasicNack=module.exports.methodInfoBasicNack={id:3932280,classId:60,methodId:120,name:"BasicNack",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1},{type:"bit",name:"requeue",default:!0}]};module.exports.TxSelect=5898250;var methodInfoTxSelect=module.exports.methodInfoTxSelect={id:5898250,classId:90,methodId:10,name:"TxSelect",args:[]};module.exports.TxSelectOk=5898251;var methodInfoTxSelectOk=module.exports.methodInfoTxSelectOk={id:5898251,classId:90,methodId:11,name:"TxSelectOk",args:[]};module.exports.TxCommit=5898260;var methodInfoTxCommit=module.exports.methodInfoTxCommit={id:5898260,classId:90,methodId:20,name:"TxCommit",args:[]};module.exports.TxCommitOk=5898261;var methodInfoTxCommitOk=module.exports.methodInfoTxCommitOk={id:5898261,classId:90,methodId:21,name:"TxCommitOk",args:[]};module.exports.TxRollback=5898270;var methodInfoTxRollback=module.exports.methodInfoTxRollback={id:5898270,classId:90,methodId:30,name:"TxRollback",args:[]};module.exports.TxRollbackOk=5898271;var methodInfoTxRollbackOk=module.exports.methodInfoTxRollbackOk={id:5898271,classId:90,methodId:31,name:"TxRollbackOk",args:[]};module.exports.ConfirmSelect=5570570;var methodInfoConfirmSelect=module.exports.methodInfoConfirmSelect={id:5570570,classId:85,methodId:10,name:"ConfirmSelect",args:[{type:"bit",name:"nowait",default:!1}]};module.exports.ConfirmSelectOk=5570571;var methodInfoConfirmSelectOk=module.exports.methodInfoConfirmSelectOk={id:5570571,classId:85,methodId:11,name:"ConfirmSelectOk",args:[]};module.exports.BasicProperties=60;var propertiesInfoBasicProperties=module.exports.propertiesInfoBasicProperties={id:60,name:"BasicProperties",args:[{type:"shortstr",name:"contentType"},{type:"shortstr",name:"contentEncoding"},{type:"table",name:"headers"},{type:"octet",name:"deliveryMode"},{type:"octet",name:"priority"},{type:"shortstr",name:"correlationId"},{type:"shortstr",name:"replyTo"},{type:"shortstr",name:"expiration"},{type:"shortstr",name:"messageId"},{type:"timestamp",name:"timestamp"},{type:"shortstr",name:"type"},{type:"shortstr",name:"userId"},{type:"shortstr",name:"appId"},{type:"shortstr",name:"clusterId"}]}},{"./codec":157,"buffer-more-ints":190,"safe-buffer":204}],162:[function(require,module,exports){function trimStack(r,t){return r&&r.split("\n").slice(t).join("\n")}function IllegalOperationError(r,t){var e=new Error;this.message=r,this.stack=this.toString()+"\n"+trimStack(e.stack,2),this.stackAtStateChange=t}(0,require("util").inherits)(IllegalOperationError,Error),IllegalOperationError.prototype.name="IllegalOperationError",module.exports.IllegalOperationError=IllegalOperationError,module.exports.stackCapture=function(r){return"Stack capture: "+r+"\n"+trimStack((new Error).stack,2)}},{util:43}],163:[function(require,module,exports){"use strict";var defs=require("./defs"),format=require("util").format,HEARTBEAT=(require("util").inherits,require("./frame").HEARTBEAT);module.exports.closeMessage=function(e){var r=e.fields.replyCode;return format('%d (%s) with message "%s"',r,defs.constant_strs[r],e.fields.replyText)},module.exports.methodName=function(e){return defs.info(e).name},module.exports.inspect=function(e,r){if(e===HEARTBEAT)return"<Heartbeat>";if(e.id){var t=defs.info(e.id);return format("<%s channel:%d%s>",t.name,e.channel,r?" "+JSON.stringify(e.fields,void 0,2):"")}return format("<Content channel:%d size:%d>",e.channel,e.size)}},{"./defs":161,"./frame":164,util:43}],164:[function(require,module,exports){"use strict";var defs=require("./defs"),constants=defs.constants,decode=defs.decode,Buffer=require("safe-buffer").Buffer,Bits=require("bitsyntax");module.exports.PROTOCOL_HEADER="AMQP"+String.fromCharCode(0,0,9,1);var FRAME_METHOD=constants.FRAME_METHOD,FRAME_HEARTBEAT=constants.FRAME_HEARTBEAT,FRAME_HEADER=constants.FRAME_HEADER,FRAME_BODY=constants.FRAME_BODY,FRAME_END=constants.FRAME_END,bodyCons=Bits.builder(FRAME_BODY,"channel:16, size:32, payload:size/binary",FRAME_END);module.exports.makeBodyFrame=function(e,r){return bodyCons({channel:e,size:r.length,payload:r})};var frameHeaderPattern=Bits.matcher("type:8","channel:16","size:32","rest/binary");module.exports.parseFrame=function(e,r){var a=frameHeaderPattern(e);if(a){var n=a.size,t=a.rest;if(n>r)throw new Error("Frame size exceeds frame max");if(t.length>n){if(t[n]!==FRAME_END)throw new Error("Invalid frame");return{type:a.type,channel:a.channel,size:n,payload:t.slice(0,n),rest:t.slice(n+1)}}}return!1};var headerPattern=Bits.matcher("class:16","_weight:16","size:64","flagsAndfields/binary"),methodPattern=Bits.matcher("id:32, args/binary"),HEARTBEAT={channel:0};module.exports.decodeFrame=function(e){var r=e.payload;switch(e.type){case FRAME_METHOD:var a=methodPattern(r),n=a.id,t=decode(n,a.args);return{id:n,channel:e.channel,fields:t};case FRAME_HEADER:var s=headerPattern(r);return n=s.class,t=decode(n,s.flagsAndfields),{id:n,channel:e.channel,size:s.size,fields:t};case FRAME_BODY:return{channel:e.channel,content:e.payload};case FRAME_HEARTBEAT:return HEARTBEAT;default:throw new Error("Unknown frame type "+e.type)}},module.exports.HEARTBEAT_BUF=Buffer.from([constants.FRAME_HEARTBEAT,0,0,0,0,0,0,constants.FRAME_END]),module.exports.HEARTBEAT=HEARTBEAT},{"./defs":161,bitsyntax:179,"safe-buffer":204}],165:[function(require,module,exports){"use strict";var inherits=require("util").inherits,EventEmitter=require("events").EventEmitter;function Heart(t,e,r){EventEmitter.call(this),this.interval=t;var i=t*module.exports.UNITS_TO_MS,n=this.emit.bind(this,"beat"),s=this.emit.bind(this,"timeout");this.sendTimer=setInterval(this.runHeartbeat.bind(this,e,n),i/2);var a=0;this.recvTimer=setInterval(this.runHeartbeat.bind(this,function(){return r()?(a=0,!0):++a<2},s),i)}module.exports.UNITS_TO_MS=1e3,inherits(Heart,EventEmitter),module.exports.Heart=Heart,Heart.prototype.clear=function(){clearInterval(this.sendTimer),clearInterval(this.recvTimer)},Heart.prototype.runHeartbeat=function(t,e){t()||e()}},{events:10,util:43}],166:[function(require,module,exports){(function(process,setImmediate){"use strict";require("util").inherits;var assert=require("assert"),schedule="function"==typeof setImmediate?setImmediate:process.nextTick;function Mux(e){this.newStreams=[],this.oldStreams=[],this.blocked=!1,this.scheduledRead=!1,this.out=e;var t=this;e.on("drain",function(){t.blocked=!1,t._readIncoming()})}Mux.prototype._readIncoming=function(){if(!this.blocked){var e=!0,t=this.out;r(this.newStreams),e?(assert.equal(0,this.newStreams.length),r(this.oldStreams)):(assert(this.newStreams.length>0,"Expect some new streams to remain"),this.oldStreams=this.oldStreams.concat(this.newStreams),this.newStreams=[]),this.blocked=!e}function r(r){var s;if(1===r.length){for(s=r.shift();e&&null!==(i=s.read());)e=t.write(i);e||r.push(s)}else for(;e&&(s=r.shift());){var i;null!==(i=s.read())&&(e=t.write(i),r.push(s))}}},Mux.prototype._scheduleRead=function(){var e=this;e.scheduledRead||(schedule(function(){e.scheduledRead=!1,e._readIncoming()}),e.scheduledRead=!0)},Mux.prototype.pipeFrom=function(e){var t=this;function r(){t.newStreams.push(e),t._scheduleRead()}function s(){e.removeListener("readable",r),e.removeListener("error",s),e.removeListener("end",s),e.removeListener("unpipeFrom",i)}function i(e){e===t&&s()}e.on("unpipeFrom",i),e.on("end",s),e.on("error",s),e.on("readable",r)},Mux.prototype.unpipeFrom=function(e){e.emit("unpipeFrom",this)},module.exports.Mux=Mux}).call(this,require("_process"),require("timers").setImmediate)},{_process:17,assert:2,timers:38,util:43}],167:[function(require,module,exports){(function(process,global,setImmediate){!function(t){if("object"==typeof exports&&void 0!==module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:void 0!==global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return i(e[s][1][t]||t)},u,u.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,e,n){"use strict";var r;try{throw new Error}catch(t){r=t}var i=t("./schedule"),o=t("./queue");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=i}function a(t){for(;t.length()>0;)c(t)}function c(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.prototype.invokeLater=function(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()},s.prototype.invoke=function(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()},s.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},s.prototype._drainQueues=function(){a(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,a(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=r},{"./queue":26,"./schedule":29}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(l),l instanceof t){var f={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:l};p._then(e,s,void 0,u,f),l._then(a,c,void 0,u,f),u._setOnCancel(l)}else u._resolveCallback(p);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var r=t("./util"),i=r.canEvaluate;function s(t){return function(t,n){var i;if(null!=t&&(i=t[n]),"function"!=typeof i){var o="Object "+r.classString(t)+" has no method '"+r.toString(n)+"'";throw new e.TypeError(o)}return i}(t,this.pop()).apply(t,this)}function a(t){return t[this]}function c(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}r.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(s,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=c;else if(i){var r=(void 0)(t);e=null!==r?r:a}else e=a;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,c=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,s,a){return function(c){var l=a._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p)return i(s).call(l,c)}else if("function"==typeof p){var f=i(p).call(l,c);if(f===o)return f;if(f)return i(s).call(l,c)}else if(n.isObject(c)){for(var h=r(p),_=0;_<h.length;++_){var d=h[_];if(p[d]!=c[d])continue t}return i(s).call(l,c)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,c=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=c,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,s,a,c,l=e._async,u=t("./errors").Warning,p=t("./util"),f=t("./es5"),h=p.canAttachTrace,_=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,v=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,y=null,g=null,m=!1,b=!(0==p.env("BLUEBIRD_DEBUG")),w=!(0==p.env("BLUEBIRD_WARNINGS")||!b&&!p.env("BLUEBIRD_WARNINGS")),C=!(0==p.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!p.env("BLUEBIRD_LONG_STACK_TRACES")),j=0!=p.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(w||!!p.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var t=[];function n(){for(var e=0;e<t.length;++e)t[e]._notifyUnhandledRejection();r()}function r(){t.length=0}c=function(e){t.push(e),setTimeout(n,1)},f.defineProperty(e,"_unhandledRejectionCheck",{value:n}),f.defineProperty(e,"_unhandledRejectionClear",{value:r})}(),e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),c(this))},e.prototype._notifyUnhandledRejectionIsHandled=function(){z("rejectionHandled",o,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),z("unhandledRejection",s,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return q(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var n=e._getContext();s=p.contextBind(n,t)},e.onUnhandledRejectionHandled=function(t){var n=e._getContext();o=p.contextBind(n,t)};var k=function(){};e.longStackTraces=function(){if(l.haveItemsQueued()&&!et.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!et.longStackTraces&&W()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace,i=e.prototype._dereferenceTrace;et.longStackTraces=!0,k=function(){if(l.haveItemsQueued()&&!et.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,e.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),et.longStackTraces=!1},e.prototype._captureStackTrace=U,e.prototype._attachExtraTrace=B,e.prototype._dereferenceTrace=M,n.activateLongStackTraces()}},e.hasLongStackTraces=function(){return et.longStackTraces&&W()};var E={unhandledrejection:{before:function(){var t=p.global.onunhandledrejection;return p.global.onunhandledrejection=null,t},after:function(t){p.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=p.global.onrejectionhandled;return p.global.onrejectionhandled=null,t},after:function(t){p.global.onrejectionhandled=t}}},F=function(){var t=function(t,e){if(!t)return!p.global.dispatchEvent(e);var n;try{return n=t.before(),!p.global.dispatchEvent(e)}finally{t.after(n)}};try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return p.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=new CustomEvent(e,{detail:n,cancelable:!0});return f.defineProperty(r,"promise",{value:n.promise}),f.defineProperty(r,"reason",{value:n.reason}),t(E[e],r)}}return"function"==typeof Event?(e=new Event("CustomEvent"),p.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=new Event(e,{cancelable:!0});return r.detail=n,f.defineProperty(r,"promise",{value:n.promise}),f.defineProperty(r,"reason",{value:n.reason}),t(E[e],r)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),p.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!0,n),t(E[e],r)})}catch(t){}return function(){return!1}}(),x=p.isNode?function(){return process.emit.apply(process,arguments)}:p.global?function(t){var e="on"+t.toLowerCase(),n=p.global[e];return!!n&&(n.apply(p.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(t,e){return{promise:e}}var P={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:T},R=function(t){var e=!1;try{e=x.apply(null,arguments)}catch(t){l.throwLater(t),e=!0}var n=!1;try{n=F(t,P[t].apply(null,arguments))}catch(t){l.throwLater(t),n=!0}return n||e};function S(){return!1}function O(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+p.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function A(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?p.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function H(){return this._onCancelField}function V(t){this._onCancelField=t}function D(){this._cancellationParent=void 0,this._onCancelField=void 0}function I(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}e.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&k()),"warnings"in t){var n=t.warnings;et.warnings=!!n,j=et.warnings,p.isObject(n)&&"wForgottenReturn"in n&&(j=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!et.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=D,e.prototype._propagateFrom=I,e.prototype._onCancel=H,e.prototype._setOnCancel=V,e.prototype._attachCancellationCallback=A,e.prototype._execute=O,L=I,et.cancellation=!0}if("monitoring"in t&&(t.monitoring&&!et.monitoring?(et.monitoring=!0,e.prototype._fireEvent=R):!t.monitoring&&et.monitoring&&(et.monitoring=!1,e.prototype._fireEvent=S)),"asyncHooks"in t&&p.nodeSupportsAsyncResource){var o=et.asyncHooks,s=!!t.asyncHooks;o!==s&&(et.asyncHooks=s,s?r():i())}return e},e.prototype._fireEvent=S,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._dereferenceTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var L=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function N(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function U(){this._trace=new Z(this._peekContext())}function B(t,e){if(h(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=Q(t);p.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),p.notEnumerableProp(t,"__stackCleaned__",!0)}}}function M(){this._trace=void 0}function q(t,n,r){if(et.warnings){var i,o=new u(t);if(n)r._attachExtraTrace(o);else if(et.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=Q(o);o.stack=s.message+"\n"+s.stack.join("\n")}R("warning",o)||G(o,"",!0)}}function $(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||y.test(r),o=i&&K(r);i&&!o&&(m&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function Q(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||y.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:$(e)}}function G(t,e,n){if("undefined"!=typeof console){var r;if(p.isObject(t)){var i=t.stack;r=e+g(i,t)}else r=e+String(t);"function"==typeof a?a(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function z(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){l.throwLater(t)}"unhandledRejection"===t?R(t,n,r)||i||G(n,"Unhandled rejection "):R(t,r)}function X(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():p.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function W(){return"function"==typeof tt}var K=function(){return!1},J=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Y(t){var e=t.match(J);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Z(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);tt(this,Z),e>32&&this.uncycle()}p.inherits(Z,Error),n.CapturedTrace=Z,Z.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var s=n[e[r].stack];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=r>0?e[r-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},Z.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=Q(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push($(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(a=s;a>=0;--a){var c=r[a];if(e[i]!==c)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),p.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),p.notEnumerableProp(t,"__stackCleaned__",!0)}};var tt=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():X(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,y=t,g=e;var n=Error.captureStackTrace;return K=function(t){return _.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return y=/@/,g=e,m=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(g=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?X(e):e.toString()},null):(y=t,g=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(t){console.warn(t)},p.isNode&&process.stderr.isTTY?a=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:p.isNode||"string"!=typeof(new Error).stack||(a=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var et={warnings:w,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return C&&e.longStackTraces(),{asyncHooks:function(){return et.asyncHooks},longStackTraces:function(){return et.longStackTraces},warnings:function(){return et.warnings},cancellation:function(){return et.cancellation},monitoring:function(){return et.monitoring},propagateFromFunction:function(){return L},boundValueFunction:function(){return N},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&j){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),c=$(a),l=c.length-1;l>=0;--l){var u=c[l];if(!d.test(u)){var p=u.match(v);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(c.length>0){var f=c[0];for(l=0;l<a.length;++l)if(a[l]===f){l>0&&(s="\n"+a[l-1]);break}}}var h="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(h,!0,e)}},setBounds:function(t,e){if(W()){for(var n,r,i=(t.stack||"").split("\n"),o=(e.stack||"").split("\n"),s=-1,a=-1,c=0;c<i.length;++c)if(l=Y(i[c])){n=l.fileName,s=l.line;break}for(c=0;c<o.length;++c){var l;if(l=Y(o[c])){r=l.fileName,a=l.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(K=function(t){if(_.test(t))return!0;var e=Y(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}},warn:q,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),q(n)},CapturedTrace:Z,fireDomEvent:F,fireGlobalEvent:x}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];return r instanceof t&&r.suppressUnhandledRejections(),this.caught(n,function(){return r})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,o=t("./es5"),s=o.freeze,a=t("./util"),c=a.inherits,l=a.notEnumerableProp;function u(t,e){function n(r){if(!(this instanceof n))return new n(r);l(this,"message","string"==typeof r?r:e),l(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var p=u("Warning","warning"),f=u("CancellationError","cancellation error"),h=u("TimeoutError","timeout error"),_=u("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=u("TypeError","type error"),i=u("RangeError","range error")}for(var d="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<d.length;++v)"function"==typeof Array.prototype[d[v]]&&(_.prototype[d[v]]=Array.prototype[d[v]]);o.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var y=0;function g(t){if(!(this instanceof g))return new g(t);l(this,"name","OperationalError"),l(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(l(this,"message",t.message),l(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}_.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return y--,e},c(g,Error);var m=Error.__BluebirdErrorTypes__;m||(m=s({CancellationError:f,TimeoutError:h,OperationalError:g,RejectionError:g,AggregateError:_}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.CancellationError,s=i.errorObj,a=t("./catch_filter")(r);function c(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function l(t){this.finallyHandler=t}function u(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function p(){return h.call(this,this.promise._target()._settledValue())}function f(t){if(!u(this,t))return s.e=t,s}function h(t){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),t);if(c===r)return c;if(void 0!==c){i._setReturnedNonUndefined();var h=n(c,i);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var _=new o("late cancellation observer");return i._attachExtraTrace(_),s.e=_,s}h.isPending()&&h._attachCancellationCallback(new l(this))}return h._then(p,f,void 0,this,void 0)}}}return i.isRejected()?(u(this),s.e=t,s):(u(this),t)}return c.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){u(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new c(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,h,h)},e.prototype.tap=function(t){return this._passThrough(t,1,h)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,h);var r,o=new Array(n-1),s=0;for(r=0;r<n-1;++r){var c=arguments[r];if(!i.isObject(c))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(c)));o[s++]=c}o.length=s;var l=arguments[r];return this._passThrough(a(o,l,this),1,void 0,h)},c}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./errors").TypeError,c=t("./util"),l=c.errorObj,u=c.tryCatch,p=[];function f(t,n,i,o){if(s.cancellation()){var a=new e(r),c=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new e(r))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(f,o),f.prototype._isResolved=function(){return null===this._promise},f.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=u(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},f.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=u(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=u(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(t){var n=this._promise;if(t===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=u(n[o])(t);if(r._popContext(),s===l){r._pushContext();var a=e.reject(l.e);return r._popContext(),a}var c=i(s,r);if(c instanceof e)return c}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=f,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("expecting a function but got "+c.classString(t));p.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new f(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util"),c=a.tryCatch,l=a.errorObj,u=e._async;function p(t,n,r,i){this.constructor$(t),this._promise._captureStackTrace();var s=e._getContext();if(this._callback=a.contextBind(s,n),this._preservedValues=i===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0),a.isArray(t))for(var c=0;c<t.length;++c){var l=t[c];l instanceof e&&l.suppressUnhandledRejections()}}function f(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+a.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+a.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(i.concurrency)));s=i.concurrency}return new p(t,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}a.inherits(p,n),p.prototype._asyncInit=function(){this._init$(void 0,-2)},p.prototype._init=function(){},p.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var p=this._promise,f=this._callback,h=p._boundValue();p._pushContext();var _=c(f).call(h,t,n,o),d=p._popContext();if(s.checkForgottenReturns(_,d,null!==a?"Promise.filter":"Promise.map",p),_===l)return this._reject(_.e),!0;var v=i(_,this._promise);if(v instanceof e){var y=(v=v._target())._bitField;if(0==(50397184&y))return u>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);_=v._value()}r[n]=_}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},p.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},p.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},p.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return f(this,t,e,null)},e.map=function(t,e,n,r){return f(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r,c=new e(n);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];r=s.isArray(l)?a(t).apply(u,l):a(t).call(u,l)}else r=a(t)();var p=c._popContext();return o.checkForgottenReturns(r,p,"Promise.try",c),c._resolveFromSyncValue(r),c},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,o=t("./errors").OperationalError,s=t("./es5"),a=/^(?:name|message|stack|cause)$/;function c(t){var e;if(function(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=s.keys(t),i=0;i<n.length;++i){var c=n[i];a.test(c)||(e[c]=t[c])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=c(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,o=n.errorObj;function s(t,e){if(!n.isArray(t))return a.call(this,t,e);var s=i(e).apply(this._boundValue(),[null].concat(t));s===o&&r.throwLater(s.e)}function a(t,e){var n=this._boundValue(),s=void 0===t?i(e).call(n,null):i(e).call(n,null,t);s===o&&r.throwLater(s.e)}function c(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var s=i(e).call(this._boundValue(),t);s===o&&r.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=a;void 0!==e&&Object(e).spread&&(n=s),this._then(n,c,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){var n=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},r=function(){return new O.PromiseInspection(this._target())},i=function(t){return O.reject(new y(t))};function o(){}var s={},a=t("./util");a.setReflectHandler(r);var c=function(){var t=process.domain;return void 0===t?null:t},l=function(){return{domain:c(),async:null}},u=a.isNode&&a.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,p=function(){return{domain:c(),async:new u("Bluebird::Promise")}},f=a.isNode?l:function(){return null};a.notEnumerableProp(O,"_getContext",f);var h=t("./es5"),_=t("./async"),d=new _;h.defineProperty(O,"_async",{value:d});var v=t("./errors"),y=O.TypeError=v.TypeError;O.RangeError=v.RangeError;var g=O.CancellationError=v.CancellationError;O.TimeoutError=v.TimeoutError,O.OperationalError=v.OperationalError,O.RejectionError=v.OperationalError,O.AggregateError=v.AggregateError;var m=function(){},b={},w={},C=t("./thenables")(O,m),j=t("./promise_array")(O,m,C,i,o),k=t("./context")(O),E=k.create,F=t("./debuggability")(O,k,function(){f=p,a.notEnumerableProp(O,"_getContext",p)},function(){f=l,a.notEnumerableProp(O,"_getContext",l)}),x=(F.CapturedTrace,t("./finally")(O,C,w)),T=t("./catch_filter")(w),P=t("./nodeback"),R=a.errorObj,S=a.tryCatch;function O(t){t!==m&&function(t,e){if(null==t||t.constructor!==O)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new y("expecting a function but got "+a.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function A(t){this.promise._resolveCallback(t)}function H(t){this.promise._rejectCallback(t,!1)}function V(t){var e=new O(m);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return O.prototype.toString=function(){return"[object Promise]"},O.prototype.caught=O.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),o=0;for(n=0;n<e-1;++n){var s=arguments[n];if(!a.isObject(s))return i("Catch statement predicate: expecting an object but got "+a.classString(s));r[o++]=s}if(r.length=o,"function"!=typeof(t=arguments[n]))throw new y("The last argument to .catch() must be a function, got "+a.toString(t));return this.then(void 0,T(r,t,this))}return this.then(void 0,t)},O.prototype.reflect=function(){return this._then(r,r,void 0,this,void 0)},O.prototype.then=function(t,e){if(F.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+a.classString(t);arguments.length>1&&(n+=", "+a.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},O.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},O.prototype.spread=function(t){return"function"!=typeof t?i("expecting a function but got "+a.classString(t)):this.all()._then(t,void 0,void 0,b,void 0)},O.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},O.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new j(this).promise()},O.prototype.error=function(t){return this.caught(a.originatesFromRejection,t)},O.getNewLibraryCopy=e.exports,O.is=function(t){return t instanceof O},O.fromNode=O.fromCallback=function(t){var e=new O(m);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=S(t)(P(e,n));return r===R&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},O.all=function(t){return new j(t).promise()},O.cast=function(t){var e=C(t);return e instanceof O||((e=new O(m))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},O.resolve=O.fulfilled=O.cast,O.reject=O.rejected=function(t){var e=new O(m);return e._captureStackTrace(),e._rejectCallback(t,!0),e},O.setScheduler=function(t){if("function"!=typeof t)throw new y("expecting a function but got "+a.classString(t));return d.setScheduler(t)},O.prototype._then=function(t,e,n,r,i){var o=void 0!==i,s=o?i:new O(m),c=this._target(),l=c._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var u=f();if(0!=(50397184&l)){var p,h,_=c._settlePromiseCtx;0!=(33554432&l)?(h=c._rejectionHandler0,p=t):0!=(16777216&l)?(h=c._fulfillmentHandler0,p=e,c._unsetRejectionIsUnhandled()):(_=c._settlePromiseLateCancellationObserver,h=new g("late cancellation observer"),c._attachExtraTrace(h),p=e),d.invoke(_,c,{handler:a.contextBind(u,p),promise:s,receiver:r,value:h})}else c._addCallbacks(t,e,s,r,u);return s},O.prototype._length=function(){return 65535&this._bitField},O.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},O.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},O.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},O.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},O.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},O.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},O.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},O.prototype._isFinal=function(){return(4194304&this._bitField)>0},O.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},O.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},O.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},O.prototype._setAsyncGuaranteed=function(){if(!d.hasCustomScheduler()){var t=this._bitField;this._bitField=t|(536870912&t)>>2^134217728}},O.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},O.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==s)return void 0===e&&this._isBound()?this._boundValue():e},O.prototype._promiseAt=function(t){return this[4*t-4+2]},O.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},O.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},O.prototype._boundValue=function(){},O.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=s),this._addCallbacks(e,n,r,i,null)},O.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=s),this._addCallbacks(n,r,i,o,null)},O.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=a.contextBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=a.contextBind(i,e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=a.contextBind(i,t)),"function"==typeof e&&(this[s+1]=a.contextBind(i,e))}return this._setLength(o+1),o},O.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},O.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(n(),!1);var r=C(t,this);if(!(r instanceof O))return this._fulfill(t);e&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var c=new g("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}else this._reject(n())}},O.prototype._rejectCallback=function(t,e,n){var r=a.ensureErrorObject(t),i=r===t;if(!i&&!n&&F.warnings()){var o="a promise was rejected with a non-error: "+a.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},O.prototype._resolveFromExecutor=function(t){if(t!==m){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},O.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===b?n&&"number"==typeof n.length?o=S(t).apply(this._boundValue(),n):(o=R).e=new y("cannot .spread() a non-array: "+a.classString(n)):o=S(t).call(e,n);var s=r._popContext();0==(65536&(i=r._bitField))&&(o===w?r._reject(n):o===R?r._rejectCallback(o.e,!1):(F.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},O.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},O.prototype._followee=function(){return this._rejectionHandler0},O.prototype._setFollowee=function(t){this._rejectionHandler0=t},O.prototype._settlePromise=function(t,e,n,i){var s=t instanceof O,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(s&&t._invokeInternalOnCancel(),n instanceof x&&n.isFinallyHandler()?(n.cancelPromise=t,S(e).call(n,i)===R&&t._reject(R.e)):e===r?t._fulfill(r.call(n)):n instanceof o?n._promiseCancelled(t):s||t instanceof j?t._cancel():n.cancel()):"function"==typeof e?s?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof o?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):s&&(c&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(i):t._reject(i))},O.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof O?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof O&&n._reject(i)},O.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},O.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},O.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},O.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():d.settlePromises(this),this._dereferenceTrace())}},O.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return d.fatalError(t,a.isNode);(65535&e)>0?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},O.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},O.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},O.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},O.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&h.defineProperty(O.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),O.defer=O.pending=function(){return F.deprecated("Promise.defer","new Promise"),{promise:new O(m),resolve:A,reject:H}},a.notEnumerableProp(O,"_makeSelfResolutionError",n),t("./method")(O,m,C,i,F),t("./bind")(O,m,C,F),t("./cancel")(O,j,i,F),t("./direct_resolve")(O),t("./synchronous_inspection")(O),t("./join")(O,j,C,m,d),O.Promise=O,O.version="3.7.2",t("./call_get.js")(O),t("./generators.js")(O,i,m,C,o,F),t("./map.js")(O,j,i,C,m,F),t("./nodeify.js")(O),t("./promisify.js")(O,m),t("./props.js")(O,j,C,i),t("./race.js")(O,m,C,i),t("./reduce.js")(O,j,i,C,m,F),t("./settle.js")(O,j,F),t("./some.js")(O,j,i),t("./timers.js")(O,m,F),t("./using.js")(O,i,C,E,m,F),t("./any.js")(O),t("./each.js")(O,m),t("./filter.js")(O,m),a.toFastProperties(O),a.toFastProperties(O.prototype),V({a:1}),V({b:2}),V({c:3}),V(1),V(function(){}),V(void 0),V(!1),V(new O(m)),F.setBounds(_.firstLineError,a.lastLineError),O}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util");function a(t){var r=this._promise=new e(n);t instanceof e&&(r._propagateFrom(t,3),t.suppressUnhandledRejections()),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.isArray,s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(n,o){var a=r(this._values,this._promise);if(a instanceof e){var c=(a=a._target())._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(o){case-2:return[];case-3:return{};case-6:return new Map}}());else{var l=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(l,!1)}},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var c=r(t[a],i);s=c instanceof e?(c=c._target())._bitField:null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),o=t("./nodeback"),s=i.withAppended,a=i.maybeWrapAsError,c=i.canEvaluate,l=t("./errors").TypeError,u={__isPromisified__:!0},p=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),f=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function h(t){return!p.test(t)}function _(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function d(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,u);return!!r&&_(r)}function v(t,e,n,r){for(var o=i.inheritedDataKeys(t),s=[],a=0;a<o.length;++a){var c=o[a],u=t[c],p=r===f||f(c,u,t);"function"!=typeof u||_(u)||d(t,c,e)||!r(c,u,t,p)||s.push(c,u)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(s,e,n),s}var g=function(t){return t.replace(/([$])/,"\\$")},m=c?void 0:function(t,c,l,u,p,f){var h=function(){return this}(),_=t;function d(){var i=c;c===r&&(i=this);var l=new e(n);l._captureStackTrace();var u="string"==typeof _&&this!==h?this[_]:t,p=o(l,f);try{u.apply(i,s(arguments,p))}catch(t){l._rejectCallback(a(t),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return"string"==typeof _&&(t=u),i.notEnumerableProp(d,"__isPromisified__",!0),d};function b(t,e,n,o,s){for(var a=new RegExp(g(e)+"$"),c=v(t,e,a,n),l=0,u=c.length;l<u;l+=2){var p=c[l],f=c[l+1],h=p+e;if(o===m)t[h]=m(p,r,p,f,e,s);else{var _=o(f,function(){return m(p,r,p,f,e,s)});i.notEnumerableProp(_,"__isPromisified__",!0),t[h]=_}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new l("expecting a function but got "+i.classString(t));if(_(t))return t;var n=function(t,e,n){return m(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?r:e.context,!!e.multiArgs);return i.copyDescriptors(t,n,h),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=f);var s=e.promisifier;if("function"!=typeof s&&(s=m),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(t),c=0;c<a.length;++c){var u=t[a[c]];"constructor"!==a[c]&&i.isClass(u)&&(b(u.prototype,r,o,s,n),b(u,r,o,s,n))}return b(t,r,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,s=t("./util"),a=s.isObject,c=t("./es5");"function"==typeof Map&&(o=Map);var l=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function u(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=l(t),n=!0;else{var r=c.keys(t),i=r.length;e=new Array(2*i);for(var s=0;s<i;++s){var a=r[s];e[s]=t[a],e[s+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function p(t){var n,o=r(t);return a(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new u(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(u,n),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],s=t[r];e.set(i,s)}return e}(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return p(this)},e.props=function(t){return p(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+0],t[o+0]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=function(t){return t.then(function(e){return a(e,t)})};function a(t,a){var c=r(t);if(c instanceof e)return s(c);if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var l=new e(n);void 0!==a&&l._propagateFrom(a,3);for(var u=l._fulfill,p=l._reject,f=0,h=t.length;f<h;++f){var _=t[f];(void 0!==_||f in t)&&e.cast(_)._then(u,p,void 0,l,null)}return l}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util"),c=a.tryCatch;function l(t,n,r,i){this.constructor$(t);var s=e._getContext();this._fn=a.contextBind(s,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function p(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+a.classString(e)):new l(t,e,n,i).promise()}function f(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(t){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var a=i._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}a.inherits(l,n),l.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},l.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},l.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},l.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n;for(var o=r;o<i;++o){var s=t[o];s instanceof e&&s.suppressUnhandledRejections()}if(!n.isRejected())for(;r<i;++r){var a={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(f,void 0,void 0,a,void 0),0==(127&r)&&n._setNoAsyncGuarantee()}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},e.prototype.reduce=function(t,e){return p(this,t,e,null)},e.reduce=function(t,e,n,r){return p(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,a=process.nextTick;r=i.isRecentNode?function(t){s.call(global,t)}:function(t){a.call(process,t)}}else if("function"==typeof o&&"function"==typeof o.resolve){var c=o.resolve();r=function(t){c.then(t)}}else r="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");return new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e),function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(t,e),n||(n=!0,r.classList.toggle("foo"))}}():void 0!==setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new o(t).promise()},e.allSettled=function(t){return new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=t("./errors").RangeError,s=t("./errors").AggregateError,a=i.isArray,c={};function l(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(l,n),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(t){this._howMany=t},l.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(t){this._values.push(t)},l.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return u(t,e)},e.prototype.some=function(t){return u(this,t)},e._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,o=r.isObject,s={}.hasOwnProperty;return function(t,a){if(o(t)){if(t instanceof e)return t;var c=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(c===i){a&&a._pushContext();var l=e.reject(c.e);return a&&a._popContext(),l}if("function"==typeof c)return function(t){try{return s.call(t,"_promise0")}catch(t){return!1}}(t)?(l=new e(n),t._then(l._fulfill,l._reject,void 0,l,null),l):function(t,o,s){var a=new e(n),c=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var l=!0,u=r.tryCatch(o).call(t,function(t){a&&(a._resolveCallback(t),a=null)},function(t){a&&(a._rejectCallback(t,l,!0),a=null)});return l=!1,a&&u===i&&(a._rejectCallback(u.e,!0,!0),a=null),c}(t,c,a)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.TimeoutError;function s(t){this.handle=t}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,i){var o,c;return void 0!==i?(o=e.resolve(i)._then(a,null,null,t,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(n),c=setTimeout(function(){o._fulfill()},+t),r.cancellation()&&o._setOnCancel(new s(c)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function l(t){return clearTimeout(this.handle),t}function u(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return c(t,this)},e.prototype.timeout=function(t,e){var n,a;t=+t;var c=new s(setTimeout(function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,a)},t));return r.cancellation()?(a=this.then(),(n=a._then(l,u,void 0,c,void 0))._setOnCancel(c)):n=this._then(l,u,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util"),c=t("./errors").TypeError,l=t("./util").inherits,u=a.errorObj,p=a.tryCatch,f={};function h(t){setTimeout(function(){throw t},0)}function _(t,n){var i=0,s=t.length,a=new e(o);return function o(){if(i>=s)return a._fulfill();var c=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(c instanceof e&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),t.promise)}catch(t){return h(t)}if(c instanceof e)return c._then(o,h,null,null,null)}o()}(),a}function d(t,e,n){this._data=t,this._promise=e,this._context=n}function v(t,e,n){this.constructor$(t,e,n)}function y(t){return d.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function g(t){this.length=t,this.promise=null,this[t-1]=null}d.prototype.data=function(){return this._data},d.prototype.promise=function(){return this._promise},d.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():f},d.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==f?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},d.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},l(v,d),v.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},g.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+a.classString(o));var c=!0;2===t&&Array.isArray(arguments[0])?(t=(i=arguments[0]).length,c=!1):(i=arguments,t--);for(var l=new g(t),f=0;f<t;++f){var h=i[f];if(d.isDisposer(h)){var v=h;(h=h.promise())._setDisposable(v)}else{var m=r(h);m instanceof e&&(h=m._then(y,null,null,{resources:l,index:f},void 0))}l[f]=h}var b=new Array(l.length);for(f=0;f<b.length;++f)b[f]=e.resolve(l[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return u.e=n.error(),u;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),o=p(o);var r=c?o.apply(void 0,t):o(t),i=C._popContext();return s.checkForgottenReturns(r,i,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return _(l,t)});return l.promise=C,C._setOnCancel(l),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new v(t,this,i());throw new c}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";var s,r=t("./es5"),i="undefined"==typeof navigator,o={e:{}},a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:void 0!==this?this:null;function c(){try{var t=s;return s=null,t.apply(this,arguments)}catch(t){return o.e=t,o}}function p(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function v(t,e,n){if(p(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return r.defineProperty(t,e,i),t}var g=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(r.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var i=[],o=Object.create(null);null!=t&&!e(t);){var s;try{s=n(t)}catch(t){return i}for(var a=0;a<s.length;++a){var c=s[a];if(!o[c]){o[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&i.push(c)}}t=r.getPrototypeOf(t)}return i}}var i={}.hasOwnProperty;return function(n){if(e(n))return[];var r=[];t:for(var o in n)if(i.call(n,o))r.push(o);else{for(var s=0;s<t.length;++s)if(i.call(t[s],o))continue t;r.push(o)}return r}}(),m=/this\s*\.\s*\S+\s*=/;var C=/^[a-z$_][a-z$_0-9]*$/i;function E(t){try{return t+""}catch(t){return"[no string representation]"}}function F(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function P(t){return F(t)&&r.propertyIsWritable(t,"stack")}var R="stack"in new Error?function(t){return P(t)?t:new Error(E(t))}:function(t){if(P(t))return t;try{throw new Error(E(t))}catch(t){return t}};function S(t){return{}.toString.call(t)}var A=function(t){return r.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var H="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};A=function(t){return r.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?H(t):null}}var I,V=void 0!==process&&"[object process]"===S(process).toLowerCase(),D=void 0!==process&&void 0!==process.env;var M,B={setReflectHandler:function(t){I=t},isClass:function(t){try{if("function"==typeof t){var e=r.names(t.prototype),n=r.isES5&&e.length>1,i=e.length>0&&!(1===e.length&&"constructor"===e[0]),o=m.test(t+"")&&r.names(t).length>0;if(n||i||o)return!0}return!1}catch(t){return!1}},isIdentifier:function(t){return C.test(t)},inheritedDataKeys:g,getDataPropertyOrDefault:function(t,e,n){if(!r.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0},thrower:function(t){throw t},isArray:r.isArray,asArray:A,notEnumerableProp:v,isPrimitive:p,isObject:function(t){return"function"==typeof t||"object"==typeof t&&null!==t},isError:F,canEvaluate:i,errorObj:o,tryCatch:function(t){return s=t,c},inherits:function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype},withAppended:function(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i},maybeWrapAsError:function(t){return p(t)?new Error(E(t)):t},toFastProperties:function(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.foo}return r(),r(),t},filledRange:function(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r},toString:E,canAttachTrace:P,ensureErrorObject:R,originatesFromRejection:function(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)},markAsOriginatingFromRejection:function(t){try{v(t,"isOperational",!0)}catch(t){}},classString:S,copyDescriptors:function(t,e,n){for(var i=r.names(t),o=0;o<i.length;++o){var s=i[o];if(n(s))try{r.defineProperty(e,s,r.getDescriptor(t,s))}catch(t){}}},isNode:V,hasEnvVariables:D,env:function(t){return D?process.env[t]:void 0},global:a,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===S(new Promise(function(){})))return Promise}catch(t){}},contextBind:function(t,e){if(null===t||"function"!=typeof e||e===I)return e;null!==t.domain&&(e=t.domain.bind(e));var n=t.async;if(null!==n){var r=e;e=function(){var t=new Array(2).concat([].slice.call(arguments));return t[0]=r,t[1]=this,n.runInAsyncScope.apply(n,t)}}return e}};B.isRecentNode=B.isNode&&(process.versions&&process.versions.node?M=process.versions.node.split(".").map(Number):process.version&&(M=process.version.split(".").map(Number)),0===M[0]&&M[1]>10||M[0]>0),B.nodeSupportsAsyncResource=B.isNode&&function(){var e=!1;try{e="function"==typeof t("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e}(),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(t){B.lastLineError=t}e.exports=B},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},require("timers").setImmediate)},{_process:17,timers:38}],168:[function(require,module,exports){module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)}},{}],169:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":170}],170:[function(require,module,exports){(function(process){module.exports=Duplex;var objectKeys=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}util.inherits(Duplex,Readable),function(e,t){for(var i=0,r=e.length;i<r;i++)t(e[i],i)}(objectKeys(Writable.prototype),function(e){Duplex.prototype[e]||(Duplex.prototype[e]=Writable.prototype[e])})}).call(this,require("_process"))},{"./_stream_readable":172,"./_stream_writable":174,_process:17,"core-util-is":191,inherits:193}],171:[function(require,module,exports){module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,i){i(null,r)}},{"./_stream_transform":173,"core-util-is":191,inherits:193}],172:[function(require,module,exports){(function(process){module.exports=Readable;var isArray=require("isarray"),Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;EE.listenerCount||(EE.listenerCount=function(e,t){return e.listeners(t).length});var StringDecoder,Stream=require("stream"),util=require("core-util-is");util.inherits=require("inherits");var debug=require("util");function ReadableState(e,t){var n=require("./_stream_duplex"),r=(e=e||{}).highWaterMark,i=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(require("./_stream_duplex"),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,Stream.call(this)}function readableAddChunk(e,t,n,r,i){var a=function(e,t){var n=null;return util.isBuffer(t)||util.isString(t)||util.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(a)e.emit("error",a);else if(util.isNullOrUndefined(n))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var d=new Error("stream.push() after EOF");e.emit("error",d)}else t.endEmitted&&i?(d=new Error("stream.unshift() after end event"),e.emit("error",d)):(!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e)),function(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(function(){!function(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}(e,t)}))}(e,t));else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}debug=debug&&debug.debuglog?debug.debuglog("stream"):function(){},util.inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return util.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding)!==n.encoding&&(e=new Buffer(e,t),t=""),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){return readableAddChunk(this,this._readableState,e,"",!0)},Readable.prototype.setEncoding=function(e){return StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||util.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?process.nextTick(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(function(){!function(e,t){t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}(e,t)}))}function flow(e){var t=e._readableState;if(debug("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function fromList(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(d)n=r.shift();else if(!e||e>=i)n=a?r.join(""):Buffer.concat(r,i),r.length=0;else if(e<r[0].length)n=(s=r[0]).slice(0,e),r[0]=s.slice(e);else if(e===r[0].length)n=r.shift();else{n=a?"":new Buffer(e);for(var o=0,l=0,u=r.length;l<u&&o<e;l++){var s=r[0],h=Math.min(e-o,s.length);a?n+=s.slice(0,h):s.copy(n,o,0,h),h<s.length?r[0]=s.slice(h):r.shift(),o+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,process.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}Readable.prototype.read=function(e){debug("read",e);var t=this._readableState,n=e;if((!util.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var r,i=t.needReadable;return debug("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",i=!0),(t.ended||t.reading)&&debug("reading or ended",i=!1),i&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=howMuchToRead(n,t)),r=e>0?fromList(e,t):null,util.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&endReadable(this),util.isNull(r)||this.emit("data",r),r},Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,debug("pipe count=%d opts=%j",r.pipesCount,t);var i=t&&!1===t.end||e===process.stdout||e===process.stderr?l:d;function a(e){debug("onunpipe"),e===n&&l()}function d(){debug("onend"),e.end()}r.endEmitted?process.nextTick(i):n.once("end",i),e.on("unpipe",a);var o=function(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EE.listenerCount(e,"data")&&(t.flowing=!0,flow(e))}}(n);function l(){debug("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",o),e.removeListener("error",s),e.removeListener("unpipe",a),n.removeListener("end",d),n.removeListener("end",l),n.removeListener("data",u),!r.awaitDrain||e._writableState&&!e._writableState.needDrain||o()}function u(t){debug("ondata"),!1===e.write(t)&&(debug("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,n.pause())}function s(t){debug("onerror",t),b(),e.removeListener("error",s),0===EE.listenerCount(e,"error")&&e.emit("error",t)}function h(){e.removeListener("finish",f),b()}function f(){debug("onfinish"),e.removeListener("close",h),b()}function b(){debug("unpipe"),n.unpipe(e)}return e.on("drain",o),n.on("data",u),e._events&&e._events.error?isArray(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",h),e.once("finish",f),e.emit("pipe",n),r.flowing||(debug("pipe resume"),n.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}return-1===(i=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&emitReadable(this);else{var i=this;process.nextTick(function(){debug("readable nexttick read 0"),i.read(0)})}}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,e.reading||(debug("resume read 0"),this.read(0)),resume(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var i in e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){debug("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)&&(r.push(i)||(n=!0,e.pause()))}),e)util.isFunction(e[i])&&util.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},r},Readable._fromList=fromList}).call(this,require("_process"))},{"./_stream_duplex":170,_process:17,buffer:8,"core-util-is":191,events:10,inherits:193,isarray:168,stream:36,"string_decoder/":176,util:7}],173:[function(require,module,exports){module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");function TransformState(r,t){this.afterTransform=function(r,n){return function(r,t,n){var e=r._transformState;e.transforming=!1;var i=e.writecb;if(!i)return r.emit("error",new Error("no writecb in Transform class"));e.writechunk=null,e.writecb=null,util.isNullOrUndefined(n)||r.push(n),i&&i(t);var a=r._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&r._read(a.highWaterMark)}(t,r,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState=new TransformState(r,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){util.isFunction(this._flush)?this._flush(function(r){done(t,r)}):done(t)})}function done(r,t){if(t)return r.emit("error",t);var n=r._writableState,e=r._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(e.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var i=this._readableState;(e.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;util.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":170,"core-util-is":191,inherits:193}],174:[function(require,module,exports){(function(process){module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");function WritableState(e,i){var t=require("./_stream_duplex"),r=(e=e||{}).highWaterMark,n=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.objectMode=!!e.objectMode,i instanceof t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,i){var t=e._writableState,r=t.sync,n=t.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(t),i)!function(e,i,t,r,n){t?process.nextTick(function(){i.pendingcb--,n(r)}):(i.pendingcb--,n(r)),e._writableState.errorEmitted=!0,e.emit("error",r)}(e,t,r,i,n);else{var f=needFinish(e,t);f||t.corked||t.bufferProcessing||!t.buffer.length||clearBuffer(e,t),r?process.nextTick(function(){afterWrite(e,t,f,n)}):afterWrite(e,t,f,n)}}(i,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function Writable(e){var i=require("./_stream_duplex");if(!(this instanceof Writable||this instanceof i))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,Stream.call(this)}function writeOrBuffer(e,i,t,r,n){t=function(e,i,t){return!e.objectMode&&!1!==e.decodeStrings&&util.isString(i)&&(i=new Buffer(i,t)),i}(i,t,r),util.isBuffer(t)&&(r="buffer");var f=i.objectMode?1:t.length;i.length+=f;var o=i.length<i.highWaterMark;return o||(i.needDrain=!0),i.writing||i.corked?i.buffer.push(new function(e,i,t){this.chunk=e,this.encoding=i,this.callback=t}(t,r,n)):doWrite(e,i,!1,f,t,r,n),o}function doWrite(e,i,t,r,n,f,o){i.writelen=r,i.writecb=o,i.writing=!0,i.sync=!0,t?e._writev(n,i.onwrite):e._write(n,f,i.onwrite),i.sync=!1}function afterWrite(e,i,t,r){t||function(e,i){0===i.length&&i.needDrain&&(i.needDrain=!1,e.emit("drain"))}(e,i),i.pendingcb--,r(),finishMaybe(e,i)}function clearBuffer(e,i){if(i.bufferProcessing=!0,e._writev&&i.buffer.length>1){for(var t=[],r=0;r<i.buffer.length;r++)t.push(i.buffer[r].callback);i.pendingcb++,doWrite(e,i,!0,i.length,i.buffer,"",function(e){for(var r=0;r<t.length;r++)i.pendingcb--,t[r](e)}),i.buffer=[]}else{for(r=0;r<i.buffer.length;r++){var n=i.buffer[r],f=n.chunk,o=n.encoding,u=n.callback,s=i.objectMode?1:f.length;if(doWrite(e,i,!1,s,f,o,u),i.writing){r++;break}}r<i.buffer.length?i.buffer=i.buffer.slice(r):i.buffer.length=0}i.bufferProcessing=!1}function needFinish(e,i){return i.ending&&0===i.length&&!i.finished&&!i.writing}function prefinish(e,i){i.prefinished||(i.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,i){var t=needFinish(0,i);return t&&(0===i.pendingcb?(prefinish(e,i),i.finished=!0,e.emit("finish")):prefinish(e,i)),t}util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,i,t){var r=this._writableState,n=!1;return util.isFunction(i)&&(t=i,i=null),util.isBuffer(e)?i="buffer":i||(i=r.defaultEncoding),util.isFunction(t)||(t=function(){}),r.ended?function(e,i,t){var r=new Error("write after end");e.emit("error",r),process.nextTick(function(){t(r)})}(this,0,t):function(e,i,t,r){var n=!0;if(!(util.isBuffer(t)||util.isString(t)||util.isNullOrUndefined(t)||i.objectMode)){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),process.nextTick(function(){r(f)}),n=!1}return n}(this,r,e,t)&&(r.pendingcb++,n=writeOrBuffer(this,r,e,i,t)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||clearBuffer(this,e))},Writable.prototype._write=function(e,i,t){t(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,i,t){var r=this._writableState;util.isFunction(e)?(t=e,e=null,i=null):util.isFunction(i)&&(t=i,i=null),util.isNullOrUndefined(e)||this.write(e,i),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,i,t){i.ending=!0,finishMaybe(e,i),t&&(i.finished?process.nextTick(t):e.once("finish",t)),i.ended=!0}(this,r,t)}}).call(this,require("_process"))},{"./_stream_duplex":170,_process:17,buffer:8,"core-util-is":191,inherits:193,stream:36}],175:[function(require,module,exports){module.exports=require("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":171}],176:[function(require,module,exports){var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i,h=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,h),h-=this.charReceived),h=(t+=e.toString(this.encoding,0,h)).length-1,(i=t.charCodeAt(h))>=55296&&i<=56319){var c=this.surrogateSize;return this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),e.copy(this.charBuffer,0,0,c),t.substring(0,h)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t}},{buffer:8}],177:[function(require,module,exports){module.exports={_from:"amqplib",_id:"amqplib@0.5.5",_inBundle:!1,_integrity:"sha512-sWx1hbfHbyKMw6bXOK2k6+lHL8TESWxjAx5hG8fBtT7wcxoXNIsFxZMnFyBjxt3yL14vn7WqBDe5U6BGOadtLg==",_location:"/amqplib",_phantomChildren:{"core-util-is":"1.0.2",inherits:"2.0.3"},_requested:{type:"tag",registry:!0,raw:"amqplib",name:"amqplib",escapedName:"amqplib",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/amqplib/-/amqplib-0.5.5.tgz",_shasum:"698f0cb577e0591954a90572fcb3b8998a76fd40",_spec:"amqplib",_where:"/Users/sasadjolic/Work/repos/persistr/persistr-js",author:{name:"Michael Bridgen",email:"mikeb@squaremobius.net"},bugs:{url:"https://github.com/squaremo/amqp.node/issues"},bundleDependencies:!1,dependencies:{bitsyntax:"~0.1.0",bluebird:"^3.5.2","buffer-more-ints":"~1.0.0","readable-stream":"1.x >=1.1.9","safe-buffer":"~5.1.2","url-parse":"~1.4.3"},deprecated:!1,description:"An AMQP 0-9-1 (e.g., RabbitMQ) library and client.",devDependencies:{claire:"0.4.1",istanbul:"0.1.x",mocha:"^3.5.3","uglify-js":"2.6.x"},engines:{node:">=0.8 <=12"},homepage:"http://squaremo.github.io/amqp.node/",keywords:["AMQP","AMQP 0-9-1","RabbitMQ"],license:"MIT",main:"./channel_api.js",name:"amqplib",repository:{type:"git",url:"git+https://github.com/squaremo/amqp.node.git"},scripts:{prepare:"make",test:"make test"},version:"0.5.5"}},{}],178:[function(require,module,exports){"use strict";function AsyncQueue(){this.jobs=Array.prototype.slice.call(arguments),this.running=!1}AsyncQueue.prototype={add:function(t){return t&&(arguments.length>1?this.jobs=this.jobs.concat(Array.prototype.slice.call(arguments)):this.jobs.push(t)),this},run:function(t){return this.add(t),this.running||this.start(),this},start:function(){this.running=!0,this.next(!1)},success:function(){this.next(!1)},fail:function(t){t=t||"Job failed",this.next(t)},next:function(t){if(this.jobs.length){var s=this.jobs.shift();try{s(t,this)}catch(t){this.next(t)}}else this.running=!1}},module.exports=AsyncQueue},{}],179:[function(require,module,exports){"use strict";module.exports.parse=require("./lib/parse").parse,module.exports.match=require("./lib/interp").match,module.exports.build=require("./lib/constructor").build,module.exports.write=require("./lib/constructor").write,module.exports.matcher=module.exports.compile=require("./lib/compile").compile,module.exports.builder=require("./lib/compile").compile_builder},{"./lib/compile":180,"./lib/constructor":181,"./lib/interp":182,"./lib/parse":183}],180:[function(require,module,exports){"use strict";require("buffer-more-ints");var $=require("util").format,parse=require("./parse").parse,interp=require("./interp"),parse_int=interp.parse_int,parse_float=interp.parse_float,construct=require("./constructor"),write_int=construct.write_int,write_float=construct.write_float,Buffer=require("safe-buffer").Buffer,lines=[];function $start(){lines=[]}function $line(){lines.push($.apply(null,arguments))}function $result(){return lines.join("\n")}function bits_expr(e){return"string"==typeof e.size?$("%s * %d",var_name(e.size),e.unit):(e.size*e.unit).toString()}function match_seg(e){if("_"===e.name)!function(e){if("string"==typeof e.size)$line("var skipbits = %s * %d;",var_name(e.size),e.unit),$line("if (offset + skipbits > binsize) { return false; }"),$line("else { offset += skipbits; }");else if(!0===e.size)$line("if (offset % 8 === 0) { offset = binsize; }"),$line("else { return false; }");else{var i=e.unit*e.size;$line("if (offset + %d > binsize) { return false; }",i),$line("else { offset += %d; }",i)}}(e);else{switch(e.type){case"integer":case"float":!function(e){$line("bits = %s;\n",bits_expr(e));var i="integer"===e.type?"parse_int":"parse_float",n=e.bigendian,t=e.signed;$line("byteoffset = offset / 8; offset += bits"),$line("if (offset > binsize) { return false; }"),$line("else { result = %s(bin, byteoffset, bits / 8, %s, %s); }",i,n,t)}(e);break;case"binary":!function(e){$line("byteoffset = offset / 8;"),!0===e.size?($line("offset = binsize;"),$line("result = bin.slice(byteoffset);")):($line("bits = %s;",bits_expr(e)),$line("offset += bits;"),$line("if (offset > binsize) { return false; }"),$line("else { result = bin.slice(byteoffset,","byteoffset + bits / 8); }"))}(e);break;case"string":!function(e){$line("byteoffset = offset / 8;");var i=e.value.length;$line("offset += %d;",8*i),$line("if (offset > binsize) { return false; }"),$line("else { result = bin.toString(byteoffset,",$("byteoffset + %d); }",i))}(e)}$line("if (result === false) return false;"),e.name?($line("else if (%s !== undefined) {",var_name(e.name)),$line("if (%s != result) return false;",var_name(e.name)),$line("}"),$line("else %s = result;",var_name(e.name))):$line("else if (result != %s) return false;",JSON.stringify(e.value))}}function var_name(e){return"var_"+e}function compile_pattern(e){$start(),$line("return function(binary, env) {"),$line("'use strict';"),$line("var bin = binary, env = env || {};"),$line("var offset = 0, binsize = bin.length * 8;"),$line("var bits, result, byteoffset;");for(var i=function(e){for(var i={},n=0;n<e.length;n++){var t=e[n].name;t&&"_"!==t&&(i[t]=!0),"string"==typeof(t=e[n].size)&&(i[t]=!0)}return Object.keys(i)}(e),n=0;n<i.length;n++)$line("var %s = env['%s'];",var_name(f=i[n]),f);for(var t=e.length,s=0;s<t;s++){var r=e[s];$line("// "+JSON.stringify(r)),match_seg(r)}for($line("if (offset == binsize) {"),$line("return {"),n=0;n<i.length;n++){var f;$line("%s: %s,",f=i[n],var_name(f))}return $line("};"),$line("}"),$line("else return false;"),$line("}"),new Function("parse_int","parse_float",$result())(parse_int,parse_float)}function write_seg(e){switch(e.type){case"string":$line("offset += buf.write(%s, offset, 'utf8');",JSON.stringify(e.value));break;case"binary":$line("val = bindings['%s'];",e.name),!0===e.size?$line("size = val.length;"):"string"==typeof e.size?$line("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):$line("size = %d;",e.size*e.unit/8),$line("val.copy(buf, offset, 0, size);"),$line("offset += size;");break;case"integer":case"float":!function(e){e.name?$line("val = bindings['%s'];",e.name):$line("val = %d",e.value);var i="integer"===e.type?"write_int":"write_float";"string"==typeof e.size?$line("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):$line("size = %d;",e.size*e.unit/8),$line("%s(buf, val, offset, size, %s);",i,e.bigendian),$line("offset += size;")}(e)}}function compile_ctor(e){return $start(),$line("return function(bindings) {"),$line("'use strict';"),function(e){for(var i=[],n=0,t=0;t<e.length;t++)"string"==typeof(r=e[t]).size||!0===r.size?i.push(r):"string"===r.type?n+=Buffer.byteLength(r.value):n+=r.size*r.unit/8;if($line("var buffersize = %d;",n),i.length>0)for(var s=0;s<i.length;s++){var r;!0===(r=i[s]).size?$line("buffersize += bindings['%s'].length;",r.name):$line("buffersize += (bindings['%s'] * %d) / 8;",r.size,r.unit)}}(e),$line("var buf = Buffer.alloc(buffersize);"),$line("var offset = 0;"),function(e){$line("var val, size;");for(var i=e.length,n=0;n<i;n++){var t=e[n];$line("// %s",JSON.stringify(t)),write_seg(t)}}(e),$line("return buf;"),$line("}"),new Function("write_int","write_float","Buffer",$result())(write_int,write_float,Buffer)}module.exports.compile_pattern=compile_pattern,module.exports.compile=function(){var e=[].join.call(arguments,",");return compile_pattern(parse(e))},module.exports.compile_builder=function(){var e=[].join.call(arguments,",");return compile_ctor(parse(e))}},{"./constructor":181,"./interp":182,"./parse":183,"buffer-more-ints":190,"safe-buffer":204,util:43}],181:[function(require,module,exports){"use strict";var ints=require("buffer-more-ints"),Buffer=require("safe-buffer").Buffer;function write(e,t,r,i){for(var n=0,a=r.length;n<a;n++){var u=r[n];switch(u.type){case"string":t+=e.write(u.value,t,"utf8");break;case"binary":t+=writeBinary(u,e,t,i);break;case"integer":t+=writeInteger(u,e,t,i);break;case"float":t+=writeFloat(u,e,t,i)}}return t}function build(e,t){var r=function(e,t){for(var r=0,i=0,n=e.length;i<n;i++)r+=size_of_segment(e[i],t);return r}(e,t),i=Buffer.alloc(r);return write(i,0,e,t),i}function size_of_segment(e,t){return"string"==typeof e.size?t[e.size]*e.unit/8:"string"===e.type?Buffer.byteLength(e.value,"utf8"):"binary"===e.type&&!0===e.size?t[e.name].length:e.size*e.unit/8}function writeBinary(e,t,r,i){var n=i[e.name],a=size_of_segment(e,i);return n.copy(t,r,0,a),a}function writeInteger(e,t,r,i){return write_int(t,e.name?i[e.name]:e.value,r,size_of_segment(e,i),e.bigendian)}function write_int(e,t,r,i,n){switch(i){case 1:e.writeUInt8(t,r);break;case 2:n?e.writeUInt16BE(t,r):e.writeUInt16LE(t,r);break;case 4:n?e.writeUInt32BE(t,r):e.writeUInt32LE(t,r);break;case 8:n?ints.writeUInt64BE(e,t,r):ints.writeUInt64LE(e,t,r);break;default:throw new Error("integer size * unit must be 8, 16, 32 or 64")}return i}function writeFloat(e,t,r,i){return write_float(t,e.name?i[e.name]:e.value,r,size_of_segment(e,i),e.bigendian)}function write_float(e,t,r,i,n){if(4===i)n?e.writeFloatBE(t,r):e.writeFloatLE(t,r);else{if(8!==i)throw new Error("float size * unit must be 32 or 64");n?e.writeDoubleBE(t,r):e.writeDoubleLE(t,r)}return i}var parse=require("./parse").parse;module.exports.write=write,module.exports.build=build,module.exports.write_int=write_int,module.exports.write_float=write_float,module.exports.builder=function(e){e=arguments.length>1?[].join.call(arguments,","):e;var t=parse(e);return function(e){return build(t,e)}}},{"./parse":183,"buffer-more-ints":190,"safe-buffer":204}],182:[function(require,module,exports){"use strict";var ints=require("buffer-more-ints"),debug=require("debug")("bitsyntax-Interpreter");function parse_int(e,t,r,n,a){switch(r){case 1:return a?e.readInt8(t):e.readUInt8(t);case 2:return n?a?e.readInt16BE(t):e.readUInt16BE(t):a?e.readInt16LE(t):e.readUInt16LE(t);case 4:return n?a?e.readInt32BE(t):e.readUInt32BE(t):a?e.readInt32LE(t):e.readUInt32LE(t);case 8:return n?(a?ints.readInt64BE:ints.readUInt64BE)(e,t):(a?ints.readInt64LE:ints.readUInt64LE)(e,t);default:throw"Integers must be 8-, 16-, 32- or 64-bit"}}function parse_float(e,t,r,n){switch(r){case 4:return n?e.readFloatBE(t):e.readFloatLE(t);case 8:return n?e.readDoubleBE(t):e.readDoubleLE(t);default:throw"Floats must be 32- or 64-bit"}}function size_of(e,t){var r=e.size;return"string"==typeof r?t[r]:r}module.exports.match=function(e,t,r){var n=0,a=function(e){function t(){}return t.prototype=e,new t}(r),i=8*t.length;function u(e){debug("skip bits"),debug(e);var t=size_of(e,a);if(!0===t)return n%8==0&&(n=i,!0);var r=e.unit*t;if(n+r>i)return!1;n+=r}function s(e){debug("get_integer"),debug(e);var r=e.unit,u=size_of(e,a)*r,s=n/8;return n+=u,!(u%8>0||n>i)&&parse_int(t,s,u/8,e.bigendian,e.signed)}function o(e){debug("get_float"),debug(e);var r=e.unit,u=size_of(e,a)*r,s=n/8;return!((n+=u)>i)&&parse_float(t,s,u/8,e.bigendian)}function d(e){debug("get_binary"),debug(e);var r=e.unit,u=size_of(e,a),s=n/8;if(!0===u)return n=i,t.slice(s);var o=u*r;return!(o%8>0||n+o>i)&&(n+=o,t.slice(s,s+o/8))}function f(e){debug("get_string"),debug(e);var r=e.value.length,a=n/8;return!((n+=8*r)>i)&&t.slice(a,a+r).toString("utf8")}for(var c=e.length,g=0;g<c;g++){var b=e[g],l=!1;if("_"===b.name)l=u(b);else{switch(b.type){case"string":l=f(b);break;case"integer":l=s(b);break;case"float":l=o(b);break;case"binary":l=d(b)}if(!1===l)return!1;if(b.name)a[b.name]=l;else if(b.value!=l)return!1}}return n==i&&function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(a)},module.exports.parse_int=parse_int,module.exports.parse_float=parse_float},{"buffer-more-ints":190,debug:186}],183:[function(require,module,exports){"use strict";var ast=require("./pattern"),parser=require("./parser");module.exports.parse=function(){return function(e){for(var r=parser.parse(e),s=0,a=r.length;s<a;s++){var n=r[s];if(null!=n.string)r[s]=ast.string(n.string);else if(null!=n.value)r[s]=ast.value(n.value,n.size,n.specifiers);else{if(null==n.name)throw"Unknown segment "+n;r[s]=ast.variable(n.name,n.size,n.specifiers)}}return r}([].join.call(arguments,","))}},{"./parser":184,"./pattern":185}],184:[function(require,module,exports){module.exports=function(){function l(l){return'"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,u){var r={start:function(){var l,n,u,r,e,s,a,i;if(e=t,s=t,null!==(l=y()))if(null!==(n=o())){for(u=[],r=c();null!==r;)u.push(r),r=c();null!==u?l=[l,n,u]:(l=null,t=s)}else l=null,t=s;else l=null,t=s;return null!==l&&(a=l[1],(i=l[2]).unshift(a),l=i),null===l&&(t=e),l},segmentTail:c,segment:o,string:f,chars:h,char:A,hexDigit:p,identifier:g,number:b,size:d,specifierList:v,specifierTail:x,specifier:m,unit:C,ws:y};if(void 0!==u){if(void 0===r[u])throw new Error("Invalid rule name: "+l(u)+".")}else u="start";var t=0,e=0,s=0,a=[];function i(l){t<s||(t>s&&(s=t,a=[]),a.push(l))}function c(){var l,u,r,s,a,c;return a=t,c=t,null!==(l=y())?(44===n.charCodeAt(t)?(u=",",t++):(u=null,0===e&&i('","')),null!==u&&null!==(r=y())&&null!==(s=o())?l=[l,u,r,s]:(l=null,t=c)):(l=null,t=c),null!==l&&(l=l[3]),null===l&&(t=a),l}function o(){var l,n,u,r,e;return r=t,null!==(l=f())&&(l={string:l}),null===l&&(t=r),null===l&&(r=t,e=t,null!==(l=g())&&null!==(n=null!==(n=d())?n:"")&&null!==(u=null!==(u=v())?u:"")?l=[l,n,u]:(l=null,t=e),null!==l&&(l={name:l[0],size:l[1],specifiers:l[2]}),null===l&&(t=r),null===l&&(r=t,e=t,null!==(l=b())&&null!==(n=null!==(n=d())?n:"")&&null!==(u=null!==(u=v())?u:"")?l=[l,n,u]:(l=null,t=e),null!==l&&(l={value:l[0],size:l[1],specifiers:l[2]}),null===l&&(t=r))),l}function f(){var l,u,r,s,a;return s=t,a=t,34===n.charCodeAt(t)?(l='"',t++):(l=null,0===e&&i('"\\""')),null!==l?(34===n.charCodeAt(t)?(u='"',t++):(u=null,0===e&&i('"\\""')),null!==u?l=[l,u]:(l=null,t=a)):(l=null,t=a),null!==l&&(l=""),null===l&&(t=s),null===l&&(s=t,a=t,34===n.charCodeAt(t)?(l='"',t++):(l=null,0===e&&i('"\\""')),null!==l&&null!==(u=h())?(34===n.charCodeAt(t)?(r='"',t++):(r=null,0===e&&i('"\\""')),null!==r?l=[l,u,r]:(l=null,t=a)):(l=null,t=a),null!==l&&(l=l[1]),null===l&&(t=s)),l}function h(){var l,n,u;if(u=t,null!==(n=A()))for(l=[];null!==n;)l.push(n),n=A();else l=null;return null!==l&&(l=l.join("")),null===l&&(t=u),l}function A(){var l,u,r,s,a,c,o,f,h,A,g;return/^[^"\\\0-\x1F]/.test(n.charAt(t))?(l=n.charAt(t),t++):(l=null,0===e&&i('[^"\\\\\\0-\\x1F]')),null===l&&(c=t,'\\"'===n.substr(t,2)?(l='\\"',t+=2):(l=null,0===e&&i('"\\\\\\""')),null!==l&&(l='"'),null===l&&(t=c),null===l&&(c=t,"\\\\"===n.substr(t,2)?(l="\\\\",t+=2):(l=null,0===e&&i('"\\\\\\\\"')),null!==l&&(l="\\"),null===l&&(t=c),null===l&&(c=t,"\\/"===n.substr(t,2)?(l="\\/",t+=2):(l=null,0===e&&i('"\\\\/"')),null!==l&&(l="/"),null===l&&(t=c),null===l&&(c=t,"\\b"===n.substr(t,2)?(l="\\b",t+=2):(l=null,0===e&&i('"\\\\b"')),null!==l&&(l="\b"),null===l&&(t=c),null===l&&(c=t,"\\f"===n.substr(t,2)?(l="\\f",t+=2):(l=null,0===e&&i('"\\\\f"')),null!==l&&(l="\f"),null===l&&(t=c),null===l&&(c=t,"\\n"===n.substr(t,2)?(l="\\n",t+=2):(l=null,0===e&&i('"\\\\n"')),null!==l&&(l="\n"),null===l&&(t=c),null===l&&(c=t,"\\r"===n.substr(t,2)?(l="\\r",t+=2):(l=null,0===e&&i('"\\\\r"')),null!==l&&(l="\r"),null===l&&(t=c),null===l&&(c=t,"\\t"===n.substr(t,2)?(l="\\t",t+=2):(l=null,0===e&&i('"\\\\t"')),null!==l&&(l="\t"),null===l&&(t=c),null===l&&(c=t,o=t,"\\u"===n.substr(t,2)?(l="\\u",t+=2):(l=null,0===e&&i('"\\\\u"')),null!==l&&null!==(u=p())&&null!==(r=p())&&null!==(s=p())&&null!==(a=p())?l=[l,u,r,s,a]:(l=null,t=o),null!==l&&(f=l[1],h=l[2],A=l[3],g=l[4],l=String.fromCharCode(parseInt("0x"+f+h+A+g))),null===l&&(t=c)))))))))),l}function p(){var l;return/^[0-9a-fA-F]/.test(n.charAt(t))?(l=n.charAt(t),t++):(l=null,0===e&&i("[0-9a-fA-F]")),l}function g(){var l,u,r,s,a;if(s=t,a=t,/^[_a-zA-Z]/.test(n.charAt(t))?(l=n.charAt(t),t++):(l=null,0===e&&i("[_a-zA-Z]")),null!==l){for(u=[],/^[_a-zA-Z0-9]/.test(n.charAt(t))?(r=n.charAt(t),t++):(r=null,0===e&&i("[_a-zA-Z0-9]"));null!==r;)u.push(r),/^[_a-zA-Z0-9]/.test(n.charAt(t))?(r=n.charAt(t),t++):(r=null,0===e&&i("[_a-zA-Z0-9]"));null!==u?l=[l,u]:(l=null,t=a)}else l=null,t=a;return null!==l&&(l=l[0]+l[1].join("")),null===l&&(t=s),l}function b(){var l,u,r,s,a,c,o;if(s=t,48===n.charCodeAt(t)?(l="0",t++):(l=null,0===e&&i('"0"')),null!==l&&(l=0),null===l&&(t=s),null===l){if(s=t,a=t,/^[1-9]/.test(n.charAt(t))?(l=n.charAt(t),t++):(l=null,0===e&&i("[1-9]")),null!==l){for(u=[],/^[0-9]/.test(n.charAt(t))?(r=n.charAt(t),t++):(r=null,0===e&&i("[0-9]"));null!==r;)u.push(r),/^[0-9]/.test(n.charAt(t))?(r=n.charAt(t),t++):(r=null,0===e&&i("[0-9]"));null!==u?l=[l,u]:(l=null,t=a)}else l=null,t=a;null!==l&&(c=l[0],o=l[1],l=parseInt(c+o.join(""))),null===l&&(t=s)}return l}function d(){var l,u,r,s;return r=t,s=t,58===n.charCodeAt(t)?(l=":",t++):(l=null,0===e&&i('":"')),null!==l&&null!==(u=b())?l=[l,u]:(l=null,t=s),null!==l&&(l=l[1]),null===l&&(t=r),null===l&&(r=t,s=t,58===n.charCodeAt(t)?(l=":",t++):(l=null,0===e&&i('":"')),null!==l&&null!==(u=g())?l=[l,u]:(l=null,t=s),null!==l&&(l=l[1]),null===l&&(t=r)),l}function v(){var l,u,r,s,a,c,o,f;if(a=t,c=t,47===n.charCodeAt(t)?(l="/",t++):(l=null,0===e&&i('"/"')),null!==l)if(null!==(u=m())){for(r=[],s=x();null!==s;)r.push(s),s=x();null!==r?l=[l,u,r]:(l=null,t=c)}else l=null,t=c;else l=null,t=c;return null!==l&&(o=l[1],(f=l[2]).unshift(o),l=f),null===l&&(t=a),l}function x(){var l,u,r,s;return r=t,s=t,45===n.charCodeAt(t)?(l="-",t++):(l=null,0===e&&i('"-"')),null!==l&&null!==(u=m())?l=[l,u]:(l=null,t=s),null!==l&&(l=l[1]),null===l&&(t=r),l}function m(){var l;return"little"===n.substr(t,6)?(l="little",t+=6):(l=null,0===e&&i('"little"')),null===l&&("big"===n.substr(t,3)?(l="big",t+=3):(l=null,0===e&&i('"big"')),null===l&&("signed"===n.substr(t,6)?(l="signed",t+=6):(l=null,0===e&&i('"signed"')),null===l&&("unsigned"===n.substr(t,8)?(l="unsigned",t+=8):(l=null,0===e&&i('"unsigned"')),null===l&&("integer"===n.substr(t,7)?(l="integer",t+=7):(l=null,0===e&&i('"integer"')),null===l&&("binary"===n.substr(t,6)?(l="binary",t+=6):(l=null,0===e&&i('"binary"')),null===l&&("float"===n.substr(t,5)?(l="float",t+=5):(l=null,0===e&&i('"float"')),null===l&&(l=C()))))))),l}function C(){var l,u,r,s;return r=t,s=t,"unit:"===n.substr(t,5)?(l="unit:",t+=5):(l=null,0===e&&i('"unit:"')),null!==l&&null!==(u=b())?l=[l,u]:(l=null,t=s),null!==l&&(l="unit:"+l[1]),null===l&&(t=r),l}function y(){var l,u;for(l=[],/^[ \t\n]/.test(n.charAt(t))?(u=n.charAt(t),t++):(u=null,0===e&&i("[ \\t\\n]"));null!==u;)l.push(u),/^[ \t\n]/.test(n.charAt(t))?(u=n.charAt(t),t++):(u=null,0===e&&i("[ \\t\\n]"));return l}var z=r[u]();if(null===z||t!==n.length){var F=Math.max(t,s),E=F<n.length?n.charAt(F):null,_=function(){for(var l=1,u=1,r=!1,e=0;e<Math.max(t,s);e++){var a=n.charAt(e);"\n"===a?(r||l++,u=1,r=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(l++,u=1,r=!0):(u++,r=!1)}return{line:l,column:u}}();throw new this.SyntaxError(function(l){l.sort();for(var n=null,u=[],r=0;r<l.length;r++)l[r]!==n&&(u.push(l[r]),n=l[r]);return u}(a),E,F,_.line,_.column)}return z},toSource:function(){return this._source},SyntaxError:function(n,u,r,t,e){this.name="SyntaxError",this.expected=n,this.found=u,this.message=function(n,u){var r;switch(n.length){case 0:r="end of input";break;case 1:r=n[0];break;default:r=n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}return"Expected "+r+" but "+(u?l(u):"end of input")+" found."}(n,u),this.offset=r,this.line=t,this.column=e}};return n.SyntaxError.prototype=Error.prototype,n}()},{}],185:[function(require,module,exports){"use strict";function set(e){var n={};for(var t in e)n[e[t]]=1;return n}function variable(e,n,t){var r=set(t),i={name:e};return i.type=type_in(r),specs(i,i.type,r),i.size=size_of(i,i.type,n,i.unit),i}module.exports.variable=variable,module.exports.rest=function(){return variable("_",!0,["binary"])},module.exports.value=function(e,n,t){var r=set(t),i={value:e};return i.type=type_in(r),specs(i,i.type,r),i.size=size_of(i,i.type,n,i.unit),i},module.exports.string=function(e){return{value:e,type:"string"}};var TYPES={integer:1,binary:1,float:1};function type_in(e){for(var n in e)if(TYPES[n])return n;return"integer"}function specs(e,n,t){switch(n){case"integer":e.signed=function(e){return e.signed}(t);case"float":e.bigendian=function(e){return!e.little}(t);default:e.unit=function(e,n){for(var t in e)if("unit:"==t.substr(0,5))return parseInt(t.substr(5));switch(n){case"binary":return 8;case"integer":case"float":return 1}}(t,e.type)}return e}function size_of(e,n,t,r){if(void 0!==t&&""!==t)return t;switch(n){case"integer":return 8;case"float":return 64;case"binary":return!0}}},{}],186:[function(require,module,exports){(function(process){function load(){var e;try{e=exports.storage.debug}catch(e){}return!e&&void 0!==process&&"env"in process&&(e=process.env.DEBUG),e}(exports=module.exports=require("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},exports.formatArgs=function(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(n=++t)}),e.splice(n,0,r)}},exports.save=function(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(e){}},exports.load=load,exports.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},exports.enable(load())}).call(this,require("_process"))},{"./debug":187,_process:17}],187:[function(require,module,exports){var prevTime;function createDebug(e){function r(){if(r.enabled){var e=r,t=+new Date,o=t-(prevTime||t);e.diff=o,e.prev=prevTime,e.curr=t,prevTime=t;for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];s[0]=exports.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var p=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,t){if("%%"===r)return r;p++;var o=exports.formatters[t];if("function"==typeof o){var n=s[p];r=o.call(e,n),s.splice(p,1),p--}return r}),exports.formatArgs.call(e,s),(r.log||exports.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=exports.enabled(e),r.useColors=exports.useColors(),r.color=function(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return exports.colors[Math.abs(t)%exports.colors.length]}(e),"function"==typeof exports.init&&exports.init(r),r}(exports=module.exports=createDebug.debug=createDebug.default=createDebug).coerce=function(e){return e instanceof Error?e.stack||e.message:e},exports.disable=function(){exports.enable("")},exports.enable=function(e){exports.save(e),exports.names=[],exports.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),t=r.length,o=0;o<t;o++)r[o]&&("-"===(e=r[o].replace(/\*/g,".*?"))[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))},exports.enabled=function(e){var r,t;for(r=0,t=exports.skips.length;r<t;r++)if(exports.skips[r].test(e))return!1;for(r=0,t=exports.names.length;r<t;r++)if(exports.names[r].test(e))return!0;return!1},exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={}},{ms:188}],188:[function(require,module,exports){var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;function parse(e){if(!((e=String(e)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"hrs":case"hr":case"h":return a*h;case"minutes":case"minute":case"mins":case"min":case"m":return a*m;case"seconds":case"second":case"secs":case"sec":case"s":return a*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function fmtShort(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){if(!(s<e))return s<1.5*e?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return parse(s);if("number"===r&&!1===isNaN(s))return e.long?fmtLong(s):fmtShort(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))}},{}],189:[function(require,module,exports){(function(Buffer){!function(){"use strict";module.exports=function(t){return(t instanceof Buffer?t:Buffer.from(t.toString(),"binary")).toString("base64")}}()}).call(this,require("buffer").Buffer)},{buffer:8}],190:[function(require,module,exports){(function(Buffer){"use strict";var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,MAX_INT=9007199254740991;function isContiguousInt(t){return t<=MAX_INT&&t>=-MAX_INT}function check_value(t,e,n){if("number"!=typeof(t=+t)||t<e||t>n||Math.floor(t)!==t)throw new TypeError('"value" argument is out of bounds');return t}function check_bounds(t,e,n){if(e<0||e+n>t.length)throw new RangeError("Index out of range")}module.exports.isContiguousInt=isContiguousInt,module.exports.assertContiguousInt=function(t){if(!isContiguousInt(t))throw new TypeError("number cannot be represented as a contiguous integer")},["UInt","Int"].forEach(function(t){var e=t+"8";module.exports["read"+e]=Buffer.prototype["read"+e].call,module.exports["write"+e]=Buffer.prototype["write"+e].call,["16","32"].forEach(function(e){["LE","BE"].forEach(function(n){var r=t+e+n,I=Buffer.prototype["read"+r];module.exports["read"+r]=function(t,e){return I.call(t,e)};var o=Buffer.prototype["write"+r];module.exports["write"+r]=function(t,e,n){return o.call(t,e,n)}})})}),module.exports.readUInt24BE=function(t,e){return t.readUInt8(e)<<16|t.readUInt16BE(e+1)},module.exports.writeUInt24BE=function(t,e,n){e=check_value(e,0,16777215),check_bounds(t,n,3),t.writeUInt8(e>>>16,n),t.writeUInt16BE(65535&e,n+1)},module.exports.readUInt40BE=function(t,e){return(t.readUInt8(e)||0)*SHIFT_LEFT_32+t.readUInt32BE(e+1)},module.exports.writeUInt40BE=function(t,e,n){e=check_value(e,0,0xffffffffff),check_bounds(t,n,5),t.writeUInt8(Math.floor(e*SHIFT_RIGHT_32),n),t.writeInt32BE(-1&e,n+1)},module.exports.readUInt48BE=function(t,e){return t.readUInt16BE(e)*SHIFT_LEFT_32+t.readUInt32BE(e+2)},module.exports.writeUInt48BE=function(t,e,n){e=check_value(e,0,0xffffffffffff),check_bounds(t,n,6),t.writeUInt16BE(Math.floor(e*SHIFT_RIGHT_32),n),t.writeInt32BE(-1&e,n+2)},module.exports.readUInt56BE=function(t,e){return((t.readUInt8(e)||0)<<16|t.readUInt16BE(e+1))*SHIFT_LEFT_32+t.readUInt32BE(e+3)},module.exports.writeUInt56BE=function(t,e,n){if(e=check_value(e,0,72057594037927940),check_bounds(t,n,7),e<72057594037927940){var r=Math.floor(e*SHIFT_RIGHT_32);t.writeUInt8(r>>>16,n),t.writeUInt16BE(65535&r,n+1),t.writeInt32BE(-1&e,n+3)}else t[n]=255,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=255},module.exports.readUInt64BE=function(t,e){return t.readUInt32BE(e)*SHIFT_LEFT_32+t.readUInt32BE(e+4)},module.exports.writeUInt64BE=function(t,e,n){e=check_value(e,0,0x10000000000000000),check_bounds(t,n,8),e<0x10000000000000000?(t.writeUInt32BE(Math.floor(e*SHIFT_RIGHT_32),n),t.writeInt32BE(-1&e,n+4)):(t[n]=255,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=255,t[n+7]=255)},module.exports.readUInt24LE=function(t,e){return t.readUInt8(e+2)<<16|t.readUInt16LE(e)},module.exports.writeUInt24LE=function(t,e,n){e=check_value(e,0,16777215),check_bounds(t,n,3),t.writeUInt16LE(65535&e,n),t.writeUInt8(e>>>16,n+2)},module.exports.readUInt40LE=function(t,e){return(t.readUInt8(e+4)||0)*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeUInt40LE=function(t,e,n){e=check_value(e,0,0xffffffffff),check_bounds(t,n,5),t.writeInt32LE(-1&e,n),t.writeUInt8(Math.floor(e*SHIFT_RIGHT_32),n+4)},module.exports.readUInt48LE=function(t,e){return t.readUInt16LE(e+4)*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeUInt48LE=function(t,e,n){e=check_value(e,0,0xffffffffffff),check_bounds(t,n,6),t.writeInt32LE(-1&e,n),t.writeUInt16LE(Math.floor(e*SHIFT_RIGHT_32),n+4)},module.exports.readUInt56LE=function(t,e){return((t.readUInt8(e+6)||0)<<16|t.readUInt16LE(e+4))*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeUInt56LE=function(t,e,n){if(e=check_value(e,0,72057594037927940),check_bounds(t,n,7),e<72057594037927940){t.writeInt32LE(-1&e,n);var r=Math.floor(e*SHIFT_RIGHT_32);t.writeUInt16LE(65535&r,n+4),t.writeUInt8(r>>>16,n+6)}else t[n]=255,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=255},module.exports.readUInt64LE=function(t,e){return t.readUInt32LE(e+4)*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeUInt64LE=function(t,e,n){e=check_value(e,0,0x10000000000000000),check_bounds(t,n,8),e<0x10000000000000000?(t.writeInt32LE(-1&e,n),t.writeUInt32LE(Math.floor(e*SHIFT_RIGHT_32),n+4)):(t[n]=255,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=255,t[n+7]=255)},module.exports.readInt24BE=function(t,e){return(t.readInt8(e)<<16)+t.readUInt16BE(e+1)},module.exports.writeInt24BE=function(t,e,n){e=check_value(e,-8388608,8388607),check_bounds(t,n,3),t.writeInt8(e>>16,n),t.writeUInt16BE(65535&e,n+1)},module.exports.readInt40BE=function(t,e){return(t.readInt8(e)||0)*SHIFT_LEFT_32+t.readUInt32BE(e+1)},module.exports.writeInt40BE=function(t,e,n){e=check_value(e,-549755813888,549755813887),check_bounds(t,n,5),t.writeInt8(Math.floor(e*SHIFT_RIGHT_32),n),t.writeInt32BE(-1&e,n+1)},module.exports.readInt48BE=function(t,e){return t.readInt16BE(e)*SHIFT_LEFT_32+t.readUInt32BE(e+2)},module.exports.writeInt48BE=function(t,e,n){e=check_value(e,-0x800000000000,0x7fffffffffff),check_bounds(t,n,6),t.writeInt16BE(Math.floor(e*SHIFT_RIGHT_32),n),t.writeInt32BE(-1&e,n+2)},module.exports.readInt56BE=function(t,e){return(((t.readInt8(e)||0)<<16)+t.readUInt16BE(e+1))*SHIFT_LEFT_32+t.readUInt32BE(e+3)},module.exports.writeInt56BE=function(t,e,n){if(e=check_value(e,-0x800000000000000,0x80000000000000),check_bounds(t,n,7),e<0x80000000000000){var r=Math.floor(e*SHIFT_RIGHT_32);t.writeInt8(r>>16,n),t.writeUInt16BE(65535&r,n+1),t.writeInt32BE(-1&e,n+3)}else t[n]=127,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=255},module.exports.readInt64BE=function(t,e){return t.readInt32BE(e)*SHIFT_LEFT_32+t.readUInt32BE(e+4)},module.exports.writeInt64BE=function(t,e,n){e=check_value(e,-0x800000000000000000,0x8000000000000000),check_bounds(t,n,8),e<0x8000000000000000?(t.writeInt32BE(Math.floor(e*SHIFT_RIGHT_32),n),t.writeInt32BE(-1&e,n+4)):(t[n]=127,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=255,t[n+7]=255)},module.exports.readInt24LE=function(t,e){return(t.readInt8(e+2)<<16)+t.readUInt16LE(e)},module.exports.writeInt24LE=function(t,e,n){e=check_value(e,-8388608,8388607),check_bounds(t,n,3),t.writeUInt16LE(65535&e,n),t.writeInt8(e>>16,n+2)},module.exports.readInt40LE=function(t,e){return(t.readInt8(e+4)||0)*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeInt40LE=function(t,e,n){e=check_value(e,-549755813888,549755813887),check_bounds(t,n,5),t.writeInt32LE(-1&e,n),t.writeInt8(Math.floor(e*SHIFT_RIGHT_32),n+4)},module.exports.readInt48LE=function(t,e){return t.readInt16LE(e+4)*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeInt48LE=function(t,e,n){e=check_value(e,-0x800000000000,0x7fffffffffff),check_bounds(t,n,6),t.writeInt32LE(-1&e,n),t.writeInt16LE(Math.floor(e*SHIFT_RIGHT_32),n+4)},module.exports.readInt56LE=function(t,e){return(((t.readInt8(e+6)||0)<<16)+t.readUInt16LE(e+4))*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeInt56LE=function(t,e,n){if(e=check_value(e,-0x80000000000000,0x80000000000000),check_bounds(t,n,7),e<0x80000000000000){t.writeInt32LE(-1&e,n);var r=Math.floor(e*SHIFT_RIGHT_32);t.writeUInt16LE(65535&r,n+4),t.writeInt8(r>>16,n+6)}else t[n]=255,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=127},module.exports.readInt64LE=function(t,e){return t.readInt32LE(e+4)*SHIFT_LEFT_32+t.readUInt32LE(e)},module.exports.writeInt64LE=function(t,e,n){e=check_value(e,-0x8000000000000000,0x8000000000000000),check_bounds(t,n,8),e<0x8000000000000000?(t.writeInt32LE(-1&e,n),t.writeInt32LE(Math.floor(e*SHIFT_RIGHT_32),n+4)):(t[n]=255,t[n+1]=255,t[n+2]=255,t[n+3]=255,t[n+4]=255,t[n+5]=255,t[n+6]=255,t[n+7]=127)}}).call(this,require("buffer").Buffer)},{buffer:8}],191:[function(require,module,exports){(function(Buffer){function objectToString(r){return Object.prototype.toString.call(r)}exports.isArray=function(r){return Array.isArray?Array.isArray(r):"[object Array]"===objectToString(r)},exports.isBoolean=function(r){return"boolean"==typeof r},exports.isNull=function(r){return null===r},exports.isNullOrUndefined=function(r){return null==r},exports.isNumber=function(r){return"number"==typeof r},exports.isString=function(r){return"string"==typeof r},exports.isSymbol=function(r){return"symbol"==typeof r},exports.isUndefined=function(r){return void 0===r},exports.isRegExp=function(r){return"[object RegExp]"===objectToString(r)},exports.isObject=function(r){return"object"==typeof r&&null!==r},exports.isDate=function(r){return"[object Date]"===objectToString(r)},exports.isError=function(r){return"[object Error]"===objectToString(r)||r instanceof Error},exports.isFunction=function(r){return"function"==typeof r},exports.isPrimitive=function(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r},exports.isBuffer=Buffer.isBuffer}).call(this,{isBuffer:require("../../../../../../../.npm-packages/lib/node_modules/browserify/node_modules/is-buffer/index.js")})},{"../../../../../../../.npm-packages/lib/node_modules/browserify/node_modules/is-buffer/index.js":13}],192:[function(require,module,exports){var t,__self__=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:this);t=__self__,function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1};function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function d(t){var e=new FileReader,r=u(e);return e.readAsArrayBuffer(t),r}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=c(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t,e,r,o=f(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,r=u(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=i(t),e=s(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},h.prototype.delete=function(t){delete this.map[i(t)]},h.prototype.get=function(t){return t=i(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},h.prototype.set=function(t,e){this.map[i(t)]=s(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),a(t)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),a(t)},h.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),a(t)},r.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var l=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(t,e){var r,o,n=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(o=(r=e.method||this.method||"GET").toUpperCase(),l.indexOf(o)>-1?o:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},p.call(y.prototype),p.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];_.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function w(t,o){return new Promise(function(n,i){var s=new y(t,o);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function f(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new _(o,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),s.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),s.signal&&(s.signal.addEventListener("abort",f),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",f)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})}w.polyfill=!0,t.fetch||(t.fetch=w,t.Headers=h,t.Request=y,t.Response=_),e.Headers=h,e.Request=y,e.Response=_,e.fetch=w}({}),delete __self__.fetch.polyfill,(exports=__self__.fetch).default=__self__.fetch,exports.fetch=__self__.fetch,exports.Headers=__self__.Headers,exports.Request=__self__.Request,exports.Response=__self__.Response,module.exports=exports},{}],193:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},{}],194:[function(require,module,exports){"use strict";const Yallist=require("yallist"),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;const get=(t,e,s)=>{const i=t[CACHE].get(e);if(i){const e=i.value;if(isStale(t,e)){if(del(t,i),!t[ALLOW_STALE])return}else s&&(t[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),t[LRU_LIST].unshiftNode(i));return e.value}},isStale=(t,e)=>{if(!e||!e.maxAge&&!t[MAX_AGE])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[MAX_AGE]&&s>t[MAX_AGE]},trim=t=>{if(t[LENGTH]>t[MAX])for(let e=t[LRU_LIST].tail;t[LENGTH]>t[MAX]&&null!==e;){const s=e.prev;del(t,e),e=s}},del=(t,e)=>{if(e){const s=e.value;t[DISPOSE]&&t[DISPOSE](s.key,s.value),t[LENGTH]-=s.length,t[CACHE].delete(s.key),t[LRU_LIST].removeNode(e)}};class Entry{constructor(t,e,s,i,h){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=h||0}}const forEachStep=(t,e,s,i)=>{let h=s.value;isStale(t,h)&&(del(t,s),t[ALLOW_STALE]||(h=void 0)),h&&e.call(i,h.value,h.key,t)};module.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=t.max||1/0;const e=t.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof e?naiveLength:e,this[ALLOW_STALE]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=t.maxAge||0,this[DISPOSE]=t.dispose,this[NO_DISPOSE_ON_SET]=t.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[MAX]=t||1/0,trim(this)}get max(){return this[MAX]}set allowStale(t){this[ALLOW_STALE]=!!t}get allowStale(){return this[ALLOW_STALE]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=t,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=t,this[LENGTH]=0,this[LRU_LIST].forEach(t=>{t.length=this[LENGTH_CALCULATOR](t.value,t.key),this[LENGTH]+=t.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(t,e){e=e||this;for(let s=this[LRU_LIST].tail;null!==s;){const i=s.prev;forEachStep(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[LRU_LIST].head;null!==s;){const i=s.next;forEachStep(this,t,s,e),s=i}}keys(){return this[LRU_LIST].toArray().map(t=>t.key)}values(){return this[LRU_LIST].toArray().map(t=>t.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(t=>this[DISPOSE](t.key,t.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[LRU_LIST]}set(t,e,s){if((s=s||this[MAX_AGE])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,h=this[LENGTH_CALCULATOR](e,t);if(this[CACHE].has(t)){if(h>this[MAX])return del(this,this[CACHE].get(t)),!1;const n=this[CACHE].get(t).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[LENGTH]+=h-n.length,n.length=h,this.get(t),trim(this),!0}const n=new Entry(t,e,h,i,s);return n.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](t,e),!1):(this[LENGTH]+=n.length,this[LRU_LIST].unshift(n),this[CACHE].set(t,this[LRU_LIST].head),trim(this),!0)}has(t){if(!this[CACHE].has(t))return!1;const e=this[CACHE].get(t).value;return!isStale(this,e)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){const t=this[LRU_LIST].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[CACHE].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],h=i.e||0;if(0===h)this.set(i.k,i.v);else{const t=h-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[CACHE].forEach((t,e)=>get(this,e,!1))}}},{yallist:229}],195:[function(require,module,exports){"use strict";function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _construct(e,t,n){return(_construct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0});var LuxonError=function(e){function t(){return e.apply(this,arguments)||this}return _inheritsLoose(t,e),t}(_wrapNativeSuper(Error)),InvalidDateTimeError=function(e){function t(t){return e.call(this,"Invalid DateTime: "+t.toMessage())||this}return _inheritsLoose(t,e),t}(LuxonError),InvalidIntervalError=function(e){function t(t){return e.call(this,"Invalid Interval: "+t.toMessage())||this}return _inheritsLoose(t,e),t}(LuxonError),InvalidDurationError=function(e){function t(t){return e.call(this,"Invalid Duration: "+t.toMessage())||this}return _inheritsLoose(t,e),t}(LuxonError),ConflictingSpecificationError=function(e){function t(){return e.apply(this,arguments)||this}return _inheritsLoose(t,e),t}(LuxonError),InvalidUnitError=function(e){function t(t){return e.call(this,"Invalid unit "+t)||this}return _inheritsLoose(t,e),t}(LuxonError),InvalidArgumentError=function(e){function t(){return e.apply(this,arguments)||this}return _inheritsLoose(t,e),t}(LuxonError),ZoneIsAbstractError=function(e){function t(){return e.call(this,"Zone is an abstract class")||this}return _inheritsLoose(t,e),t}(LuxonError),n="numeric",s="short",l="long",DATE_SHORT={year:n,month:n,day:n},DATE_MED={year:n,month:s,day:n},DATE_FULL={year:n,month:l,day:n},DATE_HUGE={year:n,month:l,day:n,weekday:l},TIME_SIMPLE={hour:n,minute:n},TIME_WITH_SECONDS={hour:n,minute:n,second:n},TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s},TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l},TIME_24_SIMPLE={hour:n,minute:n,hour12:!1},TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hour12:!1},TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hour12:!1,timeZoneName:s},TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hour12:!1,timeZoneName:l},DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n},DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n},DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n},DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n},DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n},DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s},DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s},DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l},DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l};function isUndefined(e){return void 0===e}function isNumber(e){return"number"==typeof e}function isInteger(e){return"number"==typeof e&&e%1==0}function hasIntl(){try{return"undefined"!=typeof Intl&&Intl.DateTimeFormat}catch(e){return!1}}function hasFormatToParts(){return!isUndefined(Intl.DateTimeFormat.prototype.formatToParts)}function hasRelative(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function bestBy(e,t,n){if(0!==e.length)return e.reduce(function(e,r){var i=[t(r),r];return e&&n(e[0],i[0])===e[0]?e:i},null)[1]}function pick(e,t){return t.reduce(function(t,n){return t[n]=e[n],t},{})}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function integerBetween(e,t,n){return isInteger(e)&&e>=t&&e<=n}function padStart(e,t){return void 0===t&&(t=2),e.toString().length<t?("0".repeat(t)+e).slice(-t):e.toString()}function parseInteger(e){return isUndefined(e)||null===e||""===e?void 0:parseInt(e,10)}function parseMillis(e){if(!isUndefined(e)&&null!==e&&""!==e){var t=1e3*parseFloat("0."+e);return Math.floor(t)}}function roundTo(e,t,n){void 0===n&&(n=!1);var r=Math.pow(10,t);return(n?Math.trunc:Math.round)(e*r)/r}function isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}function daysInYear(e){return isLeapYear(e)?366:365}function daysInMonth(e,t){var n=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===n?isLeapYear(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function objToLocalTS(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t)).setUTCFullYear(t.getUTCFullYear()-1900),+t}function weeksInWeekYear(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===t||3===r?53:52}function untruncateYear(e){return e>99?e:e>60?1900+e:2e3+e}function parseZoneInfo(e,t,n,r){void 0===r&&(r=null);var i=new Date(e),a={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(a.timeZone=r);var o=Object.assign({timeZoneName:t},a),s=hasIntl();if(s&&hasFormatToParts()){var u=new Intl.DateTimeFormat(n,o).formatToParts(i).find(function(e){return"timezonename"===e.type.toLowerCase()});return u?u.value:null}if(s){var c=new Intl.DateTimeFormat(n,a).format(i);return new Intl.DateTimeFormat(n,o).format(i).substring(c.length).replace(/^[, \u200e]+/,"")}return null}function signedOffset(e,t){var n=parseInt(e,10);Number.isNaN(n)&&(n=0);var r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function asNumber(e){var t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new InvalidArgumentError("Invalid unit value "+e);return t}function normalizeObject(e,t,n){var r={};for(var i in e)if(hasOwnProperty(e,i)){if(n.indexOf(i)>=0)continue;var a=e[i];if(null==a)continue;r[t(i)]=asNumber(a)}return r}function formatOffset(e,t){var n=Math.trunc(e/60),r=Math.abs(e%60),i=n>=0&&!Object.is(n,-0)?"+":"-",a=""+i+Math.abs(n);switch(t){case"short":return""+i+padStart(Math.abs(n),2)+":"+padStart(r,2);case"narrow":return r>0?a+":"+r:a;case"techie":return""+i+padStart(Math.abs(n),2)+padStart(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function timeObject(e){return pick(e,["hour","minute","second","millisecond"])}var ianaRegex=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/;function stringify(e){return JSON.stringify(e,Object.keys(e).sort())}var monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(e){switch(e){case"narrow":return monthsNarrow;case"short":return monthsShort;case"long":return monthsLong;case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(e){switch(e){case"narrow":return weekdaysNarrow;case"short":return weekdaysShort;case"long":return weekdaysLong;case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"];function eras(e){switch(e){case"narrow":return erasNarrow;case"short":return erasShort;case"long":return erasLong;default:return null}}function stringifyTokens(e,t){var n="",r=e,i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(a>=r.length)break;o=r[a++]}else{if((a=r.next()).done)break;o=a.value}var s=o;s.literal?n+=s.val:n+=t(s.val)}return n}var _macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS},Formatter=function(){function e(e,t){this.opts=t,this.loc=e,this.systemLoc=null}e.create=function(t,n){return void 0===n&&(n={}),new e(t,n)},e.parseFormat=function(e){for(var t=null,n="",r=!1,i=[],a=0;a<e.length;a++){var o=e.charAt(a);"'"===o?(n.length>0&&i.push({literal:r,val:n}),t=null,n="",r=!r):r?n+=o:o===t?n+=o:(n.length>0&&i.push({literal:!1,val:n}),n=o,t=o)}return n.length>0&&i.push({literal:r,val:n}),i},e.macroTokenToFormatOpts=function(e){return _macroTokenToFormatOpts[e]};var t=e.prototype;return t.formatWithSystemDefault=function(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,Object.assign({},this.opts,t)).format()},t.formatDateTime=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).format()},t.formatDateTimeParts=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).formatToParts()},t.resolvedOptions=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).resolvedOptions()},t.num=function(e,t){if(void 0===t&&(t=0),this.opts.forceSimple)return padStart(e,t);var n=Object.assign({},this.opts);return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)},t.formatDateTimeFromString=function(t,n){var r=this,i="en"===this.loc.listingMode(),a=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar&&hasFormatToParts(),o=function(e,n){return r.loc.extract(t,e,n)},s=function(e){return t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):""},u=function(e,n){return i?function(e,t){return months(t)[e.month-1]}(t,e):o(n?{month:e}:{month:e,day:"numeric"},"month")},c=function(e,n){return i?function(e,t){return weekdays(t)[e.weekday-1]}(t,e):o(n?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday")},l=function(e){return i?function(e,t){return eras(t)[e.year<0?0:1]}(t,e):o({era:e},"era")};return stringifyTokens(e.parseFormat(n),function(n){switch(n){case"S":return r.num(t.millisecond);case"u":case"SSS":return r.num(t.millisecond,3);case"s":return r.num(t.second);case"ss":return r.num(t.second,2);case"m":return r.num(t.minute);case"mm":return r.num(t.minute,2);case"h":return r.num(t.hour%12==0?12:t.hour%12);case"hh":return r.num(t.hour%12==0?12:t.hour%12,2);case"H":return r.num(t.hour);case"HH":return r.num(t.hour,2);case"Z":return s({format:"narrow",allowZ:r.opts.allowZ});case"ZZ":return s({format:"short",allowZ:r.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:!1});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:r.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:r.loc.locale});case"z":return t.zoneName;case"a":return i?function(e){return meridiems[e.hour<12?0:1]}(t):o({hour:"numeric",hour12:!0},"dayperiod");case"d":return a?o({day:"numeric"},"day"):r.num(t.day);case"dd":return a?o({day:"2-digit"},"day"):r.num(t.day,2);case"c":return r.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return r.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return a?o({month:"numeric",day:"numeric"},"month"):r.num(t.month);case"LL":return a?o({month:"2-digit",day:"numeric"},"month"):r.num(t.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return a?o({month:"numeric"},"month"):r.num(t.month);case"MM":return a?o({month:"2-digit"},"month"):r.num(t.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return a?o({year:"numeric"},"year"):r.num(t.year);case"yy":return a?o({year:"2-digit"},"year"):r.num(t.year.toString().slice(-2),2);case"yyyy":return a?o({year:"numeric"},"year"):r.num(t.year,4);case"yyyyyy":return a?o({year:"numeric"},"year"):r.num(t.year,6);case"G":return l("short");case"GG":return l("long");case"GGGGG":return l("narrow");case"kk":return r.num(t.weekYear.toString().slice(-2),2);case"kkkk":return r.num(t.weekYear,4);case"W":return r.num(t.weekNumber);case"WW":return r.num(t.weekNumber,2);case"o":return r.num(t.ordinal);case"ooo":return r.num(t.ordinal,3);case"q":return r.num(t.quarter);case"qq":return r.num(t.quarter,2);case"X":return r.num(Math.floor(t.ts/1e3));case"x":return r.num(t.ts);default:return function(n){var i=e.macroTokenToFormatOpts(n);return i?r.formatWithSystemDefault(t,i):n}(n)}})},t.formatDurationFromString=function(t,n){var r,i=this,a=function(e){switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},o=e.parseFormat(n),s=o.reduce(function(e,t){var n=t.literal,r=t.val;return n?e:e.concat(r)},[]),u=t.shiftTo.apply(t,s.map(a).filter(function(e){return e}));return stringifyTokens(o,(r=u,function(e){var t=a(e);return t?i.num(r.get(t),e.length):e}))},e}(),Invalid=function(){function e(e,t){this.reason=e,this.explanation=t}return e.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),Zone=function(){function e(){}var t=e.prototype;return t.offsetName=function(e,t){throw new ZoneIsAbstractError},t.formatOffset=function(e,t){throw new ZoneIsAbstractError},t.offset=function(e){throw new ZoneIsAbstractError},t.equals=function(e){throw new ZoneIsAbstractError},_createClass(e,[{key:"type",get:function(){throw new ZoneIsAbstractError}},{key:"name",get:function(){throw new ZoneIsAbstractError}},{key:"universal",get:function(){throw new ZoneIsAbstractError}},{key:"isValid",get:function(){throw new ZoneIsAbstractError}}]),e}(),singleton=null,LocalZone=function(e){function t(){return e.apply(this,arguments)||this}_inheritsLoose(t,e);var n=t.prototype;return n.offsetName=function(e,t){return parseZoneInfo(e,t.format,t.locale)},n.formatOffset=function(e,t){return formatOffset(this.offset(e),t)},n.offset=function(e){return-new Date(e).getTimezoneOffset()},n.equals=function(e){return"local"===e.type},_createClass(t,[{key:"type",get:function(){return"local"}},{key:"name",get:function(){return hasIntl()?(new Intl.DateTimeFormat).resolvedOptions().timeZone:"local"}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===singleton&&(singleton=new t),singleton}}]),t}(Zone),matchingRegex=RegExp("^"+ianaRegex.source+"$"),dtfCache={};var typeToPos={year:0,month:1,day:2,hour:3,minute:4,second:5};var ianaZoneCache={},IANAZone=function(e){function t(n){var r;return(r=e.call(this)||this).zoneName=n,r.valid=t.isValidZone(n),r}_inheritsLoose(t,e),t.create=function(e){return ianaZoneCache[e]||(ianaZoneCache[e]=new t(e)),ianaZoneCache[e]},t.resetCache=function(){ianaZoneCache={},dtfCache={}},t.isValidSpecifier=function(e){return!(!e||!e.match(matchingRegex))},t.isValidZone=function(e){try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}},t.parseGMTOffset=function(e){if(e){var t=e.match(/^Etc\/GMT([+-]\d{1,2})$/i);if(t)return-60*parseInt(t[1])}return null};var n=t.prototype;return n.offsetName=function(e,t){return parseZoneInfo(e,t.format,t.locale,this.name)},n.formatOffset=function(e,t){return formatOffset(this.offset(e),t)},n.offset=function(e){var t=new Date(e),n=function(e){return dtfCache[e]||(dtfCache[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),dtfCache[e]}(this.name),r=n.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var a=n[i],o=a.type,s=a.value,u=typeToPos[o];isUndefined(u)||(r[u]=parseInt(s,10))}return r}(n,t):function(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n),i=r[1],a=r[2];return[r[3],i,a,r[4],r[5],r[6]]}(n,t),i=r[0],a=r[1],o=r[2],s=r[3],u=objToLocalTS({year:i,month:a,day:o,hour:24===s?0:s,minute:r[4],second:r[5],millisecond:0}),c=t.valueOf();return(u-(c-=c%1e3))/6e4},n.equals=function(e){return"iana"===e.type&&e.name===this.name},_createClass(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(Zone),singleton$1=null,FixedOffsetZone=function(e){function t(t){var n;return(n=e.call(this)||this).fixed=t,n}_inheritsLoose(t,e),t.instance=function(e){return 0===e?t.utcInstance:new t(e)},t.parseSpecifier=function(e){if(e){var n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new t(signedOffset(n[1],n[2]))}return null},_createClass(t,null,[{key:"utcInstance",get:function(){return null===singleton$1&&(singleton$1=new t(0)),singleton$1}}]);var n=t.prototype;return n.offsetName=function(){return this.name},n.formatOffset=function(e,t){return formatOffset(this.fixed,t)},n.offset=function(){return this.fixed},n.equals=function(e){return"fixed"===e.type&&e.fixed===this.fixed},_createClass(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+formatOffset(this.fixed,"narrow")}},{key:"universal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}]),t}(Zone),InvalidZone=function(e){function t(t){var n;return(n=e.call(this)||this).zoneName=t,n}_inheritsLoose(t,e);var n=t.prototype;return n.offsetName=function(){return null},n.formatOffset=function(){return""},n.offset=function(){return NaN},n.equals=function(){return!1},_createClass(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(Zone);function normalizeZone(e,t){var n;if(isUndefined(e)||null===e)return t;if(e instanceof Zone)return e;if(function(e){return"string"==typeof e}(e)){var r=e.toLowerCase();return"local"===r?t:"utc"===r||"gmt"===r?FixedOffsetZone.utcInstance:null!=(n=IANAZone.parseGMTOffset(e))?FixedOffsetZone.instance(n):IANAZone.isValidSpecifier(r)?IANAZone.create(e):FixedOffsetZone.parseSpecifier(r)||new InvalidZone(e)}return isNumber(e)?FixedOffsetZone.instance(e):"object"==typeof e&&e.offset&&"number"==typeof e.offset?e:new InvalidZone(e)}var now=function(){return Date.now()},defaultZone=null,defaultLocale=null,defaultNumberingSystem=null,defaultOutputCalendar=null,throwOnInvalid=!1,Settings=function(){function e(){}return e.resetCaches=function(){Locale.resetCache(),IANAZone.resetCache()},_createClass(e,null,[{key:"now",get:function(){return now},set:function(e){now=e}},{key:"defaultZoneName",get:function(){return e.defaultZone.name},set:function(e){defaultZone=e?normalizeZone(e):null}},{key:"defaultZone",get:function(){return defaultZone||LocalZone.instance}},{key:"defaultLocale",get:function(){return defaultLocale},set:function(e){defaultLocale=e}},{key:"defaultNumberingSystem",get:function(){return defaultNumberingSystem},set:function(e){defaultNumberingSystem=e}},{key:"defaultOutputCalendar",get:function(){return defaultOutputCalendar},set:function(e){defaultOutputCalendar=e}},{key:"throwOnInvalid",get:function(){return throwOnInvalid},set:function(e){throwOnInvalid=e}}]),e}(),intlDTCache={};function getCachedDTF(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=intlDTCache[n];return r||(r=new Intl.DateTimeFormat(e,t),intlDTCache[n]=r),r}var intlNumCache={};var intlRelCache={};var sysLocaleCache=null;function listStuff(e,t,n,r,i){var a=e.listingMode(n);return"error"===a?null:"en"===a?r(t):i(t)}var PolyNumberFormatter=function(){function e(e,t,n){if(this.padTo=n.padTo||0,this.floor=n.floor||!1,!t&&hasIntl()){var r={useGrouping:!1};n.padTo>0&&(r.minimumIntegerDigits=n.padTo),this.inf=function(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=intlNumCache[n];return r||(r=new Intl.NumberFormat(e,t),intlNumCache[n]=r),r}(e,r)}}return e.prototype.format=function(e){if(this.inf){var t=this.floor?Math.floor(e):e;return this.inf.format(t)}return padStart(this.floor?Math.floor(e):roundTo(e,3),this.padTo)},e}(),PolyDateFormatter=function(){function e(e,t,n){var r;if(this.opts=n,this.hasIntl=hasIntl(),e.zone.universal&&this.hasIntl?(r="UTC",n.timeZoneName?this.dt=e:this.dt=0===e.offset?e:DateTime.fromMillis(e.ts+60*e.offset*1e3)):"local"===e.zone.type?this.dt=e:(this.dt=e,r=e.zone.name),this.hasIntl){var i=Object.assign({},this.opts);r&&(i.timeZone=r),this.dtf=getCachedDTF(t,i)}}var t=e.prototype;return t.format=function(){if(this.hasIntl)return this.dtf.format(this.dt.toJSDate());var e=function(e){switch(stringify(pick(e,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hour12"]))){case stringify(DATE_SHORT):return"M/d/yyyy";case stringify(DATE_MED):return"LLL d, yyyy";case stringify(DATE_FULL):return"LLLL d, yyyy";case stringify(DATE_HUGE):return"EEEE, LLLL d, yyyy";case stringify(TIME_SIMPLE):return"h:mm a";case stringify(TIME_WITH_SECONDS):return"h:mm:ss a";case stringify(TIME_WITH_SHORT_OFFSET):case stringify(TIME_WITH_LONG_OFFSET):return"h:mm a";case stringify(TIME_24_SIMPLE):return"HH:mm";case stringify(TIME_24_WITH_SECONDS):return"HH:mm:ss";case stringify(TIME_24_WITH_SHORT_OFFSET):case stringify(TIME_24_WITH_LONG_OFFSET):return"HH:mm";case stringify(DATETIME_SHORT):return"M/d/yyyy, h:mm a";case stringify(DATETIME_MED):return"LLL d, yyyy, h:mm a";case stringify(DATETIME_FULL):return"LLLL d, yyyy, h:mm a";case stringify(DATETIME_HUGE):return"EEEE, LLLL d, yyyy, h:mm a";case stringify(DATETIME_SHORT_WITH_SECONDS):return"M/d/yyyy, h:mm:ss a";case stringify(DATETIME_MED_WITH_SECONDS):return"LLL d, yyyy, h:mm:ss a";case stringify(DATETIME_MED_WITH_WEEKDAY):return"EEE, d LLL yyyy, h:mm a";case stringify(DATETIME_FULL_WITH_SECONDS):return"LLLL d, yyyy, h:mm:ss a";case stringify(DATETIME_HUGE_WITH_SECONDS):return"EEEE, LLLL d, yyyy, h:mm:ss a";default:return"EEEE, LLLL d, yyyy, h:mm a"}}(this.opts),t=Locale.create("en-US");return Formatter.create(t).formatDateTimeFromString(this.dt,e)},t.formatToParts=function(){return this.hasIntl&&hasFormatToParts()?this.dtf.formatToParts(this.dt.toJSDate()):[]},t.resolvedOptions=function(){return this.hasIntl?this.dtf.resolvedOptions():{locale:"en-US",numberingSystem:"latn",outputCalendar:"gregory"}},e}(),PolyRelFormatter=function(){function e(e,t,n){this.opts=Object.assign({style:"long"},n),!t&&hasRelative()&&(this.rtf=function(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=intlRelCache[n];return r||(r=new Intl.RelativeTimeFormat(e,t),intlRelCache[n]=r),r}(e,n))}var t=e.prototype;return t.format=function(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n,r){void 0===n&&(n="always"),void 0===r&&(r=!1);var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},a=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&a){var o="days"===e;switch(t){case 1:return o?"tomorrow":"next "+i[e][0];case-1:return o?"yesterday":"last "+i[e][0];case 0:return o?"today":"this "+i[e][0]}}var s=Object.is(t,-0)||t<0,u=Math.abs(t),c=1===u,l=i[e],f=r?c?l[1]:l[2]||l[1]:c?i[e][0]:e;return s?u+" "+f+" ago":"in "+u+" "+f}(t,e,this.opts.numeric,"long"!==this.opts.style)},t.formatToParts=function(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]},e}(),Locale=function(){function e(e,t,n,r){var i=function(e){var t=e.indexOf("-u-");if(-1===t)return[e];var n,r=e.substring(0,t);try{n=getCachedDTF(e).resolvedOptions()}catch(e){n=getCachedDTF(r).resolvedOptions()}var i=n;return[r,i.numberingSystem,i.calendar]}(e),a=i[0],o=i[1],s=i[2];this.locale=a,this.numberingSystem=t||o||null,this.outputCalendar=n||s||null,this.intl=function(e,t,n){return hasIntl()?n||t?(e+="-u",n&&(e+="-ca-"+n),t&&(e+="-nu-"+t),e):e:[]}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}e.fromOpts=function(t){return e.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)},e.create=function(t,n,r,i){void 0===i&&(i=!1);var a=t||Settings.defaultLocale;return new e(a||(i?"en-US":function(){if(sysLocaleCache)return sysLocaleCache;if(hasIntl()){var e=(new Intl.DateTimeFormat).resolvedOptions().locale;return sysLocaleCache=e&&"und"!==e?e:"en-US"}return sysLocaleCache="en-US"}()),n||Settings.defaultNumberingSystem,r||Settings.defaultOutputCalendar,a)},e.resetCache=function(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}},e.fromObject=function(t){var n=void 0===t?{}:t,r=n.locale,i=n.numberingSystem,a=n.outputCalendar;return e.create(r,i,a)};var t=e.prototype;return t.listingMode=function(e){void 0===e&&(e=!0);var t=hasIntl()&&hasFormatToParts(),n=this.isEnglish(),r=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return t||n&&r||e?!t||n&&r?"en":"intl":"error"},t.clone=function(t){return t&&0!==Object.getOwnPropertyNames(t).length?e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this},t.redefaultToEN=function(e){return void 0===e&&(e={}),this.clone(Object.assign({},e,{defaultToEN:!0}))},t.redefaultToSystem=function(e){return void 0===e&&(e={}),this.clone(Object.assign({},e,{defaultToEN:!1}))},t.months=function(e,t,n){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!0),listStuff(this,e,n,months,function(){var n=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return r.monthsCache[i][e]||(r.monthsCache[i][e]=function(e){for(var t=[],n=1;n<=12;n++){var r=DateTime.utc(2016,n,1);t.push(e(r))}return t}(function(e){return r.extract(e,n,"month")})),r.monthsCache[i][e]})},t.weekdays=function(e,t,n){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!0),listStuff(this,e,n,weekdays,function(){var n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return r.weekdaysCache[i][e]||(r.weekdaysCache[i][e]=function(e){for(var t=[],n=1;n<=7;n++){var r=DateTime.utc(2016,11,13+n);t.push(e(r))}return t}(function(e){return r.extract(e,n,"weekday")})),r.weekdaysCache[i][e]})},t.meridiems=function(e){var t=this;return void 0===e&&(e=!0),listStuff(this,void 0,e,function(){return meridiems},function(){if(!t.meridiemCache){var e={hour:"numeric",hour12:!0};t.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map(function(n){return t.extract(n,e,"dayperiod")})}return t.meridiemCache})},t.eras=function(e,t){var n=this;return void 0===t&&(t=!0),listStuff(this,e,t,eras,function(){var t={era:e};return n.eraCache[e]||(n.eraCache[e]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map(function(e){return n.extract(e,t,"era")})),n.eraCache[e]})},t.extract=function(e,t,n){var r=this.dtFormatter(e,t).formatToParts().find(function(e){return e.type.toLowerCase()===n});return r?r.value:null},t.numberFormatter=function(e){return void 0===e&&(e={}),new PolyNumberFormatter(this.intl,e.forceSimple||this.fastNumbers,e)},t.dtFormatter=function(e,t){return void 0===t&&(t={}),new PolyDateFormatter(e,this.intl,t)},t.relFormatter=function(e){return void 0===e&&(e={}),new PolyRelFormatter(this.intl,this.isEnglish(),e)},t.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||hasIntl()&&new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar},_createClass(e,[{key:"fastNumbers",get:function(){return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||hasIntl()&&"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached;var e}}]),e}();function combineRegexes(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t){return e+t.source},"");return RegExp("^"+r+"$")}function combineExtractors(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(t,n){var r=t[0],i=t[1],a=t[2],o=n(e,a),s=o[0],u=o[1],c=o[2];return[Object.assign(r,s),i||u,c]},[{},null,1]).slice(0,2)}}function parse(e){if(null==e)return[null,null];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i],s=o[0],u=o[1],c=s.exec(e);if(c)return u(c)}return[null,null]}function simpleParse(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r,i={};for(r=0;r<t.length;r++)i[t[r]]=parseInteger(e[n+r]);return[i,null,n+r]}}var offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,9}))?)?)?/,isoTimeRegex=RegExp(""+isoTimeBaseRegex.source+offsetRegex.source+"?"),isoTimeExtensionRegex=RegExp("(?:T"+isoTimeRegex.source+")?"),extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlTimeRegex=RegExp(isoTimeBaseRegex.source+" ?(?:"+offsetRegex.source+"|("+ianaRegex.source+"))?"),sqlTimeExtensionRegex=RegExp("(?: "+sqlTimeRegex.source+")?");function int(e,t,n){var r=e[t];return isUndefined(r)?n:parseInteger(r)}function extractISOYmd(e,t){return[{year:int(e,t),month:int(e,t+1,1),day:int(e,t+2,1)},null,t+3]}function extractISOTime(e,t){return[{hour:int(e,t,0),minute:int(e,t+1,0),second:int(e,t+2,0),millisecond:parseMillis(e[t+3])},null,t+4]}function extractISOOffset(e,t){var n=!e[t]&&!e[t+1],r=signedOffset(e[t+1],e[t+2]);return[{},n?null:FixedOffsetZone.instance(r),t+3]}function extractIANAZone(e,t){return[{},e[t]?IANAZone.create(e[t]):null,t+1]}var isoDuration=/^P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})(?:[.,](-?\d{1,9}))?S)?)?)$/;function extractISODuration(e){var t=e[1],n=e[2],r=e[3],i=e[4],a=e[5],o=e[6],s=e[7],u=e[8];return[{years:parseInteger(t),months:parseInteger(n),weeks:parseInteger(r),days:parseInteger(i),hours:parseInteger(a),minutes:parseInteger(o),seconds:parseInteger(s),milliseconds:parseMillis(u)}]}var obsOffsets={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fromStrings(e,t,n,r,i,a,o){var s={year:2===t.length?untruncateYear(parseInteger(t)):parseInteger(t),month:monthsShort.indexOf(n)+1,day:parseInteger(r),hour:parseInteger(i),minute:parseInteger(a)};return o&&(s.second=parseInteger(o)),e&&(s.weekday=e.length>3?weekdaysLong.indexOf(e)+1:weekdaysShort.indexOf(e)+1),s}var rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(e){var t,n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11],m=fromStrings(n,a,i,r,o,s,u);return t=c?obsOffsets[c]:l?0:signedOffset(f,d),[m,new FixedOffsetZone(t)]}var rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(e){var t=e[1],n=e[2],r=e[3];return[fromStrings(t,e[4],r,n,e[5],e[6],e[7]),FixedOffsetZone.utcInstance]}function extractASCII(e){var t=e[1],n=e[2],r=e[3],i=e[4],a=e[5],o=e[6];return[fromStrings(t,e[7],n,r,i,a,o),FixedOffsetZone.utcInstance]}var isoYmdWithTimeExtensionRegex=combineRegexes(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(/(\d{4})-?(\d{3})/,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset),extractISOOrdinalDataAndTime=combineExtractors(extractISOOrdinalData,extractISOTime),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset);var sqlYmdWithTimeExtensionRegex=combineRegexes(/(\d{4})-(\d\d)-(\d\d)/,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOYmdTimeOffsetAndIANAZone=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);var lowOrderMatrix={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},casualMatrix=Object.assign({years:{months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},lowOrderMatrix),accurateMatrix=Object.assign({years:{months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},lowOrderMatrix),orderedUnits=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits.slice(0).reverse();function clone(e,t,n){void 0===n&&(n=!1);var r={values:n?t.values:Object.assign({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new Duration(r)}function convert(e,t,n,r,i){var a=e[i][n],o=t[n]/a,s=Math.sign(o)!==Math.sign(r[i])&&0!==r[i]&&Math.abs(o)<=1?function(e){return e<0?Math.floor(e):Math.ceil(e)}(o):Math.trunc(o);r[i]+=s,t[n]-=s*a}function normalizeValues(e,t){reverseUnits.reduce(function(n,r){return isUndefined(t[r])?n:(n&&convert(e,t,n,t,r),r)},null)}var Duration=function(){function e(e){var t="longterm"===e.conversionAccuracy||!1;this.values=e.values,this.loc=e.loc||Locale.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=t?accurateMatrix:casualMatrix,this.isLuxonDuration=!0}e.fromMillis=function(t,n){return e.fromObject(Object.assign({milliseconds:t},n))},e.fromObject=function(t){if(null==t||"object"!=typeof t)throw new InvalidArgumentError("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new e({values:normalizeObject(t,e.normalizeUnit,["locale","numberingSystem","conversionAccuracy","zone"]),loc:Locale.fromObject(t),conversionAccuracy:t.conversionAccuracy})},e.fromISO=function(t,n){var r=function(e){return parse(e,[isoDuration,extractISODuration])}(t)[0];if(r){var i=Object.assign(r,n);return e.fromObject(i)}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");var r=t instanceof Invalid?t:new Invalid(t,n);if(Settings.throwOnInvalid)throw new InvalidDurationError(r);return new e({invalid:r})},e.normalizeUnit=function(e){var t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new InvalidUnitError(e);return t},e.isDuration=function(e){return e&&e.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(e,t){void 0===t&&(t={});var n=Object.assign({},t,{floor:!1!==t.round&&!1!==t.floor});return this.isValid?Formatter.create(this.loc,n).formatDurationFromString(this,e):"Invalid Duration"},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=Object.assign({},this.values);return e.includeConfig&&(t.conversionAccuracy=this.conversionAccuracy,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toISO=function(){if(!this.isValid)return null;var e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.valueOf=function(){return this.as("milliseconds")},t.plus=function(e){if(!this.isValid)return this;for(var t=friendlyDuration(e),n={},r=0,i=orderedUnits;r<i.length;r++){var a=i[r];(hasOwnProperty(t.values,a)||hasOwnProperty(this.values,a))&&(n[a]=t.get(a)+this.get(a))}return clone(this,{values:n},!0)},t.minus=function(e){if(!this.isValid)return this;var t=friendlyDuration(e);return this.plus(t.negate())},t.mapUnits=function(e){if(!this.isValid)return this;for(var t={},n=0,r=Object.keys(this.values);n<r.length;n++){var i=r[n];t[i]=asNumber(e(this.values[i],i))}return clone(this,{values:t},!0)},t.get=function(t){return this[e.normalizeUnit(t)]},t.set=function(t){return this.isValid?clone(this,{values:Object.assign(this.values,normalizeObject(t,e.normalizeUnit,[]))}):this},t.reconfigure=function(e){var t=void 0===e?{}:e,n=t.locale,r=t.numberingSystem,i=t.conversionAccuracy,a={loc:this.loc.clone({locale:n,numberingSystem:r})};return i&&(a.conversionAccuracy=i),clone(this,a)},t.as=function(e){return this.isValid?this.shiftTo(e).get(e):NaN},t.normalize=function(){if(!this.isValid)return this;var e=this.toObject();return normalizeValues(this.matrix,e),clone(this,{values:e},!0)},t.shiftTo=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!this.isValid)return this;if(0===n.length)return this;n=n.map(function(t){return e.normalizeUnit(t)});var i,a={},o={},s=this.toObject();normalizeValues(this.matrix,s);for(var u=0,c=orderedUnits;u<c.length;u++){var l=c[u];if(n.indexOf(l)>=0){i=l;var f=0;for(var d in o)f+=this.matrix[d][l]*o[d],o[d]=0;isNumber(s[l])&&(f+=s[l]);var m=Math.trunc(f);for(var h in a[l]=m,o[l]=f-m,s)orderedUnits.indexOf(h)>orderedUnits.indexOf(l)&&convert(this.matrix,s,h,a,l)}else isNumber(s[l])&&(o[l]=s[l])}for(var y in o)0!==o[y]&&(a[i]+=y===i?o[y]:o[y]/this.matrix[i][y]);return clone(this,{values:a},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var e={},t=0,n=Object.keys(this.values);t<n.length;t++){var r=n[t];e[r]=-this.values[r]}return clone(this,{values:e},!0)},t.equals=function(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(var t=0,n=orderedUnits;t<n.length;t++){var r=n[t];if(this.values[r]!==e.values[r])return!1}return!0},_createClass(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}();function friendlyDuration(e){if(isNumber(e))return Duration.fromMillis(e);if(Duration.isDuration(e))return e;if("object"==typeof e)return Duration.fromObject(e);throw new InvalidArgumentError("Unknown duration argument "+e+" of type "+typeof e)}var INVALID$1="Invalid Interval";var Interval=function(){function e(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");var r=t instanceof Invalid?t:new Invalid(t,n);if(Settings.throwOnInvalid)throw new InvalidIntervalError(r);return new e({invalid:r})},e.fromDateTimes=function(t,n){var r=friendlyDateTime(t),i=friendlyDateTime(n),a=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?Interval.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null:Interval.invalid("missing or invalid end"):Interval.invalid("missing or invalid start")}(r,i);return null==a?new e({start:r,end:i}):a},e.after=function(t,n){var r=friendlyDuration(n),i=friendlyDateTime(t);return e.fromDateTimes(i,i.plus(r))},e.before=function(t,n){var r=friendlyDuration(n),i=friendlyDateTime(t);return e.fromDateTimes(i.minus(r),i)},e.fromISO=function(t,n){var r=(t||"").split("/",2),i=r[0],a=r[1];if(i&&a){var o=DateTime.fromISO(i,n),s=DateTime.fromISO(a,n);if(o.isValid&&s.isValid)return e.fromDateTimes(o,s);if(o.isValid){var u=Duration.fromISO(a,n);if(u.isValid)return e.after(o,u)}else if(s.isValid){var c=Duration.fromISO(i,n);if(c.isValid)return e.before(s,c)}}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed asISO 8601")},e.isInterval=function(e){return e&&e.isLuxonInterval||!1};var t=e.prototype;return t.length=function(e){return void 0===e&&(e="milliseconds"),this.isValid?this.toDuration.apply(this,[e]).get(e):NaN},t.count=function(e){if(void 0===e&&(e="milliseconds"),!this.isValid)return NaN;var t=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(t,e).get(e))+1},t.hasSame=function(e){return!!this.isValid&&this.e.minus(1).hasSame(this.s,e)},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(e){return!!this.isValid&&this.s>e},t.isBefore=function(e){return!!this.isValid&&this.e<=e},t.contains=function(e){return!!this.isValid&&this.s<=e&&this.e>e},t.set=function(t){var n=void 0===t?{}:t,r=n.start,i=n.end;return this.isValid?e.fromDateTimes(r||this.s,i||this.e):this},t.splitAt=function(){var t=this;if(!this.isValid)return[];for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=r.map(friendlyDateTime).filter(function(e){return t.contains(e)}).sort(),o=[],s=this.s,u=0;s<this.e;){var c=a[u]||this.e,l=+c>+this.e?this.e:c;o.push(e.fromDateTimes(s,l)),s=l,u+=1}return o},t.splitBy=function(t){var n=friendlyDuration(t);if(!this.isValid||!n.isValid||0===n.as("milliseconds"))return[];for(var r,i,a=this.s,o=[];a<this.e;)i=+(r=a.plus(n))>+this.e?this.e:r,o.push(e.fromDateTimes(a,i)),a=i;return o},t.divideEqually=function(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]},t.overlaps=function(e){return this.e>e.s&&this.s<e.e},t.abutsStart=function(e){return!!this.isValid&&+this.e==+e.s},t.abutsEnd=function(e){return!!this.isValid&&+e.e==+this.s},t.engulfs=function(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e},t.equals=function(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)},t.intersection=function(t){if(!this.isValid)return this;var n=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return n>r?null:e.fromDateTimes(n,r)},t.union=function(t){if(!this.isValid)return this;var n=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return e.fromDateTimes(n,r)},e.merge=function(e){var t=e.sort(function(e,t){return e.s-t.s}).reduce(function(e,t){var n=e[0],r=e[1];return r?r.overlaps(t)||r.abutsStart(t)?[n,r.union(t)]:[n.concat([r]),t]:[n,t]},[[],null]),n=t[0],r=t[1];return r&&n.push(r),n},e.xor=function(t){var n,r=null,i=0,a=[],o=t.map(function(e){return[{time:e.s,type:"s"},{time:e.e,type:"e"}]}),s=(n=Array.prototype).concat.apply(n,o).sort(function(e,t){return e.time-t.time}),u=Array.isArray(s),c=0;for(s=u?s:s[Symbol.iterator]();;){var l;if(u){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var f=l;1===(i+="s"===f.type?1:-1)?r=f.time:(r&&+r!=+f.time&&a.push(e.fromDateTimes(r,f.time)),r=null)}return e.merge(a)},t.difference=function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.xor([this].concat(r)).map(function(e){return t.intersection(e)}).filter(function(e){return e&&!e.isEmpty()})},t.toString=function(){return this.isValid?"["+this.s.toISO()+" – "+this.e.toISO()+")":INVALID$1},t.toISO=function(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):INVALID$1},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():INVALID$1},t.toISOTime=function(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):INVALID$1},t.toFormat=function(e,t){var n=(void 0===t?{}:t).separator,r=void 0===n?" – ":n;return this.isValid?""+this.s.toFormat(e)+r+this.e.toFormat(e):INVALID$1},t.toDuration=function(e,t){return this.isValid?this.e.diff(this.s,e,t):Duration.invalid(this.invalidReason)},t.mapEndpoints=function(t){return e.fromDateTimes(t(this.s),t(this.e))},_createClass(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),Info=function(){function e(){}return e.hasDST=function(e){void 0===e&&(e=Settings.defaultZone);var t=DateTime.local().setZone(e).set({month:12});return!e.universal&&t.offset!==t.set({month:6}).offset},e.isValidIANAZone=function(e){return IANAZone.isValidSpecifier(e)&&IANAZone.isValidZone(e)},e.normalizeZone=function(e){return normalizeZone(e,Settings.defaultZone)},e.months=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,a=n.numberingSystem,o=void 0===a?null:a,s=n.outputCalendar,u=void 0===s?"gregory":s;return Locale.create(i,o,u).months(e)},e.monthsFormat=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,a=n.numberingSystem,o=void 0===a?null:a,s=n.outputCalendar,u=void 0===s?"gregory":s;return Locale.create(i,o,u).months(e,!0)},e.weekdays=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,a=n.numberingSystem,o=void 0===a?null:a;return Locale.create(i,o,null).weekdays(e)},e.weekdaysFormat=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,a=n.numberingSystem,o=void 0===a?null:a;return Locale.create(i,o,null).weekdays(e,!0)},e.meridiems=function(e){var t=(void 0===e?{}:e).locale,n=void 0===t?null:t;return Locale.create(n).meridiems()},e.eras=function(e,t){void 0===e&&(e="short");var n=(void 0===t?{}:t).locale,r=void 0===n?null:n;return Locale.create(r,null,"gregory").eras(e)},e.features=function(){var e=!1,t=!1,n=!1,r=!1;if(hasIntl()){e=!0,t=hasFormatToParts(),r=hasRelative();try{n="America/New_York"===new Intl.DateTimeFormat("en",{timeZone:"America/New_York"}).resolvedOptions().timeZone}catch(e){n=!1}}return{intl:e,intlTokens:t,zones:n,relative:r}},e}();function dayDiff(e,t){var n=function(e){return e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=n(t)-n(e);return Math.floor(Duration.fromMillis(r).as("days"))}function _diff(e,t,n,r){var f,i=function(e,t,n){for(var r,i,a={},o=0,s=[["years",function(e,t){return t.year-e.year}],["months",function(e,t){return t.month-e.month+12*(t.year-e.year)}],["weeks",function(e,t){var n=dayDiff(e,t);return(n-n%7)/7}],["days",dayDiff]];o<s.length;o++){var u=s[o],c=u[0],l=u[1];if(n.indexOf(c)>=0){var f;r=c;var d,m=l(e,t);(i=e.plus(((f={})[c]=m,f)))>t?(e=e.plus(((d={})[c]=m-1,d)),m-=1):e=i,a[c]=m}}return[e,a,i,r]}(e,t,n),a=i[0],o=i[1],s=i[2],u=i[3],c=t-a,l=n.filter(function(e){return["hours","minutes","seconds","milliseconds"].indexOf(e)>=0});0===l.length&&(s<t&&(s=a.plus(((f={})[u]=1,f))),s!==a&&(o[u]=(o[u]||0)+c/(s-a)));var d,m=Duration.fromObject(Object.assign(o,r));return l.length>0?(d=Duration.fromMillis(c,r)).shiftTo.apply(d,l).plus(m):m}var numberingSystems={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function digitRegex(e,t){var n=e.numberingSystem;return void 0===t&&(t=""),new RegExp(""+numberingSystems[n||"latn"]+t)}var MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(e,t){return void 0===t&&(t=function(e){return e}),{regex:e,deser:function(e){var n=e[0];return t(function(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(-1!==e[n].search(numberingSystems.hanidec))t+=hanidecChars.indexOf(e[n]);else for(var i in numberingSystemsUTF16){var a=numberingSystemsUTF16[i],o=a[0],s=a[1];r>=o&&r<=s&&(t+=r-o)}}return parseInt(t,10)}return t}(n))}}}function fixListRegex(e){return e.replace(/\./,"\\.?")}function stripInsensitivities(e){return e.replace(/\./,"").toLowerCase()}function oneOf(e,t){return null===e?null:{regex:RegExp(e.map(fixListRegex).join("|")),deser:function(n){var r=n[0];return e.findIndex(function(e){return stripInsensitivities(r)===stripInsensitivities(e)})+t}}}function offset(e,t){return{regex:e,deser:function(e){return signedOffset(e[1],e[2])},groups:t}}function simple(e){return{regex:e,deser:function(e){return e[0]}}}var partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};var dummyDateTimeCache=null;function maybeExpandMacroToken(e,t){if(e.literal)return e;var n=Formatter.macroTokenToFormatOpts(e.val);if(!n)return e;var r=Formatter.create(t,n).formatDateTimeParts((dummyDateTimeCache||(dummyDateTimeCache=DateTime.fromMillis(1555555555555)),dummyDateTimeCache)).map(function(e){return function(e,t,n){var r=e.type,i=e.value;if("literal"===r)return{literal:!0,val:i};var a=n[r],o=partTypeStyleToTokenVal[r];return"object"==typeof o&&(o=o[a]),o?{literal:!1,val:o}:void 0}(e,0,n)});return r.includes(void 0)?e:r}function explainFromTokens(e,t,n){var r=function(e,t){var n;return(n=Array.prototype).concat.apply(n,e.map(function(e){return maybeExpandMacroToken(e,t)}))}(Formatter.parseFormat(n),e),i=r.map(function(t){return function(e,t){var n=digitRegex(t),r=digitRegex(t,"{2}"),i=digitRegex(t,"{3}"),a=digitRegex(t,"{4}"),o=digitRegex(t,"{6}"),s=digitRegex(t,"{1,2}"),u=digitRegex(t,"{1,3}"),c=digitRegex(t,"{1,6}"),l=digitRegex(t,"{1,9}"),f=digitRegex(t,"{2,4}"),d=digitRegex(t,"{4,6}"),m=function(e){return{regex:RegExp(function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}(e.val)),deser:function(e){return e[0]},literal:!0}},h=function(h){if(e.literal)return m(h);switch(h.val){case"G":return oneOf(t.eras("short",!1),0);case"GG":return oneOf(t.eras("long",!1),0);case"y":return intUnit(c);case"yy":return intUnit(f,untruncateYear);case"yyyy":return intUnit(a);case"yyyyy":return intUnit(d);case"yyyyyy":return intUnit(o);case"M":return intUnit(s);case"MM":return intUnit(r);case"MMM":return oneOf(t.months("short",!0,!1),1);case"MMMM":return oneOf(t.months("long",!0,!1),1);case"L":return intUnit(s);case"LL":return intUnit(r);case"LLL":return oneOf(t.months("short",!1,!1),1);case"LLLL":return oneOf(t.months("long",!1,!1),1);case"d":return intUnit(s);case"dd":return intUnit(r);case"o":return intUnit(u);case"ooo":return intUnit(i);case"HH":return intUnit(r);case"H":return intUnit(s);case"hh":return intUnit(r);case"h":return intUnit(s);case"mm":return intUnit(r);case"m":case"q":return intUnit(s);case"qq":return intUnit(r);case"s":return intUnit(s);case"ss":return intUnit(r);case"S":return intUnit(u);case"SSS":return intUnit(i);case"u":return simple(l);case"a":return oneOf(t.meridiems(),0);case"kkkk":return intUnit(a);case"kk":return intUnit(f,untruncateYear);case"W":return intUnit(s);case"WW":return intUnit(r);case"E":case"c":return intUnit(n);case"EEE":return oneOf(t.weekdays("short",!1,!1),1);case"EEEE":return oneOf(t.weekdays("long",!1,!1),1);case"ccc":return oneOf(t.weekdays("short",!0,!1),1);case"cccc":return oneOf(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return offset(new RegExp("([+-]"+s.source+")(?::("+r.source+"))?"),2);case"ZZZ":return offset(new RegExp("([+-]"+s.source+")("+r.source+")?"),2);case"z":return simple(/[a-z_+-\/]{1,256}?/i);default:return m(h)}}(e)||{invalidReason:MISSING_FTP};return h.token=e,h}(t,e)}),a=i.find(function(e){return e.invalidReason});if(a)return{input:t,tokens:r,invalidReason:a.invalidReason};var o=function(e){return["^"+e.map(function(e){return e.regex}).reduce(function(e,t){return e+"("+t.source+")"},"")+"$",e]}(i),s=o[0],u=o[1],c=RegExp(s,"i"),l=function(e,t,n){var r=e.match(t);if(r){var i={},a=1;for(var o in n)if(hasOwnProperty(n,o)){var s=n[o],u=s.groups?s.groups+1:1;!s.literal&&s.token&&(i[s.token.val[0]]=s.deser(r.slice(a,a+u))),a+=u}return[r,i]}return[r,{}]}(t,c,u),f=l[0],d=l[1],m=d?function(e){var t;return t=isUndefined(e.Z)?isUndefined(e.z)?null:IANAZone.create(e.z):new FixedOffsetZone(e.Z),isUndefined(e.q)||(e.M=3*(e.q-1)+1),isUndefined(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),isUndefined(e.u)||(e.S=parseMillis(e.u)),[Object.keys(e).reduce(function(t,n){var r=function(e){switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}();return r&&(t[r]=e[n]),t},{}),t]}(d):[null,null];return{input:t,tokens:r,regex:c,rawMatches:f,matches:d,result:m[0],zone:m[1]}}var nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(e,t){return new Invalid("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function dayOfWeek(e,t,n){var r=new Date(Date.UTC(e,t-1,n)).getUTCDay();return 0===r?7:r}function computeOrdinal(e,t,n){return n+(isLeapYear(e)?leapLadder:nonLeapLadder)[t-1]}function uncomputeOrdinal(e,t){var n=isLeapYear(e)?leapLadder:nonLeapLadder,r=n.findIndex(function(e){return e<t});return{month:r+1,day:t-n[r]}}function gregorianToWeek(e){var t,n=e.year,r=e.month,i=e.day,a=computeOrdinal(n,r,i),o=dayOfWeek(n,r,i),s=Math.floor((a-o+10)/7);return s<1?s=weeksInWeekYear(t=n-1):s>weeksInWeekYear(n)?(t=n+1,s=1):t=n,Object.assign({weekYear:t,weekNumber:s,weekday:o},timeObject(e))}function weekToGregorian(e){var t,n=e.weekYear,r=e.weekNumber,i=e.weekday,a=dayOfWeek(n,1,4),o=daysInYear(n),s=7*r+i-a-3;s<1?s+=daysInYear(t=n-1):s>o?(t=n+1,s-=daysInYear(n)):t=n;var u=uncomputeOrdinal(t,s),c=u.month,l=u.day;return Object.assign({year:t,month:c,day:l},timeObject(e))}function gregorianToOrdinal(e){var t=e.year,n=computeOrdinal(t,e.month,e.day);return Object.assign({year:t,ordinal:n},timeObject(e))}function ordinalToGregorian(e){var t=e.year,n=uncomputeOrdinal(t,e.ordinal),r=n.month,i=n.day;return Object.assign({year:t,month:r,day:i},timeObject(e))}function hasInvalidGregorianData(e){var t=isInteger(e.year),n=integerBetween(e.month,1,12),r=integerBetween(e.day,1,daysInMonth(e.year,e.month));return t?n?!r&&unitOutOfRange("day",e.day):unitOutOfRange("month",e.month):unitOutOfRange("year",e.year)}function hasInvalidTimeData(e){var t=e.hour,n=e.minute,r=e.second,i=e.millisecond,a=integerBetween(t,0,23)||24===t&&0===n&&0===r&&0===i,o=integerBetween(n,0,59),s=integerBetween(r,0,59),u=integerBetween(i,0,999);return a?o?s?!u&&unitOutOfRange("millisecond",i):unitOutOfRange("second",r):unitOutOfRange("minute",n):unitOutOfRange("hour",t)}function unsupportedZone(e){return new Invalid("unsupported zone",'the zone "'+e.name+'" is not supported')}function possiblyCachedWeekData(e){return null===e.weekData&&(e.weekData=gregorianToWeek(e.c)),e.weekData}function clone$1(e,t){var n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new DateTime(Object.assign({},n,t,{old:n}))}function fixOffset(e,t,n){var r=e-60*t*1e3,i=n.offset(r);if(t===i)return[r,t];r-=60*(i-t)*1e3;var a=n.offset(r);return i===a?[r,i]:[e-60*Math.min(i,a)*1e3,Math.max(i,a)]}function tsToObj(e,t){var n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function objToTS(e,t,n){return fixOffset(objToLocalTS(e),t,n)}function adjustTime(e,t){var n,r=Object.keys(t.values);-1===r.indexOf("milliseconds")&&r.push("milliseconds"),t=(n=t).shiftTo.apply(n,r);var i=e.o,a=e.c.year+t.years,o=e.c.month+t.months+3*t.quarters,s=Object.assign({},e.c,{year:a,month:o,day:Math.min(e.c.day,daysInMonth(a,o))+t.days+7*t.weeks}),u=Duration.fromObject({hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),c=fixOffset(objToLocalTS(s),i,e.zone),l=c[0],f=c[1];return 0!==u&&(l+=u,f=e.zone.offset(l)),{ts:l,o:f}}function parseDataToDateTime(e,t,n,r,i){var a=n.setZone,o=n.zone;if(e&&0!==Object.keys(e).length){var s=t||o,u=DateTime.fromObject(Object.assign(e,n,{zone:s,setZone:void 0}));return a?u:u.setZone(o)}return DateTime.invalid(new Invalid("unparsable",'the input "'+i+"\" can't be parsed as "+r))}function toTechFormat(e,t){return e.isValid?Formatter.create(Locale.create("en-US"),{allowZ:!0,forceSimple:!0}).formatDateTimeFromString(e,t):null}function toTechTimeFormat(e,t){var n=t.suppressSeconds,r=void 0!==n&&n,i=t.suppressMilliseconds,a=void 0!==i&&i,o=t.includeOffset,s=t.includeZone,u=void 0!==s&&s,c=t.spaceZone,l=void 0!==c&&c,f="HH:mm";return r&&0===e.second&&0===e.millisecond||(f+=":ss",a&&0===e.millisecond||(f+=".SSS")),(u||o)&&l&&(f+=" "),u?f+="z":o&&(f+="ZZ"),toTechFormat(e,f)}var defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},orderedUnits$1=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new InvalidUnitError(e);return t}function quickDT(e,t){for(var n=0,r=orderedUnits$1;n<r.length;n++){var i=r[n];isUndefined(e[i])&&(e[i]=defaultUnitValues[i])}var a=hasInvalidGregorianData(e)||hasInvalidTimeData(e);if(a)return DateTime.invalid(a);var o=Settings.now(),s=objToTS(e,t.offset(o),t),u=s[0],c=s[1];return new DateTime({ts:u,zone:t,o:c})}function diffRelative(e,t,n){var r=!!isUndefined(n.round)||n.round,i=function(e,i){return e=roundTo(e,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,i)},a=function(r){return n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r)};if(n.unit)return i(a(n.unit),n.unit);var o=n.units,s=Array.isArray(o),u=0;for(o=s?o:o[Symbol.iterator]();;){var c;if(s){if(u>=o.length)break;c=o[u++]}else{if((u=o.next()).done)break;c=u.value}var l=c,f=a(l);if(Math.abs(f)>=1)return i(f,l)}return i(0,n.units[n.units.length-1])}var DateTime=function(){function e(e){var t=e.zone||Settings.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Invalid("invalid input"):null)||(t.isValid?null:unsupportedZone(t));this.ts=isUndefined(e.ts)?Settings.now():e.ts;var r=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t)){var a=[e.old.c,e.old.o];r=a[0],i=a[1]}else r=tsToObj(this.ts,t.offset(this.ts)),r=(n=Number.isNaN(r.year)?new Invalid("invalid input"):null)?null:r,i=n?null:t.offset(this.ts);this._zone=t,this.loc=e.loc||Locale.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}e.local=function(t,n,r,i,a,o,s){return isUndefined(t)?new e({ts:Settings.now()}):quickDT({year:t,month:n,day:r,hour:i,minute:a,second:o,millisecond:s},Settings.defaultZone)},e.utc=function(t,n,r,i,a,o,s){return isUndefined(t)?new e({ts:Settings.now(),zone:FixedOffsetZone.utcInstance}):quickDT({year:t,month:n,day:r,hour:i,minute:a,second:o,millisecond:s},FixedOffsetZone.utcInstance)},e.fromJSDate=function(t,n){void 0===n&&(n={});var r=function(e){return"[object Date]"===Object.prototype.toString.call(e)}(t)?t.valueOf():NaN;if(Number.isNaN(r))return e.invalid("invalid input");var i=normalizeZone(n.zone,Settings.defaultZone);return i.isValid?new e({ts:r,zone:i,loc:Locale.fromObject(n)}):e.invalid(unsupportedZone(i))},e.fromMillis=function(t,n){if(void 0===n&&(n={}),isNumber(t))return t<-864e13||t>864e13?e.invalid("Timestamp out of range"):new e({ts:t,zone:normalizeZone(n.zone,Settings.defaultZone),loc:Locale.fromObject(n)});throw new InvalidArgumentError("fromMillis requires a numerical input")},e.fromSeconds=function(t,n){if(void 0===n&&(n={}),isNumber(t))return new e({ts:1e3*t,zone:normalizeZone(n.zone,Settings.defaultZone),loc:Locale.fromObject(n)});throw new InvalidArgumentError("fromSeconds requires a numerical input")},e.fromObject=function(t){var n=normalizeZone(t.zone,Settings.defaultZone);if(!n.isValid)return e.invalid(unsupportedZone(n));var r=Settings.now(),i=n.offset(r),a=normalizeObject(t,normalizeUnit,["zone","locale","outputCalendar","numberingSystem"]),o=!isUndefined(a.ordinal),s=!isUndefined(a.year),u=!isUndefined(a.month)||!isUndefined(a.day),c=s||u,l=a.weekYear||a.weekNumber,f=Locale.fromObject(t);if((c||o)&&l)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");var d,m,h=l||a.weekday&&!c,y=tsToObj(r,i);h?(d=orderedWeekUnits,m=defaultWeekUnitValues,y=gregorianToWeek(y)):o?(d=orderedOrdinalUnits,m=defaultOrdinalUnitValues,y=gregorianToOrdinal(y)):(d=orderedUnits$1,m=defaultUnitValues);var v=!1,g=d,T=Array.isArray(g),p=0;for(g=T?g:g[Symbol.iterator]();;){var O;if(T){if(p>=g.length)break;O=g[p++]}else{if((p=g.next()).done)break;O=p.value}var I=O;isUndefined(a[I])?a[I]=v?m[I]:y[I]:v=!0}var S=(h?function(e){var t=isInteger(e.weekYear),n=integerBetween(e.weekNumber,1,weeksInWeekYear(e.weekYear)),r=integerBetween(e.weekday,1,7);return t?n?!r&&unitOutOfRange("weekday",e.weekday):unitOutOfRange("week",e.week):unitOutOfRange("weekYear",e.weekYear)}(a):o?function(e){var t=isInteger(e.year),n=integerBetween(e.ordinal,1,daysInYear(e.year));return t?!n&&unitOutOfRange("ordinal",e.ordinal):unitOutOfRange("year",e.year)}(a):hasInvalidGregorianData(a))||hasInvalidTimeData(a);if(S)return e.invalid(S);var E=objToTS(h?weekToGregorian(a):o?ordinalToGregorian(a):a,i,n),D=new e({ts:E[0],zone:n,o:E[1],loc:f});return a.weekday&&c&&t.weekday!==D.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+a.weekday+" and a date of "+D.toISO()):D},e.fromISO=function(e,t){void 0===t&&(t={});var n=function(e){return parse(e,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDataAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}(e);return parseDataToDateTime(n[0],n[1],t,"ISO 8601",e)},e.fromRFC2822=function(e,t){void 0===t&&(t={});var n=function(e){return parse(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[rfc2822,extractRFC2822])}(e);return parseDataToDateTime(n[0],n[1],t,"RFC 2822",e)},e.fromHTTP=function(e,t){void 0===t&&(t={});var n=function(e){return parse(e,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}(e);return parseDataToDateTime(n[0],n[1],t,"HTTP",t)},e.fromFormat=function(t,n,r){if(void 0===r&&(r={}),isUndefined(t)||isUndefined(n))throw new InvalidArgumentError("fromFormat requires an input string and a format");var i=r,a=i.locale,o=void 0===a?null:a,s=i.numberingSystem,u=void 0===s?null:s,c=function(e,t,n){var r=explainFromTokens(e,t,n);return[r.result,r.zone,r.invalidReason]}(Locale.fromOpts({locale:o,numberingSystem:u,defaultToEN:!0}),t,n),l=c[0],f=c[1],d=c[2];return d?e.invalid(d):parseDataToDateTime(l,f,r,"format "+n,t)},e.fromString=function(t,n,r){return void 0===r&&(r={}),e.fromFormat(t,n,r)},e.fromSQL=function(e,t){void 0===t&&(t={});var n=function(e){return parse(e,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeOffsetAndIANAZone],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}(e);return parseDataToDateTime(n[0],n[1],t,"SQL",e)},e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");var r=t instanceof Invalid?t:new Invalid(t,n);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(r);return new e({invalid:r})},e.isDateTime=function(e){return e&&e.isLuxonDateTime||!1};var t=e.prototype;return t.get=function(e){return this[e]},t.resolvedLocaleOpts=function(e){void 0===e&&(e={});var t=Formatter.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t.locale,numberingSystem:t.numberingSystem,outputCalendar:t.calendar}},t.toUTC=function(e,t){return void 0===e&&(e=0),void 0===t&&(t={}),this.setZone(FixedOffsetZone.instance(e),t)},t.toLocal=function(){return this.setZone(Settings.defaultZone)},t.setZone=function(t,n){var r=void 0===n?{}:n,i=r.keepLocalTime,a=void 0!==i&&i,o=r.keepCalendarTime,s=void 0!==o&&o;if((t=normalizeZone(t,Settings.defaultZone)).equals(this.zone))return this;if(t.isValid){var u=this.ts;if(a||s){var c=this.o-t.offset(this.ts);u=objToTS(this.toObject(),c,t)[0]}return clone$1(this,{ts:u,zone:t})}return e.invalid(unsupportedZone(t))},t.reconfigure=function(e){var t=void 0===e?{}:e,n=t.locale,r=t.numberingSystem,i=t.outputCalendar;return clone$1(this,{loc:this.loc.clone({locale:n,numberingSystem:r,outputCalendar:i})})},t.setLocale=function(e){return this.reconfigure({locale:e})},t.set=function(e){if(!this.isValid)return this;var t,n=normalizeObject(e,normalizeUnit,[]);isUndefined(n.weekYear)&&isUndefined(n.weekNumber)&&isUndefined(n.weekday)?isUndefined(n.ordinal)?(t=Object.assign(this.toObject(),n),isUndefined(n.day)&&(t.day=Math.min(daysInMonth(t.year,t.month),t.day))):t=ordinalToGregorian(Object.assign(gregorianToOrdinal(this.c),n)):t=weekToGregorian(Object.assign(gregorianToWeek(this.c),n));var r=objToTS(t,this.o,this.zone);return clone$1(this,{ts:r[0],o:r[1]})},t.plus=function(e){return this.isValid?clone$1(this,adjustTime(this,friendlyDuration(e))):this},t.minus=function(e){return this.isValid?clone$1(this,adjustTime(this,friendlyDuration(e).negate())):this},t.startOf=function(e){if(!this.isValid)return this;var t={},n=Duration.normalizeUnit(e);switch(n){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===n&&(t.weekday=1),"quarters"===n){var r=Math.ceil(this.month/3);t.month=3*(r-1)+1}return this.set(t)},t.endOf=function(e){var t;return this.isValid?this.plus((t={},t[e]=1,t)).startOf(e).minus(1):this},t.toFormat=function(e,t){return void 0===t&&(t={}),this.isValid?Formatter.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):"Invalid DateTime"},t.toLocaleString=function(e){return void 0===e&&(e=DATE_SHORT),this.isValid?Formatter.create(this.loc.clone(e),e).formatDateTime(this):"Invalid DateTime"},t.toLocaleParts=function(e){return void 0===e&&(e={}),this.isValid?Formatter.create(this.loc.clone(e),e).formatDateTimeParts(this):[]},t.toISO=function(e){return void 0===e&&(e={}),this.isValid?this.toISODate()+"T"+this.toISOTime(e):null},t.toISODate=function(){var e="yyyy-MM-dd";return this.year>9999&&(e="+"+e),toTechFormat(this,e)},t.toISOWeekDate=function(){return toTechFormat(this,"kkkk-'W'WW-c")},t.toISOTime=function(e){var t=void 0===e?{}:e,n=t.suppressMilliseconds,r=void 0!==n&&n,i=t.suppressSeconds,a=void 0!==i&&i,o=t.includeOffset;return toTechTimeFormat(this,{suppressSeconds:a,suppressMilliseconds:r,includeOffset:void 0===o||o})},t.toRFC2822=function(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ")},t.toHTTP=function(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return toTechFormat(this,"yyyy-MM-dd")},t.toSQLTime=function(e){var t=void 0===e?{}:e,n=t.includeOffset,r=void 0===n||n,i=t.includeZone;return toTechTimeFormat(this,{includeOffset:r,includeZone:void 0!==i&&i,spaceZone:!0})},t.toSQL=function(e){return void 0===e&&(e={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null},t.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=Object.assign({},this.c);return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(e,t,n){if(void 0===t&&(t="milliseconds"),void 0===n&&(n={}),!this.isValid||!e.isValid)return Duration.invalid(this.invalid||e.invalid,"created by diffing an invalid DateTime");var r=Object.assign({locale:this.locale,numberingSystem:this.numberingSystem},n),i=function(e){return Array.isArray(e)?e:[e]}(t).map(Duration.normalizeUnit),a=e.valueOf()>this.valueOf(),o=_diff(a?this:e,a?e:this,i,r);return a?o.negate():o},t.diffNow=function(t,n){return void 0===t&&(t="milliseconds"),void 0===n&&(n={}),this.diff(e.local(),t,n)},t.until=function(e){return this.isValid?Interval.fromDateTimes(this,e):this},t.hasSame=function(e,t){if(!this.isValid)return!1;if("millisecond"===t)return this.valueOf()===e.valueOf();var n=e.valueOf();return this.startOf(t)<=n&&n<=this.endOf(t)},t.equals=function(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)},t.toRelative=function(t){if(void 0===t&&(t={}),!this.isValid)return null;var n=t.base||e.fromObject({zone:this.zone}),r=t.padding?this<n?-t.padding:t.padding:0;return diffRelative(n,this.plus(r),Object.assign(t,{numeric:"always",units:["years","months","days","hours","minutes","seconds"]}))},t.toRelativeCalendar=function(t){return void 0===t&&(t={}),this.isValid?diffRelative(t.base||e.fromObject({zone:this.zone}),this,Object.assign(t,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.every(e.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(n,function(e){return e.valueOf()},Math.min)},e.max=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.every(e.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(n,function(e){return e.valueOf()},Math.max)},e.fromFormatExplain=function(e,t,n){void 0===n&&(n={});var r=n,i=r.locale,a=void 0===i?null:i,o=r.numberingSystem,s=void 0===o?null:o;return explainFromTokens(Locale.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0}),e,t)},e.fromStringExplain=function(t,n,r){return void 0===r&&(r={}),e.fromFormatExplain(t,n,r)},_createClass(e,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?Info.months("short",{locale:this.locale})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?Info.months("long",{locale:this.locale})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?Info.weekdays("short",{locale:this.locale})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?Info.weekdays("long",{locale:this.locale})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.universal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return isLeapYear(this.year)}},{key:"daysInMonth",get:function(){return daysInMonth(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?daysInYear(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return DATE_SHORT}},{key:"DATE_MED",get:function(){return DATE_MED}},{key:"DATE_FULL",get:function(){return DATE_FULL}},{key:"DATE_HUGE",get:function(){return DATE_HUGE}},{key:"TIME_SIMPLE",get:function(){return TIME_SIMPLE}},{key:"TIME_WITH_SECONDS",get:function(){return TIME_WITH_SECONDS}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return TIME_WITH_SHORT_OFFSET}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return TIME_WITH_LONG_OFFSET}},{key:"TIME_24_SIMPLE",get:function(){return TIME_24_SIMPLE}},{key:"TIME_24_WITH_SECONDS",get:function(){return TIME_24_WITH_SECONDS}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return TIME_24_WITH_SHORT_OFFSET}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return TIME_24_WITH_LONG_OFFSET}},{key:"DATETIME_SHORT",get:function(){return DATETIME_SHORT}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return DATETIME_SHORT_WITH_SECONDS}},{key:"DATETIME_MED",get:function(){return DATETIME_MED}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return DATETIME_MED_WITH_SECONDS}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return DATETIME_MED_WITH_WEEKDAY}},{key:"DATETIME_FULL",get:function(){return DATETIME_FULL}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return DATETIME_FULL_WITH_SECONDS}},{key:"DATETIME_HUGE",get:function(){return DATETIME_HUGE}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return DATETIME_HUGE_WITH_SECONDS}}]),e}();function friendlyDateTime(e){if(DateTime.isDateTime(e))return e;if(e&&e.valueOf&&isNumber(e.valueOf()))return DateTime.fromJSDate(e);if(e&&"object"==typeof e)return DateTime.fromObject(e);throw new InvalidArgumentError("Unknown datetime argument: "+e+", of type "+typeof e)}exports.DateTime=DateTime,exports.Duration=Duration,exports.FixedOffsetZone=FixedOffsetZone,exports.IANAZone=IANAZone,exports.Info=Info,exports.Interval=Interval,exports.InvalidZone=InvalidZone,exports.LocalZone=LocalZone,exports.Settings=Settings,exports.Zone=Zone},{}],196:[function(require,module,exports){"use strict";const escapeStringRegexp=require("escape-string-regexp"),regexpCache=new Map;function makeRegexp(e,r){r={caseSensitive:!1,...r};const t=e+JSON.stringify(r);if(regexpCache.has(t))return regexpCache.get(t);const s="!"===e[0];s&&(e=e.slice(1)),e=escapeStringRegexp(e).replace(/\\\*/g,".*");const n=new RegExp(`^${e}$`,r.caseSensitive?"":"i");return n.negated=s,regexpCache.set(t,n),n}module.exports=((e,r,t)=>{if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError(`Expected two arrays, got ${typeof e} ${typeof r}`);if(0===r.length)return e;const s="!"===r[0][0];r=r.map(e=>makeRegexp(e,t));const n=[];for(const t of e){let e=s;for(const s of r)s.test(t)&&(e=!s.negated);e&&n.push(t)}return n}),module.exports.isMatch=((e,r,t)=>{const s=Array.isArray(e)?e:[e],n=Array.isArray(r)?r:[r];return s.some(e=>n.every(r=>{const s=makeRegexp(r,t),n=s.test(e);return s.negated?!n:n}))})},{"escape-string-regexp":197}],197:[function(require,module,exports){"use strict";const matchOperatorsRegex=/[|\\{}()[\]^$+*?.-]/g;module.exports=(e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(matchOperatorsRegex,"\\$&")})},{}],198:[function(require,module,exports){"use strict";const vm=require("vm"),path=require("path"),Module=require("module"),isAbsolutePath=require("path-is-absolute");function filenameRequired(){throw new Error("Please pass in filename to use require")}var e;module.exports=((e,t,r)=>{const n=t&&path.extname(t);if(65279===(e=e).charCodeAt(0)&&(e=e.slice(1)),e=e,".json"===n)return function(e,t){try{return e()}catch(e){t(e)}}(JSON.parse.bind(null,e),e=>{throw e.message=`${t}: ${e.message}`,e});let o;return t&&!isAbsolutePath(t)&&(t=path.resolve(path.dirname(function(e){e=3+(0|e);const t={};return Error.captureStackTrace(t),function(e){const t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).pop(),r=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));return{filename:["eval","<anonymous>"].indexOf(r[1])>-1?void 0:r[1],line:r[2],column:r[3]}}(t.stack.split(/\n/)[e]).filename}()),t)),/\b(exports|module)\b/.test(e)&&(o=function(e,t,r){const n=t&&path.dirname(t),o={},l={};let u;o.module=new Module(t||"<anonymous>",module.parent),o.module.exports=l,t?(o.module.filename=t,o.module.paths=Module._nodeModulePaths(n),o.require=(e=>o.module.require(e)),o.require.resolve=(e=>Module._resolveFilename(e,o.module))):(t="<anonymous>",o.require=filenameRequired);const s=[o.module.exports,o.require,o.module,t,n];r&&(u=Object.keys(r).map(e=>(s.push(r[e]),e)));const a=function(e,t){const r=["(function (exports, require, module, __filename, __dirname",") { ","\n});"];return r[0]+(t=t?`, ${t}`:"")+r[1]+e+r[2]}(e,u),i={filename:t,lineOffset:0,displayErrors:!0},m=vm.runInThisContext(a,i),c=Object.keys(o.module).length,d=Object.keys(o.module.exports).length;return m.apply(o.module.exports,s),o.__result=o.module.exports===l&&Object.keys(o.module.exports).length===d&&Object.keys(o.module).length===c,o}(e,t,r)),o&&!o.__result?o.module.exports:r?vm.runInNewContext(e,r):vm.runInThisContext(e)}),filenameRequired.resolve=filenameRequired},{module:1,path:15,"path-is-absolute":199,vm:44}],199:[function(require,module,exports){(function(process){"use strict";function posix(o){return"/"===o.charAt(0)}function win32(o){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(o),n=e[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(e[2]||r)}module.exports="win32"===process.platform?win32:posix,module.exports.posix=posix,module.exports.win32=win32}).call(this,require("_process"))},{_process:17}],200:[function(require,module,exports){(function(global){var n,e;n=this,e=function(n){var e=global||window;function r(n){for(var e=[],r=0;r<n;r++)e.push("p"+r);return e}function t(n,e,r){return e&&(n=n.concat([e])),n.join(", ")+(r&&n.length?",":"")}function o(n){var e=Object.prototype.toString.call(n);return!(!n||"object"!=typeof n&&"function"!=typeof n||"[object Function]"!==e&&"[object AsyncFunction]"!==e)}function i(n){if(!n)throw new Error("Promise is undefined. Define Promise as global variable or call withPromise()");if(!o(n))throw new Error("Expect Promise to be a constructor")}n.withPromise=function(n){n&&i(n);var l={make:function(l,c){if(c||(c=l,l={}),!o(c))throw new Error("Function required");n||i(e.Promise);var u=r((l.args||c.length)-1);return new Function(["asyncFn","Promise"],"return function("+t(u,"done")+") {\n    if(done) {\n        return asyncFn.call(this, "+t(u,"done")+");\n    } else {\n        var _this = this;\n        return new Promise(function(resolve, reject) {\n            asyncFn.call(_this, "+t(u,null,!0)+" function(err, result) {\n                if(err) {\n                    reject(err);\n                } else {\n                    if(arguments.length > 2) {                        resolve([].slice.call(arguments, 1));                    } else {                        resolve(result);\n                    }                }\n            });\n        });\n    }\n};")(c,n||e.Promise)},break:function(n,e){if(e||(e=n,n={}),!o(e))throw new Error("Function required");var i=r(n.args||e.length),l=["this"].concat(i);return new Function(["promiseFn"],"return function("+t(i,"done")+") {\n    if(done) {\n        promiseFn.call("+t(l)+").then(\n            function(result) {setTimeout(function() {done(null, result);}, 0);},\n            function(err) {setTimeout(function() {done(err);}, 0);}\n        );\n        return null;\n    } else {\n        return promiseFn.call("+t(l)+");\n    }\n};")(e)},addPromise:function(n,e){var r=null;return n?e(n):r=new Promise(function(n,r){e(function(e,t){e?r(e):arguments.length>2?n([].slice.call(arguments,1)):n(t)})}),r},addCallback:function(n,e){var r;if(!e)throw new Error("addCallback() expected promise or function as second paramater");if(o(e.then))r=e;else{if(!o(e))throw new Error("addCallback() don't know what to do with "+typeof e);r=Promise.resolve().then(function(){return e()})}return n&&(r.then(function(e){setTimeout(function(){n(null,e)},0)},function(e){setTimeout(function(){n(e)},0)}),r=null),r},applyFn:function(r,t,o,i,c){return t=t||0,i=i||[],r.length>t+1?l.addCallback(c,Promise.reject(new Error("Expected function with "+t+" or fewer arguments which returns Promise, or function with "+(t+1)+" arguments which takes callback - got function with "+r.length+" arguments."))):l.addCallback(c,Promise.resolve().then(function(){var l,c=t<r.length;if(i.length<t||c){for(i=i.slice(0);i.length<t;)i.push(void 0);c&&(l=new(n||e.Promise)(function(n,e){i[t]=function(r,t){r?e(r):n(t)}}))}var u=r.apply(o,i);return l||u}))},apply:function(n,e,r,t){return r=r||[],l.applyFn(n,r.length,e,r,t)},callFn:function(n,e,r){e=e||0;var t=Math.min(arguments.length-3,e),o=[];t>0&&(o=[].slice.call(arguments,3,3+t));var i=arguments[3+e];return l.applyFn(n,e,r,o,i)},call:function(n,e){var r=[].slice.call(arguments,2);return l.applyFn(n,r.length,e,r)},callWithCb:function(n,e){var r=[].slice.call(arguments,2,arguments.length-1),t=arguments[arguments.length-1];if(!o(t))throw new Error("callWithCb requires function as last parameter.");return l.applyFn(n,r.length,e,r,t)}};return l};var l=n.withPromise();for(var c in l)({}).hasOwnProperty.call(l,c)&&(n[c]=l[c]);n.usingDefaultPromise=l},"function"==typeof define&&define.amd?define(["exports"],e):e("object"==typeof exports?exports:n.promiseBreaker={})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],201:[function(require,module,exports){!function(n,r){"use strict";var t={};n.PubSub=t;var e=n.define;!function(n){var r={},t=-1;function e(n){var r;for(r in n)if(n.hasOwnProperty(r))return!0;return!1}function o(n,r,t){try{n(r,t)}catch(n){setTimeout(function(n){return function(){throw n}}(n),0)}}function i(n,r,t){n(r,t)}function u(n,t,e,u){var f,s=r[t],c=u?i:o;if(r.hasOwnProperty(t))for(f in s)s.hasOwnProperty(f)&&c(s[f],n,e)}function f(n,t,o,i){var f=function(n,r,t){return function(){var e=String(n),o=e.lastIndexOf(".");for(u(n,n,r,t);-1!==o;)o=(e=e.substr(0,o)).lastIndexOf("."),u(n,e,r,t)}}(n="symbol"==typeof n?n.toString():n,t,i);return!!function(n){for(var t=String(n),o=Boolean(r.hasOwnProperty(t)&&e(r[t])),i=t.lastIndexOf(".");!o&&-1!==i;)i=(t=t.substr(0,i)).lastIndexOf("."),o=Boolean(r.hasOwnProperty(t)&&e(r[t]));return o}(n)&&(!0===o?f():setTimeout(f,0),!0)}n.publish=function(r,t){return f(r,t,!1,n.immediateExceptions)},n.publishSync=function(r,t){return f(r,t,!0,n.immediateExceptions)},n.subscribe=function(n,e){if("function"!=typeof e)return!1;n="symbol"==typeof n?n.toString():n,r.hasOwnProperty(n)||(r[n]={});var o="uid_"+String(++t);return r[n][o]=e,o},n.subscribeOnce=function(r,t){var e=n.subscribe(r,function(){n.unsubscribe(e),t.apply(this,arguments)});return n},n.clearAllSubscriptions=function(){r={}},n.clearSubscriptions=function(n){var t;for(t in r)r.hasOwnProperty(t)&&0===t.indexOf(n)&&delete r[t]},n.countSubscriptions=function(n){var t,e=0;for(t in r)r.hasOwnProperty(t)&&0===t.indexOf(n)&&e++;return e},n.getSubscriptions=function(n){var t,e=[];for(t in r)r.hasOwnProperty(t)&&0===t.indexOf(n)&&e.push(t);return e},n.unsubscribe=function(t){var e,o,i,u="string"==typeof t&&(r.hasOwnProperty(t)||function(n){var t;for(t in r)if(r.hasOwnProperty(t)&&0===t.indexOf(n))return!0;return!1}(t)),f=!u&&"string"==typeof t,s="function"==typeof t,c=!1;if(!u){for(e in r)if(r.hasOwnProperty(e)){if(o=r[e],f&&o[t]){delete o[t],c=t;break}if(s)for(i in o)o.hasOwnProperty(i)&&o[i]===t&&(delete o[i],c=!0)}return c}n.clearSubscriptions(t)}}(t),"function"==typeof e&&e.amd?e(function(){return t}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=t),exports.PubSub=t,module.exports=exports=t)}("object"==typeof window&&window||this)},{}],202:[function(require,module,exports){"use strict";var undef,has=Object.prototype.hasOwnProperty;function decode(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(n){return null}}exports.stringify=function(n,e){e=e||"";var r,t,o=[];for(t in"string"!=typeof e&&(e="?"),n)if(has.call(n,t)){if((r=n[t])||null!==r&&r!==undef&&!isNaN(r)||(r=""),t=encodeURIComponent(t),r=encodeURIComponent(r),null===t||null===r)continue;o.push(t+"="+r)}return o.length?e+o.join("&"):""},exports.parse=function(n){for(var e,r=/([^=?&]+)=?([^&]*)/g,t={};e=r.exec(n);){var o=decode(e[1]),u=decode(e[2]);null===o||null===u||o in t||(t[o]=u)}return t}},{}],203:[function(require,module,exports){"use strict";module.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],204:[function(require,module,exports){var buffer=require("buffer"),Buffer=buffer.Buffer;function copyProps(f,r){for(var e in f)r[e]=f[e]}function SafeBuffer(f,r,e){return Buffer(f,r,e)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,r,e){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Buffer(f,r,e)},SafeBuffer.alloc=function(f,r,e){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=Buffer(f);return void 0!==r?"string"==typeof e?u.fill(r,e):u.fill(r):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(f)}},{buffer:8}],205:[function(require,module,exports){function e(e,r,n){return new Promise(function(o,i){!function e(r,n,u){var f=n.retryStatus;(0,n.fetcher)(r,n).then(function(s){if(f.includes(s.status))if(u>0){var c=t(n,--u);n.onRetry&&"function"==typeof n.onRetry&&n.onRetry({retriesLeft:u,retryDelay:c,response:s}),setTimeout(function(){return e(r,n,u)},c)}else i(s);else o(s)}).catch(function(o){if(u>0){var f=t(n,--u);n.onRetry&&"function"==typeof n.onRetry&&n.onRetry({retriesLeft:u,retryDelay:f,response:o}),setTimeout(function(){return e(r,n,u)},f)}else i(o)})}(r,n,e)})}function t(e,t){var r=e.retryDelay,n=e.factor,o=e.retries;return n&&"number"==typeof n&&Number.isInteger(n)?function(e,t){return Math.pow(e,t)}(n,o-t):r*(o-t)}var r=!1;try{r=window&&window.fetch}catch(e){}module.exports=function(t,n){if(void 0===t&&(t=""),void 0===n&&(n={}),!(n=Object.assign({retries:1,retryDelay:1e3,retryStatus:[],fetcher:r,timeout:void 0},n)).fetcher||"function"!=typeof n.fetcher)throw new Error("tenacious-fetch: No fetch implementation found. Provide a valid fetch implementation via the fetcher configuration property.");"string"!=typeof n.retryStatus&&"number"!=typeof n.retryStatus||(n.retryStatus=[Number.parseInt(n.retryStatus)]);var o=n.timeout;return o&&Number.isInteger(o)?Promise.race([e(n.retries,t,n),new Promise(function(e,t){return setTimeout(function(){return t(new Error("tenacious-fetch: Request took longer than timeout of "+o+" ms."))},o)})]):e(n.retries,t,n)}},{}],206:[function(require,module,exports){(function(global){"use strict";var required=require("requires-port"),qs=require("querystringify"),slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,left=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function trimLeft(e){return(e||"").toString().replace(left,"")}var rules=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ignore={hash:1,query:1};function lolcation(e){var t,o=("undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{}).location||{},r={},s=typeof(e=e||o);if("blob:"===e.protocol)r=new Url(unescape(e.pathname),{});else if("string"===s)for(t in r=new Url(e,{}),ignore)delete r[t];else if("object"===s){for(t in e)t in ignore||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=slashes.test(e.href))}return r}function extractProtocol(e){e=trimLeft(e);var t=protocolre.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function Url(e,t,o){if(e=trimLeft(e),!(this instanceof Url))return new Url(e,t,o);var r,s,a,n,l,i,c=rules.slice(),u=typeof t,h=this,p=0;for("object"!==u&&"string"!==u&&(o=t,t=null),o&&"function"!=typeof o&&(o=qs.parse),t=lolcation(t),r=!(s=extractProtocol(e||"")).protocol&&!s.slashes,h.slashes=s.slashes||r&&t.slashes,h.protocol=s.protocol||t.protocol||"",e=s.rest,s.slashes||(c[3]=[/(.*)/,"pathname"]);p<c.length;p++)"function"!=typeof(n=c[p])?(a=n[0],i=n[1],a!=a?h[i]=e:"string"==typeof a?~(l=e.indexOf(a))&&("number"==typeof n[2]?(h[i]=e.slice(0,l),e=e.slice(l+n[2])):(h[i]=e.slice(l),e=e.slice(0,l))):(l=a.exec(e))&&(h[i]=l[1],e=e.slice(0,l.index)),h[i]=h[i]||r&&n[3]&&t[i]||"",n[4]&&(h[i]=h[i].toLowerCase())):e=n(e);o&&(h.query=o(h.query)),r&&t.slashes&&"/"!==h.pathname.charAt(0)&&(""!==h.pathname||""!==t.pathname)&&(h.pathname=function(e,t){if(""===e)return t;for(var o=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=o.length,s=o[r-1],a=!1,n=0;r--;)"."===o[r]?o.splice(r,1):".."===o[r]?(o.splice(r,1),n++):n&&(0===r&&(a=!0),o.splice(r,1),n--);return a&&o.unshift(""),"."!==s&&".."!==s||o.push(""),o.join("/")}(h.pathname,t.pathname)),required(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(n=h.auth.split(":"),h.username=n[0]||"",h.password=n[1]||""),h.origin=h.protocol&&h.host&&"file:"!==h.protocol?h.protocol+"//"+h.host:"null",h.href=h.toString()}Url.prototype={set:function(e,t,o){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(o||qs.parse)(t)),r[e]=t;break;case"port":r[e]=t,required(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!o;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";r[e]=t.charAt(0)!==s?s+t:t}else r[e]=t;break;default:r[e]=t}for(var a=0;a<rules.length;a++){var n=rules[a];n[4]&&(r[n[1]]=r[n[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=qs.stringify);var t,o=this,r=o.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var s=r+(o.slashes?"//":"");return o.username&&(s+=o.username,o.password&&(s+=":"+o.password),s+="@"),s+=o.host+o.pathname,(t="object"==typeof o.query?e(o.query):o.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),o.hash&&(s+=o.hash),s}},Url.extractProtocol=extractProtocol,Url.location=lolcation,Url.trimLeft=trimLeft,Url.qs=qs,module.exports=Url}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:202,"requires-port":203}],207:[function(require,module,exports){for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=function(e,o){var t=o||0,i=byteToHex;return[i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]]].join("")}},{}],208:[function(require,module,exports){var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function(){for(var n,e=0;e<16;e++)0==(3&e)&&(n=4294967296*Math.random()),rnds[e]=n>>>((3&e)<<3)&255;return rnds}}},{}],209:[function(require,module,exports){var rng=require("./lib/rng"),bytesToUuid=require("./lib/bytesToUuid");module.exports=function(r,n,e){var i=n&&e||0;"string"==typeof r&&(n="binary"===r?new Array(16):null,r=null);var u=(r=r||{}).random||(r.rng||rng)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,n)for(var o=0;o<16;++o)n[i+o]=u[o];return n||bytesToUuid(u)}},{"./lib/bytesToUuid":207,"./lib/rng":208}],210:[function(require,module,exports){"use strict";function createNullActor(t){return{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},toJSON:function(){return{id:t}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNullActor=createNullActor,exports.createInvocableActor=function(t){var e=createNullActor(t.id);return e.meta=t,e},exports.isActor=function(t){try{return"function"==typeof t.send}catch(t){return!1}}},{}],211:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StateNode_1=require("./StateNode");exports.Machine=function(e,t,n){void 0===n&&(n=e.context);var o="function"==typeof n?n():n;return new StateNode_1.StateNode(e,t,o)},exports.createMachine=function(e,t){var n="function"==typeof e.context?e.context():e.context;return new StateNode_1.StateNode(e,t,n)}},{"./StateNode":213}],212:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var s in i=arguments[e])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,i){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)i.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(e[n[s]]=t[n[s]])}return e},__read=this&&this.__read||function(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,s,r=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(t){s={error:t}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o},__spread=this&&this.__spread||function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(__read(arguments[i]));return t};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("./constants"),utils_1=require("./utils"),stateUtils_1=require("./stateUtils"),actions_1=require("./actions");exports.stateValuesEqual=function stateValuesEqual(t,i){if(t===i)return!0;if(void 0===t||void 0===i)return!1;if(utils_1.isString(t)||utils_1.isString(i))return t===i;var e=utils_1.keys(t),n=utils_1.keys(i);return e.length===n.length&&e.every(function(e){return stateValuesEqual(t[e],i[e])})},exports.isState=function(t){return!utils_1.isString(t)&&"value"in t&&"history"in t},exports.bindActionToState=function(t,i){var e=t.exec;return __assign(__assign({},t),{exec:void 0!==e?function(){return e(i.context,i.event,{action:t,state:i,_event:i._event})}:void 0})};var State=function(){function t(t){this.actions=[],this.activities=constants_1.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||constants_1.EMPTY_ACTIVITY_MAP,this.meta=t.meta||{},this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,Object.defineProperty(this,"nextEvents",{get:function(){return stateUtils_1.nextEvents(t.configuration)}})}return t.from=function(i,e){return i instanceof t?i.context!==e?new t({value:i.value,context:e,_event:i._event,_sessionid:null,historyValue:i.historyValue,history:i.history,actions:[],activities:i.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):i:new t({value:i,context:e,_event:actions_1.initEvent,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(i){return new t(i)},t.inert=function(i,e){if(i instanceof t){if(!i.actions.length)return i;var n=actions_1.initEvent;return new t({value:i.value,context:e,_event:n,_sessionid:null,historyValue:i.historyValue,history:i.history,activities:i.activities,configuration:i.configuration,transitions:[],children:{}})}return t.from(i,e)},t.prototype.toStrings=function(t,i){var e=this;if(void 0===t&&(t=this.value),void 0===i&&(i="."),utils_1.isString(t))return[t];var n=utils_1.keys(t);return n.concat.apply(n,__spread(n.map(function(n){return e.toStrings(t[n],i).map(function(t){return n+i+t})})))},t.prototype.toJSON=function(){return this.configuration,this.transitions,__rest(this,["configuration","transitions"])},t.prototype.matches=function(t){return utils_1.matchesState(t,this.value)},t}();exports.State=State},{"./actions":215,"./constants":216,"./stateUtils":225,"./utils":227}],213:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i},__read=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,a=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("./utils"),types_1=require("./types"),utils_2=require("./utils"),State_1=require("./State"),actionTypes=require("./actionTypes"),actions_1=require("./actions"),environment_1=require("./environment"),constants_1=require("./constants"),stateUtils_1=require("./stateUtils"),Actor_1=require("./Actor"),NULL_EVENT="",EMPTY_OBJECT={},isStateId=function(t){return"#"===t[0]},createDefaultOptions=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},StateNode=function(){function t(e,i,n){var r=this;this.config=e,this.context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.options=Object.assign(createDefaultOptions(),i),this.parent=this.options._parent,this.key=this.config.key||this.options._key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:constants_1.STATE_DELIMITER),this.id=this.config.id||__spread([this.machine.key],this.path).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&utils_1.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),environment_1.IS_PRODUCTION||utils_1.warn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '+(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead."),this.initial=this.config.initial,this.states=this.config.states?utils_1.mapValues(this.config.states,function(e,i){var n,a=new t(e,{_parent:r,_key:i});return Object.assign(r.idMap,__assign(((n={})[a.id]=a,n),a.idMap)),a}):EMPTY_OBJECT;var a=0;!function t(e){var i,n;e.order=a++;try{for(var r=__values(stateUtils_1.getChildren(e)),s=r.next();!s.done;s=r.next())t(s.value)}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some(function(t){return t.event===NULL_EVENT}):NULL_EVENT in this.config.on),this.strict=!!this.config.strict,this.onEntry=utils_1.toArray(this.config.entry||this.config.onEntry).map(function(t){return actions_1.toActionObject(t)}),this.onExit=utils_1.toArray(this.config.exit||this.config.onExit).map(function(t){return actions_1.toActionObject(t)}),this.meta=this.config.meta,this.data="final"===this.type?this.config.data:void 0,this.invoke=utils_1.toArray(this.config.invoke).map(function(t,e){var i,n;if(utils_1.isMachine(t))return r.machine.options.services=__assign(((i={})[t.id]=t,i),r.machine.options.services),{type:actionTypes.invoke,src:t.id,id:t.id};if("string"!=typeof t.src){var a=r.id+":invocation["+e+"]";return r.machine.options.services=__assign(((n={})[a]=t.src,n),r.machine.options.services),__assign(__assign({type:actionTypes.invoke,id:a},t),{src:a})}return __assign(__assign({},t),{type:actionTypes.invoke,id:t.id||t.src,src:t.src})}),this.activities=utils_1.toArray(this.config.activities).concat(this.invoke).map(function(t){return actions_1.toActivityDefinition(t)}),this.transition=this.transition.bind(this)}return t.prototype._init=function(){this.__cache.transitions||stateUtils_1.getAllStateNodes(this).forEach(function(t){return t.on})},t.prototype.withConfig=function(e,i){void 0===i&&(i=this.context);var n=this.options,r=n.actions,a=n.activities,s=n.guards,o=n.services,u=n.delays;return new t(this.config,{actions:__assign(__assign({},r),e.actions),activities:__assign(__assign({},a),e.activities),guards:__assign(__assign({},s),e.guards),services:__assign(__assign({},o),e.services),delays:__assign(__assign({},u),e.delays)},i)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,type:this.type,initial:this.initial,history:this.history,states:utils_1.mapValues(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,onEntry:this.onEntry,onExit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.data,invoke:this.invoke}},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t},{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!0,configurable:!0}),t.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=t===NULL_EVENT,i=this.transitions.filter(function(i){var n=i.eventType===t;return e?n:n||"*"===i.eventType});return this.__cache.candidates[t]=i,i},t.prototype.getDelayedTransitions=function(){var t=this,e=this.config.after;if(!e)return[];var i=function(e,i){var n=utils_1.isFunction(e)?t.id+":delay["+i+"]":e,r=actions_1.after(n,t.id);return t.onEntry.push(actions_1.send(r,{delay:e})),t.onExit.push(actions_1.cancel(r)),r};return(utils_1.isArray(e)?e.map(function(t,e){var n=i(t.delay,e);return __assign(__assign({},t),{event:n})}):utils_1.flatten(utils_1.keys(e).map(function(t,n){var r=e[t],a=utils_1.isString(r)?{target:r}:r,s=isNaN(+t)?t:+t,o=i(s,n);return utils_1.toArray(a).map(function(t){return __assign(__assign({},t),{event:o,delay:s})})}))).map(function(e){var i=e.delay;return __assign(__assign({},t.formatTransition(e)),{delay:i})})},t.prototype.getStateNodes=function(t){var e,i=this;if(!t)return[];var n=t instanceof State_1.State?t.value:utils_1.toStateValue(t,this.delimiter);if(utils_1.isString(n)){var r=this.getStateNode(n).initial;return void 0!==r?this.getStateNodes(((e={})[n]=r,e)):[this.states[n]]}var a=utils_1.keys(n);return a.map(function(t){return i.getStateNode(t)}).concat(a.reduce(function(t,e){var r=i.getStateNode(e).getStateNodes(n[e]);return t.concat(r)},[]))},t.prototype.handles=function(t){var e=utils_1.getEventType(t);return this.events.includes(e)},t.prototype.resolveState=function(t){var e=Array.from(stateUtils_1.getConfiguration([],this.getStateNodes(t.value)));return new State_1.State(__assign(__assign({},t),{value:this.resolve(t.value),configuration:e}))},t.prototype.transitionLeafNode=function(t,e,i){var n=this.getStateNode(t).next(e,i);return n&&n.transitions.length?n:this.next(e,i)},t.prototype.transitionCompoundNode=function(t,e,i){var n=utils_1.keys(t),r=this.getStateNode(n[0])._transition(t[n[0]],e,i);return r&&r.transitions.length?r:this.next(e,i)},t.prototype.transitionParallelNode=function(t,e,i){var n,r,a={};try{for(var s=__values(utils_1.keys(t)),o=s.next();!o.done;o=s.next()){var u=o.value,l=t[u];if(l){var c=this.getStateNode(u)._transition(l,e,i);c&&(a[u]=c)}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}var h=utils_1.keys(a).map(function(t){return a[t]}),f=utils_1.flatten(h.map(function(t){return t.transitions}));if(!h.some(function(t){return t.transitions.length>0}))return this.next(e,i);var _=utils_1.flatten(h.map(function(t){return t.entrySet})),d=utils_1.flatten(utils_1.keys(a).map(function(t){return a[t].configuration}));return{transitions:f,entrySet:_,exitSet:utils_1.flatten(h.map(function(t){return t.exitSet})),configuration:d,source:e,actions:utils_1.flatten(utils_1.keys(a).map(function(t){return a[t].actions}))}},t.prototype._transition=function(t,e,i){return utils_1.isString(t)?this.transitionLeafNode(t,e,i):1===utils_1.keys(t).length?this.transitionCompoundNode(t,e,i):this.transitionParallelNode(t,e,i)},t.prototype.next=function(t,e){var i,n,r,a=this,s=e.name,o=[],u=[];try{for(var l=__values(this.getCandidates(s)),c=l.next();!c.done;c=l.next()){var h=c.value,f=h.cond,_=h.in,d=t.context,p=!_||(utils_1.isString(_)&&isStateId(_)?t.matches(utils_1.toStateValue(this.getStateNodeById(_).path,this.delimiter)):utils_2.matchesState(utils_1.toStateValue(_,this.delimiter),utils_1.path(this.path.slice(0,-2))(t.value))),y=!1;try{y=!f||this.evaluateGuard(f,d,e,t)}catch(t){throw new Error("Unable to evaluate guard '"+(f.name||f.type)+"' in transition for event '"+s+"' in state node '"+this.id+"':\n"+t.message)}if(y&&p){void 0!==h.target&&(u=h.target),o.push.apply(o,__spread(h.actions)),r=h;break}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}if(r){if(!u.length)return{transitions:[r],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:o};var v=utils_1.flatten(u.map(function(e){return a.getRelativeStateNodes(e,t.historyValue)})),g=!!r.internal;return{transitions:[r],entrySet:g?[]:utils_1.flatten(v.map(function(t){return a.nodesFromChild(t)})),exitSet:g?[]:[this],configuration:v,source:t,actions:o}}},t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],i=t;i&&i!==this;)e.push(i),i=i.parent;return e.push(this),e},t.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},t.prototype.evaluateGuard=function(t,e,i,n){var r=this.machine.options.guards,a={state:n,cond:t,_event:i};if(t.type===constants_1.DEFAULT_GUARD_TYPE)return t.predicate(e,i.data,a);var s=r[t.type];if(!s)throw new Error("Guard '"+t.type+"' is not implemented on machine '"+this.machine.id+"'.");return s(e,i.data,a)},t.prototype.getActions=function(t,e,i,n){var r,a,s,o,u=stateUtils_1.getConfiguration([],n?this.getStateNodes(n.value):[this]),l=t.configuration.length?stateUtils_1.getConfiguration(u,t.configuration):u;try{for(var c=__values(l),h=c.next();!h.done;h=c.next()){var f=h.value;stateUtils_1.has(u,f)||t.entrySet.push(f)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}try{for(var _=__values(u),d=_.next();!d.done;d=_.next())f=d.value,stateUtils_1.has(l,f)&&!stateUtils_1.has(t.exitSet,f.parent)||t.exitSet.push(f)}catch(t){s={error:t}}finally{try{d&&!d.done&&(o=_.return)&&o.call(_)}finally{if(s)throw s.error}}t.source||(t.exitSet=[],t.entrySet.push(this));var p=utils_1.flatten(t.entrySet.map(function(n){var r=[];if("final"!==n.type)return r;var a=n.parent;if(r.push(actions_1.done(n.id,n.data),actions_1.done(a.id,n.data?utils_1.mapContext(n.data,e,i):void 0)),a.parent){var s=a.parent;"parallel"===s.type&&stateUtils_1.getChildren(s).every(function(e){return stateUtils_1.isInFinalState(t.configuration,e)})&&r.push(actions_1.done(s.id,s.data))}return r}));t.exitSet.sort(function(t,e){return e.order-t.order}),t.entrySet.sort(function(t,e){return t.order-e.order});var y=new Set(t.entrySet),v=new Set(t.exitSet),g=__read([utils_1.flatten(Array.from(y).map(function(t){return __spread(t.activities.map(function(t){return actions_1.start(t)}),t.onEntry)})).concat(p.map(actions_1.raise)),utils_1.flatten(Array.from(v).map(function(t){return __spread(t.onExit,t.activities.map(function(t){return actions_1.stop(t)}))}))],2),m=g[0],S=g[1];return actions_1.toActionObjects(S.concat(t.actions).concat(m),this.machine.options.actions)},t.prototype.transition=function(t,e,i){void 0===t&&(t=this.initialState);var n,r=utils_1.toSCXMLEvent(e);if(t instanceof State_1.State)n=void 0===i?t:this.resolveState(State_1.State.from(t,i));else{var a=utils_1.isString(t)?this.resolve(utils_1.pathToStateValue(this.getResolvedPath(t))):this.resolve(t),s=i||this.machine.context;n=this.resolveState(State_1.State.from(a,s))}if(!environment_1.IS_PRODUCTION&&"*"===r.name)throw new Error("An event cannot have the wildcard type ('*')");if(this.strict&&!this.events.includes(r.name)&&!utils_1.isBuiltInEvent(r.name))throw new Error("Machine '"+this.id+"' does not accept event '"+r.name+"'");var o=this._transition(n.value,n,r)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:n,actions:[]},u=stateUtils_1.getConfiguration([],this.getStateNodes(n.value)),l=o.configuration.length?stateUtils_1.getConfiguration(u,o.configuration):u;return o.configuration=__spread(l),this.resolveTransition(o,n,r)},t.prototype.resolveRaisedTransition=function(t,e,i){var n,r=t.actions;return(t=this.transition(t,e))._event=i,t.event=i.data,(n=t.actions).unshift.apply(n,__spread(r)),t},t.prototype.resolveTransition=function(t,e,i,n){var r,a,s=this;void 0===i&&(i=actions_1.initEvent),void 0===n&&(n=this.machine.context);var o=t.configuration,u=!e||t.transitions.length>0?stateUtils_1.getValue(this.machine,o):void 0,l=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,c=e?e.context:n,h=this.getActions(t,c,i,e),f=e?__assign({},e.activities):{};try{for(var _=__values(h),d=_.next();!d.done;d=_.next()){var p=d.value;p.type===actionTypes.start?f[p.activity.type]=p:p.type===actionTypes.stop&&(f[p.activity.type]=!1)}}catch(t){r={error:t}}finally{try{d&&!d.done&&(a=_.return)&&a.call(_)}finally{if(r)throw r.error}}var y=__read(utils_1.partition(h,function(t){return t.type===actionTypes.assign}),2),v=y[0],g=y[1],m=v.length?utils_1.updateContext(c,i,v,e):c,S=utils_1.flatten(g.map(function(t){switch(t.type){case actionTypes.raise:return actions_1.resolveRaise(t);case actionTypes.send:var e=actions_1.resolveSend(t,m,i,s.machine.options.delays);return environment_1.IS_PRODUCTION||utils_1.warn(!utils_1.isString(t.delay)||"number"==typeof e.delay,"No delay reference for delay expression '"+t.delay+"' was found on machine '"+s.machine.id+"'"),e;case actionTypes.log:return actions_1.resolveLog(t,m,i);case actionTypes.pure:return t.get(m,i.data)||[];default:return actions_1.toActionObject(t,s.options.actions)}})),T=__read(utils_1.partition(S,function(t){return t.type===actionTypes.raise||t.type===actionTypes.send&&t.to===types_1.SpecialTargets.Internal}),2),E=T[0],b=T[1],N=S.filter(function(t){return t.type===actionTypes.start&&t.activity.type===actionTypes.invoke}).reduce(function(t,e){return t[e.activity.id]=Actor_1.createInvocableActor(e.activity),t},e?__assign({},e.children):{}),w=u?t.configuration:e?e.configuration:[],x=w.reduce(function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t},{}),I=stateUtils_1.isInFinalState(w,this),O=new State_1.State({value:u||e.value,context:m,_event:i,_sessionid:e?e._sessionid:null,historyValue:u?l?utils_1.updateHistoryValue(l,u):void 0:e?e.historyValue:void 0,history:!u||t.source?e:void 0,actions:u?b:[],activities:u?f:e?e.activities:{},meta:u?x:e?e.meta:void 0,events:[],configuration:w,transitions:t.transitions,children:N,done:I});O.changed=i.name===actionTypes.update||!!v.length;var A=O.history;if(A&&delete A.history,!u)return O;var P=O;if(!I)for((this._transient||o.some(function(t){return t._transient}))&&(P=this.resolveRaisedTransition(P,{type:actionTypes.nullEvent},i));E.length;){var C=E.shift();P=this.resolveRaisedTransition(P,C._event,i)}var V=P.changed||(A?!!P.actions.length||!!v.length||typeof A.value!=typeof P.value||!State_1.stateValuesEqual(P.value,A.value):void 0);return P.changed=V,P.historyValue=O.historyValue,P.history=A,P},t.prototype.getStateNode=function(t){if(isStateId(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '"+t+"' from '"+this.id+"'; no child states exist.");var e=this.states[t];if(!e)throw new Error("Child state '"+t+"' does not exist on '"+this.id+"'");return e},t.prototype.getStateNodeById=function(t){var e=isStateId(t)?t.slice("#".length):t;if(e===this.id)return this;var i=this.machine.idMap[e];if(!i)throw new Error("Child state node '#"+e+"' does not exist on machine '"+this.id+"'");return i},t.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&isStateId(t))try{return this.getStateNodeById(t.slice(1))}catch(t){}for(var e=utils_1.toStatePath(t,this.delimiter).slice(),i=this;e.length;){var n=e.shift();if(!n.length)break;i=i.getStateNode(n)}return i},t.prototype.resolve=function(t){var e,i=this;if(!t)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return utils_1.mapValues(this.initialStateValue,function(e,n){return e?i.getStateNode(n).resolve(t[n]||e):EMPTY_OBJECT});case"compound":if(utils_1.isString(t)){var n=this.getStateNode(t);return"parallel"===n.type||"compound"===n.type?((e={})[t]=n.initialStateValue,e):t}return utils_1.keys(t).length?utils_1.mapValues(t,function(t,e){return t?i.getStateNode(e).resolve(t):EMPTY_OBJECT}):this.initialStateValue||{};default:return t||EMPTY_OBJECT}},t.prototype.getResolvedPath=function(t){if(isStateId(t)){var e=this.machine.idMap[t.slice("#".length)];if(!e)throw new Error("Unable to find state node '"+t+"'");return e.path}return utils_1.toStatePath(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=utils_1.mapFilterValues(this.states,function(t){return t.initialStateValue||EMPTY_OBJECT},function(t){return!("history"===t.type)});else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '"+this.initial+"' not found on '"+this.key+"'");e=stateUtils_1.isLeafNode(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!0,configurable:!0}),t.prototype.getInitialState=function(t,e){var i=this.getStateNodes(t);return this.resolveTransition({configuration:i,entrySet:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,void 0,e)},Object.defineProperty(t.prototype,"initialState",{get:function(){this._init();var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");return this.getInitialState(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=utils_1.isString(e.target)&&isStateId(e.target)?utils_1.pathToStateValue(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!0,configurable:!0}),t.prototype.getRelativeStateNodes=function(t,e,i){return void 0===i&&(i=!0),i?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;if(stateUtils_1.isLeafNode(this))return[this];if("compound"===this.type&&!this.initial)return environment_1.IS_PRODUCTION||utils_1.warn(!1,"Compound state node '"+this.id+"' has no initial state."),[this];var e=utils_1.toStatePaths(this.initialStateValue);return utils_1.flatten(e.map(function(e){return t.getFromRelativePath(e)}))},enumerable:!0,configurable:!0}),t.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=__read(t),i=e[0],n=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+i+"' from node with no states");var r=this.getStateNode(i);if("history"===r.type)return r.resolveHistory();if(!this.states[i])throw new Error("Child state '"+i+"' does not exist on '"+this.id+"'");return this.states[i].getFromRelativePath(n)},t.prototype.historyValue=function(t){if(utils_1.keys(this.states).length)return{current:t||this.initialStateValue,states:utils_1.mapFilterValues(this.states,function(e,i){if(!t)return e.historyValue();var n=utils_1.isString(t)?void 0:t[i];return e.historyValue(n||e.initialStateValue)},function(t){return!t.history})}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var i=this.parent;if(!t){var n=this.target;return n?utils_1.flatten(utils_1.toStatePaths(n).map(function(t){return i.getFromRelativePath(t)})):i.initialStateNodes}var r=utils_1.nestedPath(i.path,"states")(t).current;return utils_1.isString(r)?[i.getStateNode(r)]:utils_1.flatten(utils_1.toStatePaths(r).map(function(t){return"deep"===e.history?i.getFromRelativePath(t):[i.states[t[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=utils_1.flatten(utils_1.keys(this.states).map(function(e){return t.states[e].stateIds}));return[this.id].concat(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var t,e,i,n;if(this.__cache.events)return this.__cache.events;var r=this.states,a=new Set(this.ownEvents);if(r)try{for(var s=__values(utils_1.keys(r)),o=s.next();!o.done;o=s.next()){var u=r[o.value];if(u.states)try{for(var l=(i=void 0,__values(u.events)),c=l.next();!c.done;c=l.next()){var h=c.value;a.add(""+h)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(a)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(t){return!(!t.target&&!t.actions.length&&t.internal)}).map(function(t){return t.eventType}));return Array.from(t)},enumerable:!0,configurable:!0}),t.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map(function(t){if(!utils_1.isString(t))return t;var i=t[0]===e.delimiter;if(i&&!e.parent)return e.getStateNodeByPath(t.slice(1));var n=i?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(n);try{return e.parent.getStateNodeByPath(n)}catch(t){throw new Error("Invalid transition definition for state node '"+e.id+"':\n"+t.message)}})},t.prototype.formatTransition=function(t){var e=this,i=utils_1.normalizeTarget(t.target),n="internal"in t?t.internal:!i||i.some(function(t){return utils_1.isString(t)&&t[0]===e.delimiter}),r=this.machine.options.guards,a=this.resolveTarget(i);return __assign(__assign({},t),{actions:actions_1.toActionObjects(utils_1.toArray(t.actions)),cond:utils_1.toGuard(t.cond,r),target:a,source:this,internal:n,eventType:t.event})},t.prototype.formatTransitions=function(){var t,e,i,n=this;if(this.config.on)if(Array.isArray(this.config.on))i=this.config.on;else{var r=this.config.on,a="*",s=r[a],o=void 0===s?[]:s,u=__rest(r,["*"]);i=utils_1.flatten(utils_1.keys(u).map(function(t){var e=utils_1.toTransitionConfigArray(t,u[t]);return environment_1.IS_PRODUCTION||function(t,e,i){var n=i.slice(0,-1).some(function(t){return!("cond"in t)&&!("in"in t)&&(utils_1.isString(t.target)||utils_1.isMachine(t.target))}),r=e===NULL_EVENT?"the transient event":"event '"+e+"'";utils_1.warn(!n,"One or more transitions for "+r+" on state '"+t.id+"' are unreachable. Make sure that the default transition is the last one defined.")}(n,t,e),e}).concat(utils_1.toTransitionConfigArray("*",o)))}else i=[];var l=this.config.onDone?utils_1.toTransitionConfigArray(String(actions_1.done(this.id)),this.config.onDone):[],c=utils_1.flatten(this.invoke.map(function(t){var e=[];return t.onDone&&e.push.apply(e,__spread(utils_1.toTransitionConfigArray(String(actions_1.doneInvoke(t.id)),t.onDone))),t.onError&&e.push.apply(e,__spread(utils_1.toTransitionConfigArray(String(actions_1.error(t.id)),t.onError))),e})),h=this.after,f=utils_1.flatten(__spread(l,c,i).map(function(t){return utils_1.toArray(t).map(function(t){return n.formatTransition(t)})}));try{for(var _=__values(h),d=_.next();!d.done;d=_.next()){var p=d.value;f.push(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=_.return)&&e.call(_)}finally{if(t)throw t.error}}return f},t}();exports.StateNode=StateNode},{"./Actor":210,"./State":212,"./actionTypes":214,"./actions":215,"./constants":216,"./environment":218,"./stateUtils":225,"./types":226,"./utils":227}],214:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var types_1=require("./types");exports.start=types_1.ActionTypes.Start,exports.stop=types_1.ActionTypes.Stop,exports.raise=types_1.ActionTypes.Raise,exports.send=types_1.ActionTypes.Send,exports.cancel=types_1.ActionTypes.Cancel,exports.nullEvent=types_1.ActionTypes.NullEvent,exports.assign=types_1.ActionTypes.Assign,exports.after=types_1.ActionTypes.After,exports.doneState=types_1.ActionTypes.DoneState,exports.log=types_1.ActionTypes.Log,exports.init=types_1.ActionTypes.Init,exports.invoke=types_1.ActionTypes.Invoke,exports.errorExecution=types_1.ActionTypes.ErrorExecution,exports.errorPlatform=types_1.ActionTypes.ErrorPlatform,exports.error=types_1.ActionTypes.ErrorCustom,exports.update=types_1.ActionTypes.Update,exports.pure=types_1.ActionTypes.Pure},{"./types":226}],215:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};Object.defineProperty(exports,"__esModule",{value:!0});var types_1=require("./types"),actionTypes=require("./actionTypes");exports.actionTypes=actionTypes;var utils_1=require("./utils"),utils_2=require("./utils");function getActionFunction(t,e){return e&&e[t]||void 0}function toActionObject(t,e){var n;if(utils_1.isString(t)||"number"==typeof t){var i=getActionFunction(t,e);n=utils_1.isFunction(i)?{type:t,exec:i}:i||{type:t,exec:void 0}}else if(utils_1.isFunction(t))n={type:t.name||t.toString(),exec:t};else if(i=getActionFunction(t.type,e),utils_1.isFunction(i))n=__assign(__assign({},t),{exec:i});else if(i){var r=t.type,o=__rest(t,["type"]);n=__assign(__assign({type:r},i),o)}else n=t;return Object.defineProperty(n,"toString",{value:function(){return n.type},enumerable:!1,configurable:!0}),n}function toActivityDefinition(t){var e=toActionObject(t);return __assign(__assign({id:utils_1.isString(t)?t:e.id},e),{type:e.type})}function send(t,e){return{to:e?e.to:void 0,type:actionTypes.send,event:utils_1.isFunction(t)?t:utils_1.toEventObject(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:utils_1.isFunction(t)?t.name:utils_1.getEventType(t)}}function sendParent(t,e){return send(t,__assign(__assign({},e),{to:types_1.SpecialTargets.Parent}))}exports.initEvent=utils_1.toSCXMLEvent({type:actionTypes.init}),exports.getActionFunction=getActionFunction,exports.toActionObject=toActionObject,exports.toActionObjects=function(t,e){return t?(utils_2.isArray(t)?t:[t]).map(function(t){return toActionObject(t,e)}):[]},exports.toActivityDefinition=toActivityDefinition,exports.raise=function(t){return utils_1.isString(t)?{type:actionTypes.raise,event:t}:send(t,{to:types_1.SpecialTargets.Internal})},exports.resolveRaise=function(t){return{type:actionTypes.raise,_event:utils_1.toSCXMLEvent(t.event)}},exports.send=send,exports.resolveSend=function(t,e,n,i){var r,o={_event:n},s=utils_1.toSCXMLEvent(utils_1.isFunction(t.event)?t.event(e,n.data,o):t.event);if(utils_1.isString(t.delay)){var a=i&&i[t.delay];r=utils_1.isFunction(a)?a(e,n.data,o):a}else r=utils_1.isFunction(t.delay)?t.delay(e,n.data,o):t.delay;var u=utils_1.isFunction(t.to)?t.to(e,n.data,o):t.to;return __assign(__assign({},t),{to:u,_event:s,event:s.data,delay:r})},exports.sendParent=sendParent,exports.sendUpdate=function(){return sendParent(actionTypes.update)},exports.respond=function(t,e){return send(t,__assign(__assign({},e),{to:function(t,e,n){return n._event.origin}}))};var defaultLogExpr=function(t,e){return{context:t,event:e}};exports.log=function(t,e){return void 0===t&&(t=defaultLogExpr),{type:actionTypes.log,label:e,expr:t}},exports.resolveLog=function(t,e,n){return __assign(__assign({},t),{value:utils_1.isString(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},exports.cancel=function(t){return{type:actionTypes.cancel,sendId:t}},exports.start=function(t){var e=toActivityDefinition(t);return{type:types_1.ActionTypes.Start,activity:e,exec:void 0}},exports.stop=function(t){var e=toActivityDefinition(t);return{type:types_1.ActionTypes.Stop,activity:e,exec:void 0}},exports.assign=function(t){return{type:actionTypes.assign,assignment:t}},exports.isActionObject=function(t){return"object"==typeof t&&"type"in t},exports.after=function(t,e){var n=e?"#"+e:"";return types_1.ActionTypes.After+"("+t+")"+n},exports.done=function(t,e){var n=types_1.ActionTypes.DoneState+"."+t;return{type:n,data:e,toString:function(){return n}}},exports.doneInvoke=function(t,e){var n=types_1.ActionTypes.DoneInvoke+"."+t;return{type:n,data:e,toString:function(){return n}}},exports.error=function(t,e){var n=types_1.ActionTypes.ErrorPlatform+"."+t;return{type:n,data:e,toString:function(){return n}}},exports.pure=function(t){return{type:types_1.ActionTypes.Pure,get:t}},exports.forwardTo=function(t,e){return send(function(t,e){return e},__assign(__assign({},e),{to:t}))},exports.escalate=function(t,e){return sendParent(function(e,n,i){return{type:actionTypes.error,data:utils_1.isFunction(t)?t(e,n,i):t}},__assign(__assign({},e),{to:types_1.SpecialTargets.Parent}))}},{"./actionTypes":214,"./types":226,"./utils":227}],216:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STATE_DELIMITER=".",exports.EMPTY_ACTIVITY_MAP={},exports.DEFAULT_GUARD_TYPE="xstate.guard",exports.TARGETLESS_KEY=""},{}],217:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var environment_1=require("./environment");exports.registerService=function(e){if(!environment_1.IS_PRODUCTION&&"undefined"!=typeof window){var r=function(){var e=window;if(e.__xstate__)return e.__xstate__}();r&&r.register(e)}}},{"./environment":218}],218:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IS_PRODUCTION="production"===process.env.NODE_ENV}).call(this,require("_process"))},{_process:17}],219:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("./utils");exports.matchesState=utils_1.matchesState;var mapState_1=require("./mapState");exports.mapState=mapState_1.mapState;var StateNode_1=require("./StateNode");exports.StateNode=StateNode_1.StateNode;var State_1=require("./State");exports.State=State_1.State;var Machine_1=require("./Machine");exports.Machine=Machine_1.Machine,exports.createMachine=Machine_1.createMachine;var actions_1=require("./actions");exports.send=actions_1.send,exports.sendParent=actions_1.sendParent,exports.sendUpdate=actions_1.sendUpdate,exports.assign=actions_1.assign,exports.doneInvoke=actions_1.doneInvoke,exports.forwardTo=actions_1.forwardTo;var interpreter_1=require("./interpreter");exports.interpret=interpreter_1.interpret,exports.Interpreter=interpreter_1.Interpreter,exports.spawn=interpreter_1.spawn;var match_1=require("./match");exports.matchState=match_1.matchState;var actions={raise:actions_1.raise,send:actions_1.send,sendParent:actions_1.sendParent,sendUpdate:actions_1.sendUpdate,log:actions_1.log,cancel:actions_1.cancel,start:actions_1.start,stop:actions_1.stop,assign:actions_1.assign,after:actions_1.after,done:actions_1.done,respond:actions_1.respond,forwardTo:actions_1.forwardTo,escalate:actions_1.escalate};exports.actions=actions,function(e){for(var t in e)exports.hasOwnProperty(t)||(exports[t]=e[t])}(require("./types"))},{"./Machine":211,"./State":212,"./StateNode":213,"./actions":215,"./interpreter":220,"./mapState":221,"./match":222,"./types":226,"./utils":227}],220:[function(require,module,exports){(function(global){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t};Object.defineProperty(exports,"__esModule",{value:!0});var InterpreterStatus,t,types_1=require("./types"),State_1=require("./State"),actionTypes=require("./actionTypes"),actions_1=require("./actions"),environment_1=require("./environment"),utils_1=require("./utils"),scheduler_1=require("./scheduler"),Actor_1=require("./Actor"),stateUtils_1=require("./stateUtils"),registry_1=require("./registry"),devTools_1=require("./devTools"),DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1},withServiceScope=(t=[],function(e,n){e&&t.push(e);var i=n(e||t[t.length-1]);return e&&t.pop(),i});!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(InterpreterStatus||(InterpreterStatus={}));var Interpreter=function(){function t(e,n){var i=this;void 0===n&&(n=t.defaultOptions),this.machine=e,this.scheduler=new scheduler_1.Scheduler,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this._status=InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,e){if(utils_1.isArray(t))return i.batch(t),i.state;var n=utils_1.toSCXMLEvent(utils_1.toEventObject(t,e));if(i._status===InterpreterStatus.Stopped)return environment_1.IS_PRODUCTION||utils_1.warn(!1,'Event "'+n.name+'" was sent to stopped service "'+i.machine.id+'". This service has already reached its final state, and will not transition.\nEvent: '+JSON.stringify(n.data)),i.state;if(i._status===InterpreterStatus.NotStarted&&i.options.deferEvents)environment_1.IS_PRODUCTION||utils_1.warn(!1,'Event "'+n.name+'" was sent to uninitialized service "'+i.machine.id+'" and is deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(n.data));else if(i._status!==InterpreterStatus.Running)throw new Error('Event "'+n.name+'" was sent to uninitialized service "'+i.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(n.data));return i.scheduler.schedule(function(){i.forward(n);var t=i.nextState(n);i.update(t,n)}),i._state},this.sendTo=function(t,e){var n=i.parent&&(e===types_1.SpecialTargets.Parent||i.parent.id===e),r=n?i.parent:Actor_1.isActor(e)?e:i.children.get(e)||registry_1.registry.get(e);if(r)"machine"in r?r.send(__assign(__assign({},t),{name:t.name===actionTypes.error?""+actions_1.error(i.id):t.name,origin:i.sessionId})):r.send(t.data);else{if(!n)throw new Error("Unable to send event to child '"+e+"' from service '"+i.id+"'.");environment_1.IS_PRODUCTION||utils_1.warn(!1,"Service '"+i.id+"' has no parent: unable to send event "+t.type)}};var r=__assign(__assign({},t.defaultOptions),n),s=r.clock,o=r.logger,a=r.parent,u=r.id,c=void 0!==u?u:e.id;this.id=c,this.logger=o,this.clock=s,this.parent=a,this.options=r,this.scheduler=new scheduler_1.Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry_1.registry.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:withServiceScope(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return environment_1.IS_PRODUCTION||utils_1.warn(this._status!==InterpreterStatus.NotStarted,"Attempted to read state from uninitialized service '"+this.id+"'. Make sure the service is started first."),this._state},enumerable:!0,configurable:!0}),t.prototype.execute=function(t,e){var n,i;try{for(var r=__values(t.actions),s=r.next();!s.done;s=r.next()){var o=s.value;this.exec(o,t,e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.update=function(t,e){var n,i,r,s,o,a,u,c,l=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var d=__values(this.eventListeners),h=d.next();!h.done;h=d.next())(0,h.value)(t.event)}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}try{for(var f=__values(this.listeners),p=f.next();!p.done;p=f.next())(0,p.value)(t,t.event)}catch(t){r={error:t}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(r)throw r.error}}try{for(var v=__values(this.contextListeners),_=v.next();!_.done;_=v.next())(0,_.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(t){o={error:t}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}var y=stateUtils_1.isInFinalState(t.configuration||[],this.machine);if(this.state.configuration&&y){var S=t.configuration.find(function(t){return"final"===t.type&&t.parent===l.machine}),w=S&&S.data?utils_1.mapContext(S.data,t.context,e):void 0;try{for(var m=__values(this.doneListeners),g=m.next();!g.done;g=m.next())(0,g.value)(actions_1.doneInvoke(this.id,w))}catch(t){u={error:t}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}this.stop()}},t.prototype.onTransition=function(t){return this.listeners.add(t),this._status===InterpreterStatus.Running&&t(this.state,this.state.event),this},t.prototype.subscribe=function(t,e,n){var i,r=this;if(!t)return{unsubscribe:function(){}};var s=n;return"function"==typeof t?i=t:(i=t.next.bind(t),s=t.complete.bind(t)),this.listeners.add(i),this._status===InterpreterStatus.Running&&i(this.state),s&&this.onDone(s),{unsubscribe:function(){i&&r.listeners.delete(i),s&&r.doneListeners.delete(s)}}},t.prototype.onEvent=function(t){return this.eventListeners.add(t),this},t.prototype.onSend=function(t){return this.sendListeners.add(t),this},t.prototype.onChange=function(t){return this.contextListeners.add(t),this},t.prototype.onStop=function(t){return this.stopListeners.add(t),this},t.prototype.onDone=function(t){return this.doneListeners.add(t),this},t.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},t.prototype.start=function(t){var e=this;if(this._status===InterpreterStatus.Running)return this;registry_1.registry.register(this.sessionId,this),this.initialized=!0,this._status=InterpreterStatus.Running;var n=void 0===t?this.initialState:withServiceScope(this,function(){return State_1.isState(t)?e.machine.resolveState(t):e.machine.resolveState(State_1.State.from(t,e.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){e.update(n,actions_1.initEvent)}),this},t.prototype.stop=function(){var t,e,n,i,r,s,o,a,u,c;try{for(var l=__values(this.listeners),d=l.next();!d.done;d=l.next()){var h=d.value;this.listeners.delete(h)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}try{for(var f=__values(this.stopListeners),p=f.next();!p.done;p=f.next())(h=p.value)(),this.stopListeners.delete(h)}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}try{for(var v=__values(this.contextListeners),_=v.next();!_.done;_=v.next())h=_.value,this.contextListeners.delete(h)}catch(t){r={error:t}}finally{try{_&&!_.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}try{for(var y=__values(this.doneListeners),S=y.next();!S.done;S=y.next())h=S.value,this.doneListeners.delete(h)}catch(t){o={error:t}}finally{try{S&&!S.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}this.children.forEach(function(t){utils_1.isFunction(t.stop)&&t.stop()});try{for(var w=__values(utils_1.keys(this.delayedEventsMap)),m=w.next();!m.done;m=w.next()){var g=m.value;this.clock.clearTimeout(this.delayedEventsMap[g])}}catch(t){u={error:t}}finally{try{m&&!m.done&&(c=w.return)&&c.call(w)}finally{if(u)throw u.error}}return this.scheduler.clear(),this.initialized=!1,this._status=InterpreterStatus.Stopped,registry_1.registry.free(this.sessionId),this},t.prototype.batch=function(t){var e=this;if(this._status===InterpreterStatus.NotStarted&&this.options.deferEvents)environment_1.IS_PRODUCTION||utils_1.warn(!1,t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'" and are deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(event));else if(this._status!==InterpreterStatus.Running)throw new Error(t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule(function(){var n,i,r=e.state,s=!1,o=[],a=function(t){var n=utils_1.toSCXMLEvent(t);e.forward(n),r=withServiceScope(e,function(){return e.machine.transition(r,n)}),o.push.apply(o,__spread(r.actions.map(function(t){return State_1.bindActionToState(t,r)}))),s=s||!!r.changed};try{for(var u=__values(t),c=u.next();!c.done;c=u.next())a(c.value)}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}r.changed=s,r.actions=o,e.update(r,utils_1.toSCXMLEvent(t[t.length-1]))})},t.prototype.sender=function(t){return this.send.bind(this,t)},t.prototype.nextState=function(t){var e=this,n=utils_1.toSCXMLEvent(t);if(0===n.name.indexOf(actionTypes.errorPlatform)&&!this.state.nextEvents.some(function(t){return 0===t.indexOf(actionTypes.errorPlatform)}))throw n.data.data;return withServiceScope(this,function(){return e.machine.transition(e.state,n)})},t.prototype.forward=function(t){var e,n;try{for(var i=__values(this.forwardTo),r=i.next();!r.done;r=i.next()){var s=r.value,o=this.children.get(s);if(!o)throw new Error("Unable to forward event '"+t+"' from interpreter '"+this.id+"' to nonexistant child '"+s+"'.");o.send(t)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout(function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)},t.delay)},t.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},t.prototype.exec=function(t,e,n){var i=e.context,r=e._event,s=actions_1.getActionFunction(t.type,n)||t.exec,o=utils_1.isFunction(s)?s:s?s.exec:t.exec;if(o)try{return o(i,r.data,{action:t,state:this.state,_event:r})}catch(t){throw this.parent&&this.parent.send({type:"xstate.error",data:t}),t}switch(t.type){case actionTypes.send:var a=t;if("number"==typeof a.delay)return void this.defer(a);a.to?this.sendTo(a._event,a.to):this.send(a._event);break;case actionTypes.cancel:this.cancel(t.sendId);break;case actionTypes.start:var u=t.activity;if(!this.state.activities[u.type])break;if(u.type===types_1.ActionTypes.Invoke){var c=this.machine.options.services?this.machine.options.services[u.src]:void 0,l=u.id,d=u.data;environment_1.IS_PRODUCTION||utils_1.warn(!("forward"in u),"`forward` property is deprecated (found in invocation of '"+u.src+"' in in machine '"+this.machine.id+"'). Please use `autoForward` instead.");var h="autoForward"in u?u.autoForward:!!u.forward;if(!c)return void(environment_1.IS_PRODUCTION||utils_1.warn(!1,"No service found for invocation '"+u.src+"' in machine '"+this.machine.id+"'."));var f=utils_1.isFunction(c)?c(i,r.data):c;utils_1.isPromiseLike(f)?this.state.children[l]=this.spawnPromise(Promise.resolve(f),l):utils_1.isFunction(f)?this.state.children[l]=this.spawnCallback(f,l):utils_1.isObservable(f)?this.state.children[l]=this.spawnObservable(f,l):utils_1.isMachine(f)&&(this.state.children[l]=this.spawnMachine(d?f.withContext(utils_1.mapContext(d,i,r)):f,{id:l,autoForward:h}))}else this.spawnActivity(u);break;case actionTypes.stop:this.stopChild(t.activity.id);break;case actionTypes.log:var p=t.label,v=t.value;p?this.logger(p,v):this.logger(v);break;default:environment_1.IS_PRODUCTION||utils_1.warn(!1,"No implementation found for action type '"+t.type+"'")}},t.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.children.delete(t),this.forwardTo.delete(t),delete this.state.children[t],utils_1.isFunction(e.stop)&&e.stop())},t.prototype.spawn=function(t,e,n){if(utils_1.isPromiseLike(t))return this.spawnPromise(Promise.resolve(t),e);if(utils_1.isFunction(t))return this.spawnCallback(t,e);if(Actor_1.isActor(t))return this.spawnActor(t);if(utils_1.isObservable(t))return this.spawnObservable(t,e);if(utils_1.isMachine(t))return this.spawnMachine(t,__assign(__assign({},n),{id:e}));throw new Error('Unable to spawn entity "'+e+'" of type "'+typeof t+'".')},t.prototype.spawnMachine=function(e,n){var i=this;void 0===n&&(n={});var r=new t(e,__assign(__assign({},this.options),{parent:this,id:n.id||e.id})),s=__assign(__assign({},DEFAULT_SPAWN_OPTIONS),n);s.sync&&r.onTransition(function(t){i.send(actionTypes.update,{state:t,id:r.id})}),r.onDone(function(t){i.send(utils_1.toSCXMLEvent(t,{origin:r.id}))}).start();var o=r;return this.children.set(r.id,o),s.autoForward&&this.forwardTo.add(r.id),o},t.prototype.spawnPromise=function(t,e){var n=this,i=!1;t.then(function(t){i||n.send(utils_1.toSCXMLEvent(actions_1.doneInvoke(e,t),{origin:e}))},function(t){if(!i){var r=actions_1.error(e,t);try{n.send(utils_1.toSCXMLEvent(r,{origin:e}))}catch(i){utils_1.reportUnhandledExceptionOnInvocation(t,i,e),n.devTools&&n.devTools.send(r,n.state),n.machine.strict&&n.stop()}}});var r={id:e,send:function(){},subscribe:function(e,n,i){var r=!1;return t.then(function(t){r||(e&&e(t),r||i&&i())},function(t){r||n(t)}),{unsubscribe:function(){return r=!0}}},stop:function(){i=!0},toJSON:function(){return{id:e}}};return this.children.set(e,r),r},t.prototype.spawnCallback=function(t,e){var n,i=this,r=!1,s=new Set,o=new Set;try{n=t(function(t){o.forEach(function(e){return e(t)}),r||i.send(t)},function(t){s.add(t)})}catch(t){this.send(actions_1.error(e,t))}if(utils_1.isPromiseLike(n))return this.spawnPromise(n,e);var a={id:e,send:function(t){return s.forEach(function(e){return e(t)})},subscribe:function(t){return o.add(t),{unsubscribe:function(){o.delete(t)}}},stop:function(){r=!0,utils_1.isFunction(n)&&n()},toJSON:function(){return{id:e}}};return this.children.set(e,a),a},t.prototype.spawnObservable=function(t,e){var n=this,i=t.subscribe(function(t){n.send(utils_1.toSCXMLEvent(t,{origin:e}))},function(t){n.send(utils_1.toSCXMLEvent(actions_1.error(e,t),{origin:e}))},function(){n.send(utils_1.toSCXMLEvent(actions_1.doneInvoke(e),{origin:e}))}),r={id:e,send:function(){},subscribe:function(e,n,i){return t.subscribe(e,n,i)},stop:function(){return i.unsubscribe()},toJSON:function(){return{id:e}}};return this.children.set(e,r),r},t.prototype.spawnActor=function(t){return this.children.set(t.id,t),t},t.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}else environment_1.IS_PRODUCTION||utils_1.warn(!1,"No implementation found for activity '"+t.type+"'")},t.prototype.spawnEffect=function(t,e){this.children.set(t,{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,toJSON:function(){return{id:t}}})},t.prototype.attachDev=function(){if(this.options.devTools&&"undefined"!=typeof window){if(window.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},t),{features:__assign({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}devTools_1.registerService(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[utils_1.symbolObservable]=function(){return this},t.defaultOptions=function(t){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return t.setTimeout.call(null,e,n)},clearTimeout:function(e){return t.clearTimeout.call(null,e)}},logger:t.console.log.bind(console),devTools:!1}}("undefined"==typeof window?global:window),t.interpret=interpret,t}();exports.Interpreter=Interpreter;var createNullActor=function(t){return void 0===t&&(t="null"),{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},toJSON:function(){return{id:t}}}},resolveSpawnOptions=function(t){return utils_1.isString(t)?__assign(__assign({},DEFAULT_SPAWN_OPTIONS),{name:t}):__assign(__assign(__assign({},DEFAULT_SPAWN_OPTIONS),{name:utils_1.uniqueId()}),t)};function interpret(t,e){return new Interpreter(t,e)}exports.spawn=function(t,e){var n=resolveSpawnOptions(e);return withServiceScope(void 0,function(e){return environment_1.IS_PRODUCTION||utils_1.warn(!!e,'Attempted to spawn an Actor (ID: "'+(utils_1.isMachine(t)?t.id:"undefined")+'") outside of a service. This will have no effect.'),e?e.spawn(t,n.name,n):createNullActor(n.name)})},exports.interpret=interpret}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Actor":210,"./State":212,"./actionTypes":214,"./actions":215,"./devTools":217,"./environment":218,"./registry":223,"./scheduler":224,"./stateUtils":225,"./types":226,"./utils":227}],221:[function(require,module,exports){"use strict";var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("./utils");exports.mapState=function(e,t){var r,n,a;try{for(var l=__values(utils_1.keys(e)),o=l.next();!o.done;o=l.next()){var i=o.value;utils_1.matchesState(i,t)&&(!a||t.length>a.length)&&(a=i)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return e[a]}},{"./utils":227}],222:[function(require,module,exports){"use strict";var __values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],a=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var a,n,o=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(a=o.next()).done;)i.push(a.value)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i};Object.defineProperty(exports,"__esModule",{value:!0});var State_1=require("./State");exports.matchState=function(t,e,r){var a,n,o=State_1.State.from(t,t instanceof State_1.State?t.context:void 0);try{for(var i=__values(e),l=i.next();!l.done;l=i.next()){var u=__read(l.value,2),f=u[0],c=u[1];if(o.matches(f))return c(o)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r(o)}},{"./State":212}],223:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var children=new Map,sessionIdIndex=0;exports.registry={bookId:function(){return"x:"+sessionIdIndex++},register:function(e,n){return children.set(e,n),e},get:function(e){return children.get(e)},free:function(e){children.delete(e)}}},{}],224:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var n in e=arguments[s])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var defaultOptions={deferEvents:!1},Scheduler=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=__assign(__assign({},defaultOptions),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},t}();exports.Scheduler=Scheduler},{}],225:[function(require,module,exports){"use strict";var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},__spread=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("./utils");function getChildren(e){return utils_1.keys(e.states).map(function(t){return e.states[t]})}function getConfiguration(e,t){var r,n,a,o,i,l,u,s,f=getAdjList(new Set(e)),d=new Set(t);try{for(var c=__values(d),y=c.next();!y.done;y=c.next())for(var h=(w=y.value).parent;h&&!d.has(h);)d.add(h),h=h.parent}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}var p=getAdjList(d);try{for(var v=__values(d),g=v.next();!g.done;g=v.next())if("compound"!==(w=g.value).type||p.get(w)&&p.get(w).length){if("parallel"===w.type)try{for(var _=(i=void 0,__values(getChildren(w))),x=_.next();!x.done;x=_.next()){var S=x.value;"history"!==S.type&&(d.has(S)||(d.add(S),f.get(S)?f.get(S).forEach(function(e){return d.add(e)}):S.initialStateNodes.forEach(function(e){return d.add(e)})))}}catch(e){i={error:e}}finally{try{x&&!x.done&&(l=_.return)&&l.call(_)}finally{if(i)throw i.error}}}else f.get(w)?f.get(w).forEach(function(e){return d.add(e)}):w.initialStateNodes.forEach(function(e){return d.add(e)})}catch(e){a={error:e}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}try{for(var m=__values(d),A=m.next();!A.done;A=m.next()){var w;for(h=(w=A.value).parent;h&&!d.has(h);)d.add(h),h=h.parent}}catch(e){u={error:e}}finally{try{A&&!A.done&&(s=m.return)&&s.call(m)}finally{if(u)throw u.error}}return d}function getAdjList(e){var t,r,n=new Map;try{for(var a=__values(e),o=a.next();!o.done;o=a.next()){var i=o.value;n.has(i)||n.set(i,[]),i.parent&&(n.has(i.parent)||n.set(i.parent,[]),n.get(i.parent).push(i))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}function has(e,t){return Array.isArray(e)?e.some(function(e){return e===t}):e instanceof Set&&e.has(t)}exports.isLeafNode=function(e){return"atomic"===e.type||"final"===e.type},exports.getChildren=getChildren,exports.getAllStateNodes=function getAllStateNodes(e){var t=[e];return exports.isLeafNode(e)?t:t.concat(utils_1.flatten(getChildren(e).map(getAllStateNodes)))},exports.getConfiguration=getConfiguration,exports.getAdjList=getAdjList,exports.getValue=function(e,t){return function getValueFromAdj(e,t){var r=t.get(e);if(!r)return{};if("compound"===e.type){var n=r[0];if(!n)return{};if(exports.isLeafNode(n))return n.key}var a={};return r.forEach(function(e){a[e.key]=getValueFromAdj(e,t)}),a}(e,getAdjList(getConfiguration([e],t)))},exports.has=has,exports.nextEvents=function(e){return utils_1.flatten(__spread(new Set(e.map(function(e){return e.ownEvents}))))},exports.isInFinalState=function isInFinalState(e,t){return"compound"===t.type?getChildren(t).some(function(t){return"final"===t.type&&has(e,t)}):"parallel"===t.type&&getChildren(t).every(function(t){return isInFinalState(e,t)})}},{"./utils":227}],226:[function(require,module,exports){"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),(t=exports.ActionTypes||(exports.ActionTypes={})).Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",function(t){t.Parent="#_parent",t.Internal="#_internal"}(exports.SpecialTargets||(exports.SpecialTargets={}))},{}],227:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},__values=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},__spread=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(__read(arguments[r]));return t};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("./constants"),environment_1=require("./environment");function keys(t){return Object.keys(t)}function toStatePath(t,r){try{return isArray(t)?t:t.toString().split(r)}catch(r){throw new Error("'"+t+"' is not a valid state path.")}}function isStateLike(t){return"object"==typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function toStateValue(t,r){return isStateLike(t)?t.value:isArray(t)?pathToStateValue(t):"string"!=typeof t?t:pathToStateValue(toStatePath(t,r))}function pathToStateValue(t){if(1===t.length)return t[0];for(var r={},e=r,n=0;n<t.length-1;n++)n===t.length-2?e[t[n]]=t[n+1]:(e[t[n]]={},e=e[t[n]]);return r}function mapValues(t,r){for(var e={},n=keys(t),o=0;o<n.length;o++){var a=n[o];e[a]=r(t[a],a,t,o)}return e}function flatten(t){var r;return(r=[]).concat.apply(r,__spread(t))}function toArrayStrict(t){return isArray(t)?t:[t]}function toArray(t){return void 0===t?[]:toArrayStrict(t)}function updateHistoryStates(t,r){return mapValues(t.states,function(t,e){if(t){var n=(isString(r)?void 0:r[e])||(t?t.current:void 0);if(n)return{current:n,states:updateHistoryStates(t,n)}}})}exports.keys=keys,exports.matchesState=function matchesState(t,r,e){void 0===e&&(e=constants_1.STATE_DELIMITER);var n=toStateValue(t,e),o=toStateValue(r,e);return isString(o)?!!isString(n)&&o===n:isString(n)?n in o:keys(n).every(function(t){return t in o&&matchesState(n[t],o[t])})},exports.getEventType=function(t){try{return isString(t)||"number"==typeof t?""+t:t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}},exports.getActionType=function(t){try{return isString(t)||"number"==typeof t?""+t:isFunction(t)?t.name:t.type}catch(t){throw new Error("Actions must be strings or objects with a string action.type property.")}},exports.toStatePath=toStatePath,exports.isStateLike=isStateLike,exports.toStateValue=toStateValue,exports.pathToStateValue=pathToStateValue,exports.mapValues=mapValues,exports.mapFilterValues=function(t,r,e){var n,o,a={};try{for(var i=__values(keys(t)),s=i.next();!s.done;s=i.next()){var u=s.value,c=t[u];e(c)&&(a[u]=r(c,u,t))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a},exports.path=function(t){return function(r){var e,n,o=r;try{for(var a=__values(t),i=a.next();!i.done;i=a.next())o=o[i.value]}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}},exports.nestedPath=function(t,r){return function(e){var n,o,a=e;try{for(var i=__values(t),s=i.next();!s.done;s=i.next()){var u=s.value;a=a[r][u]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a}},exports.toStatePaths=function toStatePaths(t){return t?isString(t)?[[t]]:flatten(keys(t).map(function(r){var e=t[r];return"string"==typeof e||e&&Object.keys(e).length?toStatePaths(t[r]).map(function(t){return[r].concat(t)}):[[r]]})):[[]]},exports.pathsToStateValue=function(t){var r,e,n={};if(t&&1===t.length&&1===t[0].length)return t[0][0];try{for(var o=__values(t),a=o.next();!a.done;a=o.next())for(var i=a.value,s=n,u=0;u<i.length;u++){var c=i[u];if(u===i.length-2){s[c]=i[u+1];break}s[c]=s[c]||{},s=s[c]}}catch(t){r={error:t}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return n},exports.flatten=flatten,exports.toArrayStrict=toArrayStrict,exports.toArray=toArray,exports.mapContext=function(t,r,e){var n,o;if(isFunction(t))return t(r,e.data);var a={};try{for(var i=__values(keys(t)),s=i.next();!s.done;s=i.next()){var u=s.value,c=t[u];isFunction(c)?a[u]=c(r,e.data):a[u]=c}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a},exports.isBuiltInEvent=function(t){return/^(done|error)\./.test(t)},exports.isPromiseLike=function(t){return t instanceof Promise||!(null===t||!isFunction(t)&&"object"!=typeof t||!isFunction(t.then))},exports.partition=function(t,r){var e,n,o=__read([[],[]],2),a=o[0],i=o[1];try{for(var s=__values(t),u=s.next();!u.done;u=s.next()){var c=u.value;r(c)?a.push(c):i.push(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return[a,i]},exports.updateHistoryStates=updateHistoryStates,exports.updateHistoryValue=function(t,r){return{current:r,states:updateHistoryStates(t,r)}},exports.updateContext=function(t,r,e,n){return environment_1.IS_PRODUCTION||warn(!!t,"Attempting to update undefined context"),t?e.reduce(function(t,e){var o,a,i=e.assignment,s={state:n,action:e,_event:r},u={};if(isFunction(i))u=i(t,r.data,s);else try{for(var c=__values(keys(i)),l=c.next();!l.done;l=c.next()){var p=l.value,f=i[p];u[p]=isFunction(f)?f(t,r.data,s):f}}catch(t){o={error:t}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}return Object.assign({},t,u)},t):t};var t,warn=function(){};function isArray(t){return Array.isArray(t)}function isFunction(t){return"function"==typeof t}function isString(t){return"string"==typeof t}function isMachine(t){try{return"__xstatenode"in t}catch(t){return!1}}function toEventObject(t,r){return isString(t)||"number"==typeof t?__assign({type:t},r):t}exports.warn=warn,environment_1.IS_PRODUCTION||(exports.warn=warn=function(t,r){var e=t instanceof Error?t:void 0;if((e||!t)&&void 0!==console){var n=["Warning: "+r];e&&n.push(e),console.warn.apply(console,n)}}),exports.isArray=isArray,exports.isFunction=isFunction,exports.isString=isString,exports.toGuard=function(t,r){if(t)return isString(t)?{type:constants_1.DEFAULT_GUARD_TYPE,name:t,predicate:r?r[t]:void 0}:isFunction(t)?{type:constants_1.DEFAULT_GUARD_TYPE,name:t.name,predicate:t}:t},exports.isObservable=function(t){try{return"subscribe"in t&&isFunction(t.subscribe)}catch(t){return!1}},exports.symbolObservable="function"==typeof Symbol&&Symbol.observable||"@@observable",exports.isMachine=isMachine,exports.isActor=function(t){return!!t&&"function"==typeof t.send},exports.uniqueId=(t=0,function(){return(++t).toString(16)}),exports.toEventObject=toEventObject,exports.toSCXMLEvent=function(t,r){if(!isString(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var e=toEventObject(t);return __assign({name:e.type,data:e,$$type:"scxml",type:"external"},r)},exports.toTransitionConfigArray=function(t,r){return toArrayStrict(r).map(function(r){return void 0===r||"string"==typeof r||isMachine(r)?{target:r,event:t}:__assign(__assign({},r),{event:t})})},exports.normalizeTarget=function(t){if(void 0!==t&&t!==constants_1.TARGETLESS_KEY)return toArray(t)},exports.reportUnhandledExceptionOnInvocation=function(t,r,e){if(!environment_1.IS_PRODUCTION){var n=t.stack?" Stacktrace was '"+t.stack+"'":"";if(t===r)console.error("Missing onError handler for invocation '"+e+"', error was '"+t+"'."+n);else{var o=r.stack?" Stacktrace was '"+r.stack+"'":"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '"+e+"'. Original error: '"+t+"'. "+n+" Current error is '"+r+"'."+o)}}}},{"./constants":216,"./environment":218}],228:[function(require,module,exports){"use strict";module.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},{}],229:[function(require,module,exports){"use strict";function Yallist(t){var e=this;if(e instanceof Yallist||(e=new Yallist),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var i=0,l=arguments.length;i<l;i++)e.push(arguments[i]);return e}function push(t,e){t.tail=new Node(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Node(t,e,i,l){if(!(this instanceof Node))return new Node(t,e,i,l);this.list=l,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)push(this,arguments[t]);return this.length},Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)unshift(this,arguments[t]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,l=0;null!==i;l++)t.call(e,i.value,l,this),i=i.next},Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,l=this.length-1;null!==i;l--)t.call(e,i.value,l,this),i=i.prev},Yallist.prototype.get=function(t){for(var e=0,i=this.head;null!==i&&e<t;e++)i=i.next;if(e===t&&null!==i)return i.value},Yallist.prototype.getReverse=function(t){for(var e=0,i=this.tail;null!==i&&e<t;e++)i=i.prev;if(e===t&&null!==i)return i.value},Yallist.prototype.map=function(t,e){e=e||this;for(var i=new Yallist,l=this.head;null!==l;)i.push(t.call(e,l.value,this)),l=l.next;return i},Yallist.prototype.mapReverse=function(t,e){e=e||this;for(var i=new Yallist,l=this.tail;null!==l;)i.push(t.call(e,l.value,this)),l=l.prev;return i},Yallist.prototype.reduce=function(t,e){var i,l=this.head;if(arguments.length>1)i=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");l=this.head.next,i=this.head.value}for(var h=0;null!==l;h++)i=t(i,l.value,h),l=l.next;return i},Yallist.prototype.reduceReverse=function(t,e){var i,l=this.tail;if(arguments.length>1)i=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");l=this.tail.prev,i=this.tail.value}for(var h=this.length-1;null!==l;h--)i=t(i,l.value,h),l=l.prev;return i},Yallist.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;null!==i;e++)t[e]=i.value,i=i.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;null!==i;e++)t[e]=i.value,i=i.prev;return t},Yallist.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new Yallist;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var l=0,h=this.head;null!==h&&l<t;l++)h=h.next;for(;null!==h&&l<e;l++,h=h.next)i.push(h.value);return i},Yallist.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new Yallist;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var l=this.length,h=this.tail;null!==h&&l>e;l--)h=h.prev;for(;null!==h&&l>t;l--,h=h.prev)i.push(h.value);return i},Yallist.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;null!==i;i=i.prev){var l=i.prev;i.prev=i.next,i.next=l}return this.head=e,this.tail=t,this};try{require("./iterator.js")(Yallist)}catch(t){}},{"./iterator.js":228}],230:[function(require,module,exports){var e,t;e=this,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(39)),s=a(n(40)),o=n(41);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}n(5);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.listenToBrowserNetworkEvents,r=void 0===n||n;e.db=s.default,e.sdkFamily="Web",e.networking=new i.default({del:o.del,get:o.get,post:o.post,sendBeacon:u});var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r&&(window.addEventListener("offline",function(){a.networkDownDetected()}),window.addEventListener("online",function(){a.networkUpDetected()})),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=j(n(2)),s=j(n(6)),o=j(n(8)),a=j(n(9)),u=j(n(16)),c=K(n(17)),l=K(n(18)),h=K(n(19)),f=K(n(20)),p=K(n(21)),d=K(n(22)),y=K(n(23)),g=K(n(24)),b=K(n(25)),_=K(n(26)),v=K(n(27)),m=K(n(28)),k=K(n(29)),P=K(n(30)),O=K(n(31)),w=K(n(32)),T=K(n(33)),S=K(n(34)),C=K(n(35)),M=K(n(36)),E=K(n(37)),x=K(n(12)),N=K(n(38)),R=j(n(13)),A=j(n(10)),D=(n(5),j(n(3)));function K(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function j(e){return e&&e.__esModule?e:{default:e}}var G=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.db,R=t.networking,A=this._config=new i.default({setup:t,db:r}),D=new s.default({config:A});R.init(A);var K={config:A,networking:R,crypto:D},j=u.default.bind(this,K,x),G=u.default.bind(this,K,_),U=u.default.bind(this,K,m),I=u.default.bind(this,K,P),H=u.default.bind(this,K,N),B=this._listenerManager=new a.default,L=new o.default({timeEndpoint:j,leaveEndpoint:G,heartbeatEndpoint:U,setStateEndpoint:I,subscribeEndpoint:H,crypto:K.crypto,config:K.config,listenerManager:B});this.addListener=B.addListener.bind(B),this.removeListener=B.removeListener.bind(B),this.removeAllListeners=B.removeAllListeners.bind(B),this.channelGroups={listGroups:u.default.bind(this,K,f),listChannels:u.default.bind(this,K,p),addChannels:u.default.bind(this,K,c),removeChannels:u.default.bind(this,K,l),deleteGroup:u.default.bind(this,K,h)},this.push={addChannels:u.default.bind(this,K,d),removeChannels:u.default.bind(this,K,y),deleteDevice:u.default.bind(this,K,b),listChannels:u.default.bind(this,K,g)},this.hereNow=u.default.bind(this,K,O),this.whereNow=u.default.bind(this,K,v),this.getState=u.default.bind(this,K,k),this.setState=L.adaptStateChange.bind(L),this.grant=u.default.bind(this,K,T),this.audit=u.default.bind(this,K,w),this.publish=u.default.bind(this,K,S),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,n.publish(e,t)},this.history=u.default.bind(this,K,C),this.deleteMessages=u.default.bind(this,K,M),this.fetchMessages=u.default.bind(this,K,E),this.time=j,this.subscribe=L.adaptSubscribeChange.bind(L),this.presence=L.adaptPresenceChange.bind(L),this.unsubscribe=L.adaptUnsubscribeChange.bind(L),this.disconnect=L.disconnect.bind(L),this.reconnect=L.reconnect.bind(L),this.destroy=function(e){L.unsubscribeAll(e),L.disconnect()},this.stop=this.destroy,this.unsubscribeAll=L.unsubscribeAll.bind(L),this.getSubscribedChannels=L.getSubscribedChannels.bind(L),this.getSubscribedChannelGroups=L.getSubscribedChannelGroups.bind(L),this.encrypt=D.encrypt.bind(D),this.decrypt=D.decrypt.bind(D),this.getAuthKey=K.config.getAuthKey.bind(K.config),this.setAuthKey=K.config.setAuthKey.bind(K.config),this.setCipherKey=K.config.setCipherKey.bind(K.config),this.getUUID=K.config.getUUID.bind(K.config),this.setUUID=K.config.setUUID.bind(K.config),this.getFilterExpression=K.config.getFilterExpression.bind(K.config),this.setFilterExpression=K.config.setFilterExpression.bind(K.config),this.setHeartbeatInterval=K.config.setHeartbeatInterval.bind(K.config),R.hasModule("proxy")&&(this.setProxy=function(e){K.config.setProxy(e),n.reconnect()})}return r(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"generateUUID",value:function(){return D.default.createUUID()}}]),e}();G.OPERATIONS=R.default,G.CATEGORIES=A.default,t.default=G,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=n(3))&&r.__esModule?r:{default:r};n(5);var a=function(){function e(t){var n=t.setup,r=t.db;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._db=r,this.instanceId="pn-"+o.default.createUUID(),this.secretKey=n.secretKey||n.secret_key,this.subscribeKey=n.subscribeKey||n.subscribe_key,this.publishKey=n.publishKey||n.publish_key,this.sdkName=n.sdkName,this.sdkFamily=n.sdkFamily,this.partnerId=n.partnerId,this.setAuthKey(n.authKey),this.setCipherKey(n.cipherKey),this.setFilterExpression(n.filterExpression),this.origin=n.origin||"pubsub.pndsn.com",this.secure=n.ssl||!1,this.restore=n.restore||!1,this.proxy=n.proxy,this.keepAlive=n.keepAlive,this.keepAliveSettings=n.keepAliveSettings,this.autoNetworkDetection=n.autoNetworkDetection||!1,this.dedupeOnSubscribe=n.dedupeOnSubscribe||!1,this.maximumCacheSize=n.maximumCacheSize||100,this.customEncrypt=n.customEncrypt,this.customDecrypt=n.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=n.logVerbosity||!1,this.suppressLeaveEvents=n.suppressLeaveEvents||!1,this.announceFailedHeartbeats=n.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=n.announceSuccessfulHeartbeats||!1,this.useInstanceId=n.useInstanceId||!1,this.useRequestId=n.useRequestId||!1,this.requestMessageCountThreshold=n.requestMessageCountThreshold,this.setTransactionTimeout(n.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(n.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(n.useSendBeacon||!0),this.setPresenceTimeout(n.presenceTimeout||300),null!=n.heartbeatInterval&&this.setHeartbeatInterval(n.heartbeatInterval),this.setUUID(this._decideUUID(n.uuid))}return i(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set(this.subscribeKey+"uuid",e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return this._presenceTimeout=e,this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.21.5"}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get(this.subscribeKey+"uuid")?this._db.get(this.subscribeKey+"uuid"):"pn-"+o.default.createUUID())}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(4))&&r.__esModule?r:{default:r};t.default={createUUID:function(){return s.default.uuid?s.default.uuid():(0,s.default)()}},e.exports=t.default},function(e,t,n){var r,i,s,o;o=function(e){var t={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function n(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}function r(e,n){var r=t[n||"all"];return r&&r.test(e)||!1}n.isUUID=r,n.VERSION="0.1.0",e.uuid=n,e.isUUID=r},i=[t],void 0===(s="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=s)},function(e,t){"use strict";e.exports={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(s(n(2)),s(n(7)));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){var n=t.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=n,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return r(e,[{key:"HMACSHA256",value:function(e){return i.default.HmacSHA256(e,this._config.secretKey).toString(i.default.enc.Base64)}},{key:"SHA256",value:function(e){return i.default.SHA256(e).toString(i.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?i.default.enc.Base64.parse(e):"hex"===t.keyEncoding?i.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?i.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?i.default.mode.ECB:i.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?i.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,n){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,n)}},{key:"decrypt",value:function(e,t,n){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,n)}},{key:"pnEncrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),s=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);return i.default.AES.encrypt(e,o,{iv:r,mode:s}).ciphertext.toString(i.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),s=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);try{var a=i.default.enc.Base64.parse(e),u=i.default.AES.decrypt({ciphertext:a},o,{iv:r,mode:s}).toString(i.default.enc.Utf8);return JSON.parse(u)}catch(e){return null}}}]),e}();t.default=o,e.exports=t.default},function(e,t){"use strict";var n,r,i,s,o,a=a||function(e,t){var n={},r=n.lib={},i=function(){},s=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,a=i/(4*s);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,i=e.min(4*t,i),t){for(var u=0;u<t;u+=s)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new o.init(u,i)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);!function(e){for(var t=a,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,s=[],o=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var h;e:{h=c;for(var f=e.sqrt(h),p=2;p<=f;p++)if(!(h%p)){h=!1;break e}h=!0}h&&(8>l&&(s[l]=u(e.pow(c,.5))),o[l]=u(e.pow(c,1/3)),l++),c++}var d=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|e[t+f];else{var p=d[f-15],y=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+d[f-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+o[f]+d[f],y=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),h=l,l=c,c=u,u=a+p|0,a=s,s=i,i=r,r=p+y|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),r=(n=a).enc.Utf8,n.algo.HMAC=n.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),a=s.words,u=o.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),s=(i=a).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(r=n.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],i=0,o=0;o<t;o++)if(o%4){var a=n.indexOf(e.charAt(o-1))<<o%4*2,u=n.indexOf(e.charAt(o))>>>6-o%4*2;r[i>>>2]|=(a|u)<<24-i%4*8,i++}return s.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,r,i,s,o){return((e=e+(t&n|~t&r)+i+o)<<s|e>>>32-s)+t}function n(e,t,n,r,i,s,o){return((e=e+(t&r|n&~r)+i+o)<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return((e=e+(t^n^r)+i+o)<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return((e=e+(n^(t|~r))+i+o)<<s|e>>>32-s)+t}for(var s=a,o=(c=s.lib).WordArray,u=c.Hasher,c=s.algo,l=[],h=0;64>h;h++)l[h]=4294967296*e.abs(e.sin(h+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var o=0;16>o;o++){var a=e[u=s+o];e[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}o=this._hash.words;var u=e[s+0],c=(a=e[s+1],e[s+2]),h=e[s+3],f=e[s+4],p=e[s+5],d=e[s+6],y=e[s+7],g=e[s+8],b=e[s+9],_=e[s+10],v=e[s+11],m=e[s+12],k=e[s+13],P=e[s+14],O=e[s+15],w=t(w=o[0],C=o[1],S=o[2],T=o[3],u,7,l[0]),T=t(T,w,C,S,a,12,l[1]),S=t(S,T,w,C,c,17,l[2]),C=t(C,S,T,w,h,22,l[3]);w=i(w=r(w=r(w=r(w=r(w=n(w=n(w=n(w=n(w=t(w=t(w=t(w,C,S,T,f,7,l[4]),C=t(C,S=t(S,T=t(T,w,C,S,p,12,l[5]),w,C,d,17,l[6]),T,w,y,22,l[7]),S,T,g,7,l[8]),C=t(C,S=t(S,T=t(T,w,C,S,b,12,l[9]),w,C,_,17,l[10]),T,w,v,22,l[11]),S,T,m,7,l[12]),C=t(C,S=t(S,T=t(T,w,C,S,k,12,l[13]),w,C,P,17,l[14]),T,w,O,22,l[15]),S,T,a,5,l[16]),C=n(C,S=n(S,T=n(T,w,C,S,d,9,l[17]),w,C,v,14,l[18]),T,w,u,20,l[19]),S,T,p,5,l[20]),C=n(C,S=n(S,T=n(T,w,C,S,_,9,l[21]),w,C,O,14,l[22]),T,w,f,20,l[23]),S,T,b,5,l[24]),C=n(C,S=n(S,T=n(T,w,C,S,P,9,l[25]),w,C,h,14,l[26]),T,w,g,20,l[27]),S,T,k,5,l[28]),C=n(C,S=n(S,T=n(T,w,C,S,c,9,l[29]),w,C,y,14,l[30]),T,w,m,20,l[31]),S,T,p,4,l[32]),C=r(C,S=r(S,T=r(T,w,C,S,g,11,l[33]),w,C,v,16,l[34]),T,w,P,23,l[35]),S,T,a,4,l[36]),C=r(C,S=r(S,T=r(T,w,C,S,f,11,l[37]),w,C,y,16,l[38]),T,w,_,23,l[39]),S,T,k,4,l[40]),C=r(C,S=r(S,T=r(T,w,C,S,u,11,l[41]),w,C,h,16,l[42]),T,w,d,23,l[43]),S,T,b,4,l[44]),C=r(C,S=r(S,T=r(T,w,C,S,m,11,l[45]),w,C,O,16,l[46]),T,w,c,23,l[47]),S,T,u,6,l[48]),C=i(C=i(C=i(C=i(C,S=i(S,T=i(T,w,C,S,y,10,l[49]),w,C,P,15,l[50]),T,w,p,21,l[51]),S=i(S,T=i(T,w=i(w,C,S,T,m,6,l[52]),C,S,h,10,l[53]),w,C,_,15,l[54]),T,w,a,21,l[55]),S=i(S,T=i(T,w=i(w,C,S,T,g,6,l[56]),C,S,O,10,l[57]),w,C,d,15,l[58]),T,w,k,21,l[59]),S=i(S,T=i(T,w=i(w,C,S,T,f,6,l[60]),C,S,v,10,l[61]),w,C,c,15,l[62]),T,w,b,21,l[63]),o[0]=o[0]+w|0,o[1]=o[1]+C|0,o[2]=o[2]+S|0,o[3]=o[3]+T|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=u._createHelper(c),s.HmacMD5=u._createHmacHelper(c)}(Math),function(){var e,t=a,n=(e=t.lib).Base,r=e.WordArray,i=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(a=this.cfg).hasher.create(),i=r.create(),s=i.words,o=a.keySize,a=a.iterations;s.length<o;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<a;c++)u=n.finalize(u),n.reset();i.concat(u)}return i.sigBytes=4*o,i}});t.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),a.lib.Cipher||function(e){var t=(d=a).lib,n=t.Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,s=d.enc.Base64,o=d.algo.EvpKDF,u=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?y:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?y:p).decrypt(e,t,n,r)}}}});t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=d.mode={},l=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},h=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),h.Decryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=i}}),c=c.CBC=h,h=(d.pad={}).Pkcs7={pad:function(e,t){for(var n,i=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(i);n=r.create(s,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:h}),reset:function(){u.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(c=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:c}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,f.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=r.random(8)),e=o.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:i})}},y=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:d}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=p.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=a,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],s=[],o=[],u=[],c=[],l=[],h=[],f=[],p=[],d=[],y=0;256>y;y++)d[y]=128>y?y<<1:y<<1^283;var g=0,b=0;for(y=0;256>y;y++){var _=(_=b^b<<1^b<<2^b<<3^b<<4)>>>8^255&_^99;r[g]=_,i[_]=g;var v=d[g],m=d[v],k=d[m],P=257*d[_]^16843008*_;s[g]=P<<24|P>>>8,o[g]=P<<16|P>>>16,u[g]=P<<8|P>>>24,c[g]=P,P=16843009*k^65537*m^257*v^16843008*g,l[_]=P<<24|P>>>8,h[_]=P<<16|P>>>16,f[_]=P<<8|P>>>24,p[_]=P,g?(g=v^d[d[d[k^v]]],b^=d[d[b]]):g=b=1}var O=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],s=0;s<n;s++)if(s<t)i[s]=e[s];else{var o=i[s-1];s%t?6<t&&4==s%t&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=O[s/t|0]<<24),i[s]=i[s-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)s=n-t,o=t%4?i[s]:i[s-4],e[t]=4>t||4>=s?o:l[r[o>>>24]]^h[r[o>>>16&255]]^f[r[o>>>8&255]]^p[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,u,c,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,f,p,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],p=4,d=1;d<u;d++){var y=r[c>>>24]^i[l>>>16&255]^s[h>>>8&255]^o[255&f]^n[p++],g=r[l>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[255&c]^n[p++],b=r[h>>>24]^i[f>>>16&255]^s[c>>>8&255]^o[255&l]^n[p++];f=r[f>>>24]^i[c>>>16&255]^s[l>>>8&255]^o[255&h]^n[p++],c=y,l=g,h=b}y=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[p++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[p++],b=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[p++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[p++],e[t]=y,e[t+1]=g,e[t+2]=b,e[t+3]=f},keySize:8}),e.AES=t._createHelper(n)}(),a.mode.ECB=((o=a.lib.BlockCipherMode.extend()).Encryptor=o.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),o.Decryptor=o.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),o),e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(u(n(6)),u(n(2)),u(n(9)),u(n(11))),s=u(n(14)),o=u(n(15)),a=(n(5),u(n(10)));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=t.subscribeEndpoint,r=t.leaveEndpoint,o=t.heartbeatEndpoint,a=t.setStateEndpoint,u=t.timeEndpoint,c=t.config,l=t.crypto,h=t.listenerManager;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listenerManager=h,this._config=c,this._leaveEndpoint=r,this._heartbeatEndpoint=o,this._setStateEndpoint=a,this._subscribeEndpoint=n,this._crypto=l,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new i.default({timeEndpoint:u}),this._dedupingManager=new s.default({config:c})}return r(e,[{key:"adaptStateChange",value:function(e,t){var n=this,r=e.state,i=e.channels,s=void 0===i?[]:i,o=e.channelGroups,a=void 0===o?[]:o;return s.forEach(function(e){e in n._channels&&(n._channels[e].state=r)}),a.forEach(function(e){e in n._channelGroups&&(n._channelGroups[e].state=r)}),this._setStateEndpoint({state:r,channels:s,channelGroups:a},t)}},{key:"adaptPresenceChange",value:function(e){var t=this,n=e.connected,r=e.channels,i=void 0===r?[]:r,s=e.channelGroups,o=void 0===s?[]:s;n?(i.forEach(function(e){t._heartbeatChannels[e]={state:{}}}),o.forEach(function(e){t._heartbeatChannelGroups[e]={state:{}}})):(i.forEach(function(e){e in t._heartbeatChannels&&delete t._heartbeatChannels[e]}),o.forEach(function(e){e in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[e]}),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:i,channelGroups:o},function(e){t._listenerManager.announceStatus(e)})),this.reconnect()}},{key:"adaptSubscribeChange",value:function(e){var t=this,n=e.timetoken,r=e.channels,i=void 0===r?[]:r,s=e.channelGroups,o=void 0===s?[]:s,a=e.withPresence,u=void 0!==a&&a,c=e.withHeartbeats,l=void 0===c||c;this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach(function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),l&&(t._heartbeatChannels[e]={}),t._pendingChannelSubscriptions.push(e)}),o.forEach(function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),l&&(t._heartbeatChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(e,t){var n=this,r=e.channels,i=void 0===r?[]:r,s=e.channelGroups,o=void 0===s?[]:s,a=[],u=[];i.forEach(function(e){e in n._channels&&(delete n._channels[e],a.push(e),e in n._heartbeatChannels&&delete n._heartbeatChannels[e]),e in n._presenceChannels&&(delete n._presenceChannels[e],a.push(e))}),o.forEach(function(e){e in n._channelGroups&&(delete n._channelGroups[e],u.push(e),e in n._heartbeatChannelGroups&&delete n._heartbeatChannelGroups[e]),e in n._presenceChannelGroups&&(delete n._channelGroups[e],u.push(e))}),0===a.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:a,channelGroups:u},function(e){e.affectedChannels=a,e.affectedChannelGroups=u,e.currentTimetoken=n._currentTimetoken,e.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(e)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=this.getHeartbeatChannels(),n=this.getHeartbeatChannelGroups(),r={};0===t.length&&0===n.length||(this.getSubscribedChannels().forEach(function(t){var n=e._channels[t].state;Object.keys(n).length&&(r[t]=n)}),this.getSubscribedChannelGroups().forEach(function(t){var n=e._channelGroups[t].state;Object.keys(n).length&&(r[t]=n)}),this._heartbeatEndpoint({channels:t,channelGroups:n,state:r},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){this._stopSubscribeLoop();var e=[],t=[];if(Object.keys(this._channels).forEach(function(t){return e.push(t)}),Object.keys(this._presenceChannels).forEach(function(t){return e.push(t+"-pnpres")}),Object.keys(this._channelGroups).forEach(function(e){return t.push(e)}),Object.keys(this._presenceChannelGroups).forEach(function(e){return t.push(e+"-pnpres")}),0!==e.length||0!==t.length){var n={channels:e,channelGroups:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(n,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(e,t){var n=this;if(e.error)e.category===a.default.PNTimeoutCategory?this._startSubscribeLoop():e.category===a.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){n._config.autoNetworkDetection&&!n._isOnline&&(n._isOnline=!0,n._listenerManager.announceNetworkUp()),n.reconnect(),n._subscriptionStatusAnnounced=!0;var t={category:a.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:n._lastTimetoken,currentTimetoken:n._currentTimetoken};n._listenerManager.announceStatus(t)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===a.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=a.default.PNConnectedCategory,r.operation=e.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=t.messages||[],s=this._config,u=s.requestMessageCountThreshold,c=s.dedupeOnSubscribe;if(u&&i.length>=u){var l={};l.category=a.default.PNRequestMessageCountExceededCategory,l.operation=e.operation,this._listenerManager.announceStatus(l)}i.forEach(function(e){var t=e.channel,r=e.subscriptionMatch,i=e.publishMetaData;if(t===r&&(r=null),c){if(n._dedupingManager.isDuplicate(e))return;n._dedupingManager.addEntry(e)}if(o.default.endsWith(e.channel,"-pnpres")){var s={channel:null,subscription:null};s.actualChannel=null!=r?t:null,s.subscribedChannel=null!=r?r:t,t&&(s.channel=t.substring(0,t.lastIndexOf("-pnpres"))),r&&(s.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),s.action=e.payload.action,s.state=e.payload.data,s.timetoken=i.publishTimetoken,s.occupancy=e.payload.occupancy,s.uuid=e.payload.uuid,s.timestamp=e.payload.timestamp,e.payload.join&&(s.join=e.payload.join),e.payload.leave&&(s.leave=e.payload.leave),e.payload.timeout&&(s.timeout=e.payload.timeout),n._listenerManager.announcePresence(s)}else{var a={channel:null,subscription:null};a.actualChannel=null!=r?t:null,a.subscribedChannel=null!=r?r:t,a.channel=t,a.subscription=r,a.timetoken=i.publishTimetoken,a.publisher=e.issuingClientId,e.userMetadata&&(a.userMetadata=e.userMetadata),n._config.cipherKey?a.message=n._crypto.decrypt(e.payload):a.message=e.payload,n._listenerManager.announceMessage(a)}}),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=(n(5),n(10)))&&r.__esModule?r:{default:r},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listeners=[]}return i(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach(function(n){n!==e&&t.push(n)}),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach(function(t){t.presence&&t.presence(e)})}},{key:"announceStatus",value:function(e){this._listeners.forEach(function(t){t.status&&t.status(e)})}},{key:"announceMessage",value:function(e){this._listeners.forEach(function(t){t.message&&t.message(e)})}},{key:"announceNetworkUp",value:function(){var e={};e.category=o.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=o.default.PNNetworkDownCategory,this.announceStatus(e)}}]),e}();t.default=a,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(r=n(12))&&r.__esModule,n(5);var o=function(){function e(t){var n=t.timeEndpoint;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._timeEndpoint=n}return i(e,[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint(function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())})}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(r=n(2))&&r.__esModule,n(5);var o=function(){function e(t){var n=t.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hashHistory=[],this._config=n}return i(e,[{key:"getKey",value:function(e){var t=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(JSON.stringify(e.payload)).toString();return e.publishMetaData.publishTimetoken+"-"+t}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),e}();t.default=o,e.exports=t.default},function(e,t){"use strict";function n(e){return encodeURIComponent(e).replace(/[!~*'()]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}e.exports={signPamFromParams:function(e){return function(e){return function(e){var t=[];return Object.keys(e).forEach(function(e){return t.push(e)}),t}(e).sort()}(e).map(function(t){return t+"="+n(e[t])}).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e=void 0,t=void 0;return{promise:new Promise(function(n,r){e=n,t=r}),reject:t,fulfill:e}},encodeString:n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.networking,o=e.config,c=null,l=null,h={};t.getOperation()===s.default.PNTimeOperation||t.getOperation()===s.default.PNChannelGroupsOperation?c=arguments.length<=2?void 0:arguments[2]:(h=arguments.length<=2?void 0:arguments[2],c=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||c||(l=i.default.createPromise());var f=t.validateParams(e,h);if(f)return c?c(u(f)):l?(l.reject(new a("Validation failed, check status for details",u(f))),l.promise):void 0;var p=t.prepareParams(e,h),d=function(e,t,n){return e.usePost&&e.usePost(t,n)?e.postURL(t,n):e.getURL(t,n)}(t,e,h),y=void 0,g={url:d,operation:t.getOperation(),timeout:t.getRequestTimeout(e)};p.uuid=o.UUID,p.pnsdk=function(e){if(e.sdkName)return e.sdkName;var t="PubNub-JS-"+e.sdkFamily;return e.partnerId&&(t+="-"+e.partnerId),t+"/"+e.getVersion()}(o),o.useInstanceId&&(p.instanceid=o.instanceId),o.useRequestId&&(p.requestid=r.default.createUUID()),t.isAuthSupported()&&o.getAuthKey()&&(p.auth=o.getAuthKey()),o.secretKey&&function(e,t,n){var r=e.config,s=e.crypto;n.timestamp=Math.floor((new Date).getTime()/1e3);var o=r.subscribeKey+"\n"+r.publishKey+"\n"+t+"\n";o+=i.default.signPamFromParams(n);var a=s.HMACSHA256(o);a=(a=a.replace(/\+/g,"-")).replace(/\//g,"_"),n.signature=a}(e,d,p);var b=function(n,r){if(n.error)c?c(n):l&&l.reject(new a("PubNub call failed, check status for details",n));else{var i=t.handleResponse(e,r,h);c?c(n,i):l&&l.fulfill(i)}};if(t.usePost&&t.usePost(e,h)){var _=t.postPayload(e,h);y=n.POST(p,_,g,b)}else y=t.useDelete&&t.useDelete()?n.DELETE(p,g,b):n.GET(p,g,b);return t.getOperation()===s.default.PNSubscribeOperation?y:l?l.promise:void 0};var r=o(n(3)),i=(n(5),o(n(15))),s=(o(n(2)),o(n(13)));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name=r.constructor.name,r.status=n,r.message=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();function u(e){return(t={message:e}).type="validationError",t.error=!0,t;var t}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+i.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+i.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+i.default.encodeString(n)+"/remove"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+i.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,s=e.config;return n?r?i&&0!==i.length?s.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels;return{type:n,add:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,s=e.config;return n?r?i&&0!==i.length?s.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels;return{type:n,remove:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return n?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(e,t){return{channels:t}},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return n?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n+"/remove"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(){return{}},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=s.length>0?s.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+i.default.encodeString(o)+"/leave"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(){return{}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r;return"/v2/presence/sub-key/"+n.subscribeKey+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=s.length>0?s.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+i.default.encodeString(o)+"/heartbeat"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.state,s=void 0===i?{}:i,o=e.config,a={};return r.length>0&&(a["channel-group"]=r.join(",")),a.state=JSON.stringify(s),a.heartbeat=o.getPresenceTimeout(),a},t.handleResponse=function(){return{}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,s=void 0===r?n.UUID:r,o=t.channels,a=void 0===o?[]:o,u=a.length>0?a.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+i.default.encodeString(u)+"/uuid/"+s},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,s=n.channelGroups,o=void 0===s?[]:s,a={};return 1===i.length&&0===o.length?a[i[0]]=t.payload:a=t.payload,{channels:a}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNSetStateOperation},t.validateParams=function(e,t){var n=e.config,r=t.state,i=t.channels,s=void 0===i?[]:i,o=t.channelGroups,a=void 0===o?[]:o;return r?n.subscribeKey?0===s.length&&0===a.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=s.length>0?s.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+i.default.encodeString(o)+"/uuid/"+n.UUID+"/data"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.state,r=t.channelGroups,i=void 0===r?[]:r,s={};return s.state=JSON.stringify(n),i.length>0&&(s["channel-group"]=i.join(",")),s},t.handleResponse=function(e,t){return{state:t.payload}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=t.channelGroups,a=void 0===o?[]:o,u="/v2/presence/sub-key/"+n.subscribeKey;if(s.length>0||a.length>0){var c=s.length>0?s.join(","):",";u+="/channel/"+i.default.encodeString(c)}return u},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.includeUUIDs,s=void 0===i||i,o=t.includeState,a=void 0!==o&&o,u={};return s||(u.disable_uuids=1),a&&(u.state=1),r.length>0&&(u["channel-group"]=r.join(",")),u},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,s=n.channelGroups,o=void 0===s?[]:s,a=n.includeUUIDs,u=void 0===a||a,c=n.includeState,l=void 0!==c&&c;return i.length>1||o.length>0||0===o.length&&0===i.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach(function(n){var r=t.payload.channels[n],i=[];return e.channels[n]={occupants:i,name:n,occupancy:r.occupancy},u&&r.uuids.forEach(function(e){l?i.push({state:e.state,uuid:e.uuid}):i.push({state:null,uuid:e})}),e}),e}():function(){var e={},n=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[i[0]]={occupants:n,name:i[0],occupancy:t.occupancy},u&&t.uuids&&t.uuids.forEach(function(e){l?n.push({state:e.state,uuid:e.uuid}):n.push({state:null,uuid:e})}),e}()},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/audit/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channel,r=t.channelGroup,i=t.authKeys,s=void 0===i?[]:i,o={};return n&&(o.channel=n),r&&(o["channel-group"]=r),s.length>0&&(o.auth=s.join(",")),o},t.handleResponse=function(e,t){return t.payload},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;return t.subscribeKey?t.publishKey?t.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/grant/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.channelGroups,s=void 0===i?[]:i,o=t.ttl,a=t.read,u=void 0!==a&&a,c=t.write,l=void 0!==c&&c,h=t.manage,f=void 0!==h&&h,p=t.authKeys,d=void 0===p?[]:p,y={};return y.r=u?"1":"0",y.w=l?"1":"0",y.m=f?"1":"0",r.length>0&&(y.channel=r.join(",")),s.length>0&&(y["channel-group"]=s.join(",")),d.length>0&&(y.auth=d.join(",")),(o||0===o)&&(y.ttl=o),y},t.handleResponse=function(){return{}},n(5);var r,s=(r=n(13))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getOperation=function(){return i.default.PNPublishOperation},t.validateParams=function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var n=t.sendByPost;return void 0!==n&&n},t.getURL=function(e,t){var n=e.config,r=t.channel,o=a(e,t.message);return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+s.default.encodeString(r)+"/0/"+s.default.encodeString(o)},t.postURL=function(e,t){var n=e.config,r=t.channel;return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+s.default.encodeString(r)+"/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return a(e,t.message)},t.prepareParams=function(e,t){var n=t.meta,i=t.replicate,s=void 0===i||i,o=t.storeInHistory,a=t.ttl,u={};return null!=o&&(u.store=o?"1":"0"),a&&(u.ttl=a),!1===s&&(u.norep="true"),n&&"object"===(void 0===n?"undefined":r(n))&&(u.meta=JSON.stringify(n)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}},n(5);var i=o(n(13)),s=o(n(15));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.crypto,r=e.config,i=JSON.stringify(t);return r.cipherKey&&(i=n.encrypt(i),i=JSON.stringify(i)),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNHistoryOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=t.channel;return"/v2/history/sub-key/"+e.config.subscribeKey+"/channel/"+i.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.reverse,s=t.count,o=void 0===s?100:s,a=t.stringifiedTimeToken,u=void 0!==a&&a,c={include_token:"true"};return c.count=o,n&&(c.start=n),r&&(c.end=r),u&&(c.string_message_token="true"),null!=i&&(c.reverse=i.toString()),c},t.handleResponse=function(e,t){var n={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return t[0].forEach(function(t){var r={timetoken:t.timetoken,entry:function(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}(e,t.message)};n.messages.push(r)}),n},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=t.channel;return"/v3/history/sub-key/"+e.config.subscribeKey+"/channel/"+i.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i={};return n&&(i.start=n),r&&(i.end=r),i},t.handleResponse=function(e,t){return t.payload},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var n=t.channels,r=e.config;return n&&0!==n.length?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channels"},t.getURL=function(e,t){var n=t.channels,r=void 0===n?[]:n,s=e.config,o=r.length>0?r.join(","):",";return"/v3/history/sub-key/"+s.subscribeKey+"/channel/"+i.default.encodeString(o)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.count,s=t.stringifiedTimeToken,o=void 0!==s&&s,a={};return i&&(a.max=i),n&&(a.start=n),r&&(a.end=r),o&&(a.string_message_token="true"),a},t.handleResponse=function(e,t){var n={channels:{}};return Object.keys(t.channels||{}).forEach(function(r){n.channels[r]=[],(t.channels[r]||[]).forEach(function(t){var i={};i.channel=r,i.subscription=null,i.timetoken=t.timetoken,i.message=function(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}(e,t.message),n.channels[r].push(i)})}),n},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=s.length>0?s.join(","):",";return"/v2/subscribe/"+n.subscribeKey+"/"+i.default.encodeString(o)+"/0"},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=e.config,r=t.channelGroups,i=void 0===r?[]:r,s=t.timetoken,o=t.filterExpression,a=t.region,u={heartbeat:n.getPresenceTimeout()};return i.length>0&&(u["channel-group"]=i.join(",")),o&&o.length>0&&(u["filter-expr"]=o),s&&(u.tt=s),a&&(u.tr=a),u},t.handleResponse=function(e,t){var n=[];t.m.forEach(function(e){var t={publishTimetoken:e.p.t,region:e.p.r},r={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};n.push(r)});var r={timetoken:t.t.t,region:t.t.r};return{messages:n,metadata:r}},n(5);var r=s(n(13)),i=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(s(n(2)),s(n(10)));function s(e){return e&&e.__esModule?e:{default:e}}n(5);var o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modules={},Object.keys(t).forEach(function(e){n._modules[e]=t[e].bind(n)})}return r(e,[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){return-1===this._providedFQDN.indexOf("pubsub.")?this._providedFQDN:(this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("pubsub","ps"+e));var e}},{key:"hasModule",value:function(e){return e in this._modules}},{key:"shiftStandardOrigin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._standardOrigin=this.nextOrigin(e),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,n,r){return this._modules.post(e,t,n,r)}},{key:"GET",value:function(e,t,n){return this._modules.get(e,t,n)}},{key:"DELETE",value:function(e,t,n){return this._modules.del(e,t,n)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return i.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return i.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return i.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return i.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return i.default.PNNetworkIssuesCategory;if(e.timeout)return i.default.PNTimeoutCategory;if("ETIMEDOUT"===e.code)return i.default.PNNetworkIssuesCategory;if(e.response){if(e.response.badRequest)return i.default.PNBadRequestCategory;if(e.response.forbidden)return i.default.PNAccessDeniedCategory}return i.default.PNUnknownCategory}}]),e}();t.default=o,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){var r=s.default.get(this.getStandardOrigin()+t.url).query(e);return a.call(this,r,t,n)},t.post=function(e,t,n,r){var i=s.default.post(this.getStandardOrigin()+n.url).query(e).send(t);return a.call(this,i,n,r)},t.del=function(e,t,n){var r=s.default.delete(this.getStandardOrigin()+t.url).query(e);return a.call(this,r,t,n)};var r,s=(r=n(42))&&r.__esModule?r:{default:r};function o(e){var t=(new Date).getTime(),n=(new Date).toISOString(),r=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;r.log("<<<<<"),r.log("["+n+"]","\n",e.url,"\n",e.qs),r.log("-----"),e.on("response",function(n){var i=(new Date).getTime()-t,s=(new Date).toISOString();r.log(">>>>>>"),r.log("["+s+" / "+i+"]","\n",e.url,"\n",e.qs,"\n",n.text),r.log("-----")})}function a(e,t,n){var r=this;return this._config.logVerbosity&&(e=e.use(o)),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._modules.keepAlive(e)),e.timeout(t.timeout).end(function(e,i){var s={};if(s.error=null!==e,s.operation=t.operation,i&&i.status&&(s.statusCode=i.status),e){if(e.response&&e.response.text&&!r._config.logVerbosity)try{s.errorData=JSON.parse(e.response.text)}catch(t){s.errorData=e}else s.errorData=e;return s.category=r._detectErrorCategory(e),n(s,null)}var o=JSON.parse(i.text);return o.error&&1===o.error&&o.status&&o.message&&o.service?(s.errorData=o,s.statusCode=o.status,s.error=!0,s.category=r._detectErrorCategory(s),n(s,null)):n(s,o)})}n(5)},function(e,t,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var i=n(43),s=n(44),o=n(45),a=n(46),u=n(48);function c(){}var l=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=b,l.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){if(!o(e))return e;var t=[];for(var n in e)p(t,n,e[n]);return t.join("&")}function p(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){p(e,t,n)});else if(o(n))for(var r in n)p(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function d(e){for(var t,n,r={},i=e.split("&"),s=0,o=i.length;s<o;++s)-1==(n=(t=i[s]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function y(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,s=e.split(/\r?\n/),o={},a=0,u=s.length;a<u;++a)-1!==(t=(n=s[a]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=h(n.slice(t+1)),o[r]=i);return o}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function b(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new g(n)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function _(e,t,n){var r=l("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}l.serializeObject=f,l.parseString=d,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":f,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":d,"application/json":JSON.parse},a(g.prototype),g.prototype._parseBody=function(e){var t=l.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&y(this.type)&&(t=l.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},l.Response=g,i(b.prototype),s(b.prototype),b.prototype.type=function(e){return this.set("Content-Type",l.types[e]||e),this},b.prototype.accept=function(e){return this.set("Accept",l.types[e]||e),this},b.prototype.auth=function(e,t,n){return 1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"}),this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},b.prototype.query=function(e){return"string"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},b.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},b.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},b.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},b.prototype.buffer=b.prototype.ca=b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.pipe=b.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},b.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},b.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||c,this._finalizeQueryString(),this._end()},b.prototype._end=function(){var e=this,t=this.xhr=l.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],s=this._serializer||l.serialize[i?i.split(";")[0]:""];!s&&y(i)&&(s=l.serialize["application/json"]),s&&(n=s(n))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},l.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){u.prototype[e.toLowerCase()]=function(t,n){var r=new l.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete,l.get=function(e,t,n){var r=l("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.head=function(e,t,n){var r=l("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.options=function(e,t,n){var r=l("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.del=_,l.delete=_,l.patch=function(e,t,n){var r=l("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.post=function(e,t,n){var r=l("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.put=function(e,t,n){var r=l("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";var r=n(45);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},i.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},i.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";var r=n(47);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=n}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PubNub=t():e.PubNub=t()},{}]},{},[143]);
