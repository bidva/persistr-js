!function(){var t=class extends Error{constructor(t,e){super(t+(e?" caused by: "+e:"")),this.error=e,this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},e={ConnectionRefused:class extends t{constructor(){super("Connection refused while attempting to connect to Persistr API")}},Fetch:class extends t{constructor(t){super(t)}},InternalError:class extends t{constructor(t){super(t?"Internal error\nWhat went wrong:\n"+t.message:"Internal error")}},InvalidBearerToken:class extends t{constructor({bearer:t}){super("Invalid bearer token: "+t)}},InvalidCredentials:class extends t{constructor(){super("Invalid credentials")}},PersistrError:t,StatusCode:class extends t{constructor(t,e,n,r){let i=`${t} ${e} ${n}`;try{const t=JSON.parse(r);t&&t.error&&(i=`${i}: ${t.error}`)}catch(s){}super(i),this.statusCode=e}},UnsupportedFilter:class extends t{constructor({filter:t,on:e}){super(`Unsupported filter '${t}' on ${e}`)}},handle:async function(t){try{return await t()}catch(n){if(n instanceof e.PersistrError)throw n;if(n&&n.error&&"ECONNREFUSED"===n.error.code)throw new e.ConnectionRefused;throw n}}},n=e,r={};(function(t){!function(){"use strict";r=function(e){return(e instanceof t?e:t.from(e.toString(),"binary")).toString("base64")}}()}).call(this,require("buffer").Buffer);var i={},s=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:this);function a(t){return Number.isInteger(t)&&t>=0}function o(t){this.name="ArgumentError",this.message=t}!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,a="ArrayBuffer"in t;if(a)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function y(t){var e=new FileReader,n=m(e);return e.readAsArrayBuffer(t),n}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=p(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,n,r=d(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=m(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=c(t),e=l(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[c(t)]},f.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},f.prototype.set=function(t,e){this.map[c(t)]=l(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),h(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),h(t)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){var n,r,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),g.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function O(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];O.redirect=function(t,e){if(-1===k.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(T){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(t,n){return new Promise((function(r,s){var a=new w(t,n);if(a.signal&&a.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function u(){o.abort()}o.onload=function(){var t,e,n={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;r(new O(i,n))},o.onerror=function(){s(new TypeError("Network request failed"))},o.ontimeout=function(){s(new TypeError("Network request failed"))},o.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},o.open(a.method,a.url,!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&i&&(o.responseType="blob"),a.headers.forEach((function(t,e){o.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",u)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=f,t.Request=w,t.Response=O),e.Headers=f,e.Request=w,e.Response=O,e.fetch=S}({})}(s),delete s.fetch.polyfill,(i=s.fetch).default=s.fetch,i.fetch=s.fetch,i.Headers=s.Headers,i.Request=s.Request,i.Response=s.Response;const u=function(t,e){if(e=e||{},"function"!=typeof t)throw new o("fetch must be a function");if("object"!=typeof e)throw new o("defaults must be an object");if(void 0!==e.retries&&!a(e.retries))throw new o("retries must be a positive integer");if(void 0!==e.retryDelay&&!a(e.retryDelay)&&"function"!=typeof e.retryDelay)throw new o("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==e.retryOn&&!Array.isArray(e.retryOn)&&"function"!=typeof e.retryOn)throw new o("retryOn property expects an array or function");return e=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},e),function(n,r){var i=e.retries,s=e.retryDelay,u=e.retryOn;if(r&&void 0!==r.retries){if(!a(r.retries))throw new o("retries must be a positive integer");i=r.retries}if(r&&void 0!==r.retryDelay){if(!a(r.retryDelay)&&"function"!=typeof r.retryDelay)throw new o("retryDelay must be a positive integer or a function returning a positive integer");s=r.retryDelay}if(r&&r.retryOn){if(!Array.isArray(r.retryOn)&&"function"!=typeof r.retryOn)throw new o("retryOn property expects an array or function");u=r.retryOn}return new Promise((function(e,a){var o=function(s){t(n,r).then((function(t){Array.isArray(u)&&-1===u.indexOf(t.status)?e(t):"function"==typeof u?u(s,null,t)?c(s,null,t):e(t):s<i?c(s,null,t):e(t)})).catch((function(t){"function"==typeof u?u(s,t,null)?c(s,t,null):a(t):s<i?c(s,t,null):a(t)}))};function c(t,e,n){var r="function"==typeof s?s(t,e,n):s;setTimeout((function(){o(++t)}),r)}o(0)}))}}(i=i,{retryOn:[503],retries:3,retryDelay:function(t,e,n){return Math.pow(7,t+1)}});function c(t){let e="";if(t&&Object.keys(t).length>0){const n=encodeURIComponent;e="?"+Object.entries(t).filter(t=>t[0]&&t[1]).map(t=>n(t[0])+"="+n(t[1])).join("&")}return e}var l={};function h(){this.jobs=Array.prototype.slice.call(arguments),this.running=!1}h.prototype={add:function(t){return t&&(arguments.length>1?this.jobs=this.jobs.concat(Array.prototype.slice.call(arguments)):this.jobs.push(t)),this},run:function(t){return this.add(t),this.running||this.start(),this},start:function(){this.running=!0,this.next(!1)},success:function(){this.next(!1)},fail:function(t){t=t||"Job failed",this.next(t)},next:function(t){if(this.jobs.length){var e=this.jobs.shift();try{e(t,this)}catch(n){this.next(n)}}else this.running=!1}},l=h;var f=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},d={},m=Object.prototype.hasOwnProperty;function y(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}d.stringify=function(t,e){e=e||"";var n,r,i=[];for(r in"string"!=typeof e&&(e="?"),t)if(m.call(t,r)){if((n=t[r])||null!=n&&!isNaN(n)||(n=""),r=encodeURIComponent(r),n=encodeURIComponent(n),null===r||null===n)continue;i.push(r+"="+n)}return i.length?e+i.join("&"):""},d.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);){var i=y(e[1]),s=y(e[2]);null===i||null===s||i in r||(r[i]=s)}return r};var p={};(function(t){"use strict";var e=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,r=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function i(t){return(t||"").toString().replace(r,"")}var s=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],a={hash:1,query:1};function o(n){var r,i=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},s={},o=typeof(n=n||i);if("blob:"===n.protocol)s=new c(unescape(n.pathname),{});else if("string"===o)for(r in s=new c(n,{}),a)delete s[r];else if("object"===o){for(r in n)r in a||(s[r]=n[r]);void 0===s.slashes&&(s.slashes=e.test(n.href))}return s}function u(t){t=i(t);var e=n.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function c(t,e,n){if(t=i(t),!(this instanceof c))return new c(t,e,n);var r,a,l,h,m,y,p=s.slice(),v=typeof e,g=this,w=0;for("object"!==v&&"string"!==v&&(n=e,e=null),n&&"function"!=typeof n&&(n=d.parse),e=o(e),r=!(a=u(t||"")).protocol&&!a.slashes,g.slashes=a.slashes||r&&e.slashes,g.protocol=a.protocol||e.protocol||"",t=a.rest,a.slashes||(p[3]=[/(.*)/,"pathname"]);w<p.length;w++)"function"!=typeof(h=p[w])?(l=h[0],y=h[1],l!=l?g[y]=t:"string"==typeof l?~(m=t.indexOf(l))&&("number"==typeof h[2]?(g[y]=t.slice(0,m),t=t.slice(m+h[2])):(g[y]=t.slice(m),t=t.slice(0,m))):(m=l.exec(t))&&(g[y]=m[1],t=t.slice(0,m.index)),g[y]=g[y]||r&&h[3]&&e[y]||"",h[4]&&(g[y]=g[y].toLowerCase())):t=h(t);n&&(g.query=n(g.query)),r&&e.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==e.pathname)&&(g.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,i=n[r-1],s=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(s=!0),n.splice(r,1),a--);return s&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(g.pathname,e.pathname)),f(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(h=g.auth.split(":"),g.username=h[0]||"",g.password=h[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}c.prototype={set:function(t,e,n){var r=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||d.parse)(e)),r[t]=e;break;case"port":r[t]=e,f(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,/:\d+$/.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(e){var i="pathname"===t?"/":"#";r[t]=e.charAt(0)!==i?i+e:e}else r[t]=e;break;default:r[t]=e}for(var a=0;a<s.length;a++){var o=s[a];o[4]&&(r[o[1]]=r[o[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=d.stringify);var e,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(i+=n.hash),i}},c.extractProtocol=u,c.location=o,c.trimLeft=i,c.qs=d,p=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var v={};function g(t){return"string"==typeof t&&(t=p(t)),t.protocol&&t.hostname?(t.protocol+"//"+t.host).toLowerCase():"null"}g.same=function(t,e){return g(t)===g(e)},v=g;var w={};(function(t,e){var n=require("url").parse,r=require("events"),i=require("https"),s=require("http"),a=require("util"),o=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername","checkServerIdentity"],u=[239,187,191];function c(r,a){var f=c.CONNECTING;Object.defineProperty(this,"readyState",{get:function(){return f}}),Object.defineProperty(this,"url",{get:function(){return r}});var d,m=this;function y(t){f!==c.CLOSED&&(f=c.CONNECTING,S("error",new l("error",{message:t})),O&&(r=O,O=null),setTimeout((function(){f===c.CONNECTING&&k()}),m.reconnectInterval))}m.reconnectInterval=1e3;var p="";a&&a.headers&&a.headers["Last-Event-ID"]&&(p=a.headers["Last-Event-ID"],delete a.headers["Last-Event-ID"]);var g=!1,w="",b="",O=null;function k(){var h=n(r),v="https:"===h.protocol;if(h.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},p&&(h.headers["Last-Event-ID"]=p),a&&a.headers)for(var w in a.headers){var b=a.headers[w];b&&(h.headers[w]=b)}if(h.rejectUnauthorized=!(a&&!a.rejectUnauthorized),a&&a.proxy){var E=n(a.proxy);v="https:"===E.protocol,h.protocol=v?"https:":"http:",h.path=r,h.headers.Host=h.host,h.hostname=E.hostname,h.host=E.host,h.port=E.port}if(a&&a.https)for(var x in a.https)if(-1!==o.indexOf(x)){var N=a.https[x];void 0!==N&&(h[x]=N)}a&&void 0!==a.withCredentials&&(h.withCredentials=a.withCredentials),(d=(v?i:s).request(h,(function(n){if(500===n.statusCode||502===n.statusCode||503===n.statusCode||504===n.statusCode)return S("error",new l("error",{status:n.statusCode,message:n.statusMessage})),void y();if(301===n.statusCode||307===n.statusCode)return n.headers.location?(307===n.statusCode&&(O=r),r=n.headers.location,void t.nextTick(k)):void S("error",new l("error",{status:n.statusCode,message:n.statusMessage}));if(200!==n.statusCode)return S("error",new l("error",{status:n.statusCode,message:n.statusMessage})),m.close();f=c.OPEN,n.on("close",(function(){n.removeAllListeners("close"),n.removeAllListeners("end"),y()})),n.on("end",(function(){n.removeAllListeners("close"),n.removeAllListeners("end"),y()})),S("open",new l("open"));var i,s=!0;n.on("data",(function(t){i=i?e.concat([i,t]):t,s&&function(t){return u.every((function(e,n){return t[n]===e}))}(i)&&(i=i.slice(u.length)),s=!1;for(var n=0,r=i.length;n<r;){g&&(10===i[n]&&++n,g=!1);for(var a,o=-1,c=-1,l=n;o<0&&l<r;++l)58===(a=i[l])?c<0&&(c=l-n):13===a?(g=!0,o=l-n):10===a&&(o=l-n);if(o<0)break;T(i,n,c,o),n+=o+1}n===r?i=void 0:n>0&&(i=i.slice(n))}))}))).on("error",(function(t){y(t.message)})),d.setNoDelay&&d.setNoDelay(!0),d.end()}function S(){m.listeners(arguments[0]).length>0&&m.emit.apply(m,arguments)}function T(t,e,n,i){if(0===i){if(w.length>0){var s=b||"message";S(s,new h(s,{data:w.slice(0,-1),lastEventId:p,origin:v(r)})),w=""}b=void 0}else if(n>0){var a,o=n<0,u=t.slice(e,e+(o?i:n)).toString();e+=a=o?i:32!==t[e+n+1]?n+1:n+2;var c=i-a,l=t.slice(e,e+c).toString();if("data"===u)w+=l+"\n";else if("event"===u)b=l;else if("id"===u)p=l;else if("retry"===u){var f=parseInt(l,10);Number.isNaN(f)||(m.reconnectInterval=f)}}}k(),this._close=function(){f!==c.CLOSED&&(f=c.CLOSED,d.abort&&d.abort(),d.xhr&&d.xhr.abort&&d.xhr.abort())}}function l(t,e){if(Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0}),e)for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}function h(t,e){for(var n in Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0}),e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}w=c,a.inherits(c,r.EventEmitter),c.prototype.constructor=c,["open","error","message"].forEach((function(t){Object.defineProperty(c.prototype,"on"+t,{get:function(){var e=this.listeners(t)[0];return e?e._listener?e._listener:e:void 0},set:function(e){this.removeAllListeners(t),this.addEventListener(t,e)}})})),Object.defineProperty(c,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(c,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(c,"CLOSED",{enumerable:!0,value:2}),c.prototype.CONNECTING=0,c.prototype.OPEN=1,c.prototype.CLOSED=2,c.prototype.close=function(){this._close()},c.prototype.addEventListener=function(t,e){"function"==typeof e&&(e._listener=e,this.on(t,e))},c.prototype.dispatchEvent=function(t){if(!t.type)throw new Error("UNSPECIFIED_EVENT_TYPE_ERR");this.emit(t.type,t.detail)},c.prototype.removeEventListener=function(t,e){"function"==typeof e&&(e._listener=void 0,this.removeListener(t,e))}}).call(this,require("_process"),require("buffer").Buffer);var b={};function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return e&&O(t.prototype,e),n&&O(t,n),t}function S(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e,n){return(x=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&E(i,n.prototype),i}).apply(null,arguments)}function N(t){var e="function"==typeof Map?new Map:void 0;return(N=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return x(t,arguments,T(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),E(r,t)})(t)}Object.defineProperty(b,"__esModule",{value:!0});var D=function(t){function e(){return t.apply(this,arguments)||this}return S(e,t),e}(N(Error)),A=function(t){function e(e){return t.call(this,"Invalid DateTime: "+e.toMessage())||this}return S(e,t),e}(D),M=function(t){function e(e){return t.call(this,"Invalid Interval: "+e.toMessage())||this}return S(e,t),e}(D),I=function(t){function e(e){return t.call(this,"Invalid Duration: "+e.toMessage())||this}return S(e,t),e}(D),j=function(t){function e(){return t.apply(this,arguments)||this}return S(e,t),e}(D),C=function(t){function e(e){return t.call(this,"Invalid unit "+e)||this}return S(e,t),e}(D),_=function(t){function e(){return t.apply(this,arguments)||this}return S(e,t),e}(D),L=function(t){function e(){return t.call(this,"Zone is an abstract class")||this}return S(e,t),e}(D),$="numeric",V="short",F="long",q={year:$,month:$,day:$},P={year:$,month:V,day:$},z={year:$,month:F,day:$},R={year:$,month:F,day:$,weekday:F},Z={hour:$,minute:$},U={hour:$,minute:$,second:$},H={hour:$,minute:$,second:$,timeZoneName:V},B={hour:$,minute:$,second:$,timeZoneName:F},J={hour:$,minute:$,hour12:!1},W={hour:$,minute:$,second:$,hour12:!1},G={hour:$,minute:$,second:$,hour12:!1,timeZoneName:V},Y={hour:$,minute:$,second:$,hour12:!1,timeZoneName:F},Q={year:$,month:$,day:$,hour:$,minute:$},X={year:$,month:$,day:$,hour:$,minute:$,second:$},K={year:$,month:V,day:$,hour:$,minute:$},tt={year:$,month:V,day:$,hour:$,minute:$,second:$},et={year:$,month:V,day:$,weekday:V,hour:$,minute:$},nt={year:$,month:F,day:$,hour:$,minute:$,timeZoneName:V},rt={year:$,month:F,day:$,hour:$,minute:$,second:$,timeZoneName:V},it={year:$,month:F,day:$,weekday:F,hour:$,minute:$,timeZoneName:F},st={year:$,month:F,day:$,weekday:F,hour:$,minute:$,second:$,timeZoneName:F};function at(t){return void 0===t}function ot(t){return"number"==typeof t}function ut(t){return"number"==typeof t&&t%1==0}function ct(){try{return"undefined"!=typeof Intl&&Intl.DateTimeFormat}catch(t){return!1}}function lt(){return!at(Intl.DateTimeFormat.prototype.formatToParts)}function ht(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(t){return!1}}function ft(t,e,n){if(0!==t.length)return t.reduce((function(t,r){var i=[e(r),r];return t&&n(t[0],i[0])===t[0]?t:i}),null)[1]}function dt(t,e){return e.reduce((function(e,n){return e[n]=t[n],e}),{})}function mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yt(t,e,n){return ut(t)&&t>=e&&t<=n}function pt(t,e){return void 0===e&&(e=2),t.toString().length<e?("0".repeat(e)+t).slice(-e):t.toString()}function vt(t){return at(t)||null===t||""===t?void 0:parseInt(t,10)}function gt(t){if(!at(t)&&null!==t&&""!==t){var e=1e3*parseFloat("0."+t);return Math.floor(e)}}function wt(t,e,n){void 0===n&&(n=!1);var r=Math.pow(10,e);return(n?Math.trunc:Math.round)(t*r)/r}function bt(t){return t%4==0&&(t%100!=0||t%400==0)}function Ot(t){return bt(t)?366:365}function kt(t,e){var n,r=(n=e-1)-12*Math.floor(n/12)+1;return 2===r?bt(t+(e-r)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function St(t){var e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e)).setUTCFullYear(e.getUTCFullYear()-1900),+e}function Tt(t){var e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===e||3===r?53:52}function Et(t){return t>99?t:t>60?1900+t:2e3+t}function xt(t,e,n,r){void 0===r&&(r=null);var i=new Date(t),s={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);var a=Object.assign({timeZoneName:e},s),o=ct();if(o&&lt()){var u=new Intl.DateTimeFormat(n,a).formatToParts(i).find((function(t){return"timezonename"===t.type.toLowerCase()}));return u?u.value:null}if(o){var c=new Intl.DateTimeFormat(n,s).format(i);return new Intl.DateTimeFormat(n,a).format(i).substring(c.length).replace(/^[, \u200e]+/,"")}return null}function Nt(t,e){var n=parseInt(t,10);Number.isNaN(n)&&(n=0);var r=parseInt(e,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function Dt(t){var e=Number(t);if("boolean"==typeof t||""===t||Number.isNaN(e))throw new _("Invalid unit value "+t);return e}function At(t,e,n){var r={};for(var i in t)if(mt(t,i)){if(n.indexOf(i)>=0)continue;var s=t[i];if(null==s)continue;r[e(i)]=Dt(s)}return r}function Mt(t,e){var n=Math.trunc(t/60),r=Math.abs(t%60),i=n>=0&&!Object.is(n,-0)?"+":"-",s=""+i+Math.abs(n);switch(e){case"short":return""+i+pt(Math.abs(n),2)+":"+pt(r,2);case"narrow":return r>0?s+":"+r:s;case"techie":return""+i+pt(Math.abs(n),2)+pt(r,2);default:throw new RangeError("Value format "+e+" is out of range for property format")}}function It(t){return dt(t,["hour","minute","second","millisecond"])}var jt=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/;function Ct(t){return JSON.stringify(t,Object.keys(t).sort())}var _t=["January","February","March","April","May","June","July","August","September","October","November","December"],Lt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$t=["J","F","M","A","M","J","J","A","S","O","N","D"];function Vt(t){switch(t){case"narrow":return $t;case"short":return Lt;case"long":return _t;case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Ft=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],qt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Pt=["M","T","W","T","F","S","S"];function zt(t){switch(t){case"narrow":return Pt;case"short":return qt;case"long":return Ft;case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Rt=["AM","PM"],Zt=["Before Christ","Anno Domini"],Ut=["BC","AD"],Ht=["B","A"];function Bt(t){switch(t){case"narrow":return Ht;case"short":return Ut;case"long":return Zt;default:return null}}function Jt(t,e){var n="",r=t,i=Array.isArray(r),s=0;for(r=i?r:r[Symbol.iterator]();;){var a;if(i){if(s>=r.length)break;a=r[s++]}else{if((s=r.next()).done)break;a=s.value}var o=a;o.literal?n+=o.val:n+=e(o.val)}return n}var Wt={D:q,DD:P,DDD:z,DDDD:R,t:Z,tt:U,ttt:H,tttt:B,T:J,TT:W,TTT:G,TTTT:Y,f:Q,ff:K,fff:nt,ffff:it,F:X,FF:tt,FFF:rt,FFFF:st},Gt=function(){function t(t,e){this.opts=e,this.loc=t,this.systemLoc=null}t.create=function(e,n){return void 0===n&&(n={}),new t(e,n)},t.parseFormat=function(t){for(var e=null,n="",r=!1,i=[],s=0;s<t.length;s++){var a=t.charAt(s);"'"===a?(n.length>0&&i.push({literal:r,val:n}),e=null,n="",r=!r):r||a===e?n+=a:(n.length>0&&i.push({literal:!1,val:n}),n=a,e=a)}return n.length>0&&i.push({literal:r,val:n}),i},t.macroTokenToFormatOpts=function(t){return Wt[t]};var e=t.prototype;return e.formatWithSystemDefault=function(t,e){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,Object.assign({},this.opts,e)).format()},e.formatDateTime=function(t,e){return void 0===e&&(e={}),this.loc.dtFormatter(t,Object.assign({},this.opts,e)).format()},e.formatDateTimeParts=function(t,e){return void 0===e&&(e={}),this.loc.dtFormatter(t,Object.assign({},this.opts,e)).formatToParts()},e.resolvedOptions=function(t,e){return void 0===e&&(e={}),this.loc.dtFormatter(t,Object.assign({},this.opts,e)).resolvedOptions()},e.num=function(t,e){if(void 0===e&&(e=0),this.opts.forceSimple)return pt(t,e);var n=Object.assign({},this.opts);return e>0&&(n.padTo=e),this.loc.numberFormatter(n).format(t)},e.formatDateTimeFromString=function(e,n){var r=this,i="en"===this.loc.listingMode(),s=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar&&lt(),a=function(t,n){return r.loc.extract(e,t,n)},o=function(t){return e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):""},u=function(t,n){return i?function(t,e){return Vt(e)[t.month-1]}(e,t):a(n?{month:t}:{month:t,day:"numeric"},"month")},c=function(t,n){return i?function(t,e){return zt(e)[t.weekday-1]}(e,t):a(n?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday")},l=function(t){return i?function(t,e){return Bt(e)[t.year<0?0:1]}(e,t):a({era:t},"era")};return Jt(t.parseFormat(n),(function(n){switch(n){case"S":return r.num(e.millisecond);case"u":case"SSS":return r.num(e.millisecond,3);case"s":return r.num(e.second);case"ss":return r.num(e.second,2);case"m":return r.num(e.minute);case"mm":return r.num(e.minute,2);case"h":return r.num(e.hour%12==0?12:e.hour%12);case"hh":return r.num(e.hour%12==0?12:e.hour%12,2);case"H":return r.num(e.hour);case"HH":return r.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:r.opts.allowZ});case"ZZ":return o({format:"short",allowZ:r.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:!1});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:r.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:r.loc.locale});case"z":return e.zoneName;case"a":return i?function(t){return Rt[t.hour<12?0:1]}(e):a({hour:"numeric",hour12:!0},"dayperiod");case"d":return s?a({day:"numeric"},"day"):r.num(e.day);case"dd":return s?a({day:"2-digit"},"day"):r.num(e.day,2);case"c":return r.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return r.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?a({month:"numeric",day:"numeric"},"month"):r.num(e.month);case"LL":return s?a({month:"2-digit",day:"numeric"},"month"):r.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return s?a({month:"numeric"},"month"):r.num(e.month);case"MM":return s?a({month:"2-digit"},"month"):r.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return s?a({year:"numeric"},"year"):r.num(e.year);case"yy":return s?a({year:"2-digit"},"year"):r.num(e.year.toString().slice(-2),2);case"yyyy":return s?a({year:"numeric"},"year"):r.num(e.year,4);case"yyyyyy":return s?a({year:"numeric"},"year"):r.num(e.year,6);case"G":return l("short");case"GG":return l("long");case"GGGGG":return l("narrow");case"kk":return r.num(e.weekYear.toString().slice(-2),2);case"kkkk":return r.num(e.weekYear,4);case"W":return r.num(e.weekNumber);case"WW":return r.num(e.weekNumber,2);case"o":return r.num(e.ordinal);case"ooo":return r.num(e.ordinal,3);case"q":return r.num(e.quarter);case"qq":return r.num(e.quarter,2);case"X":return r.num(Math.floor(e.ts/1e3));case"x":return r.num(e.ts);default:return function(n){var i=t.macroTokenToFormatOpts(n);return i?r.formatWithSystemDefault(e,i):n}(n)}}))},e.formatDurationFromString=function(e,n){var r,i=this,s=function(t){switch(t[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},a=t.parseFormat(n),o=a.reduce((function(t,e){var n=e.literal,r=e.val;return n?t:t.concat(r)}),[]),u=e.shiftTo.apply(e,o.map(s).filter((function(t){return t})));return Jt(a,(r=u,function(t){var e=s(t);return e?i.num(r.get(e),t.length):t}))},t}(),Yt=function(){function t(t,e){this.reason=t,this.explanation=e}return t.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},t}(),Qt=function(){function t(){}var e=t.prototype;return e.offsetName=function(t,e){throw new L},e.formatOffset=function(t,e){throw new L},e.offset=function(t){throw new L},e.equals=function(t){throw new L},k(t,[{key:"type",get:function(){throw new L}},{key:"name",get:function(){throw new L}},{key:"universal",get:function(){throw new L}},{key:"isValid",get:function(){throw new L}}]),t}(),Xt=null,Kt=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var n=e.prototype;return n.offsetName=function(t,e){return xt(t,e.format,e.locale)},n.formatOffset=function(t,e){return Mt(this.offset(t),e)},n.offset=function(t){return-new Date(t).getTimezoneOffset()},n.equals=function(t){return"local"===t.type},k(e,[{key:"type",get:function(){return"local"}},{key:"name",get:function(){return ct()?(new Intl.DateTimeFormat).resolvedOptions().timeZone:"local"}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===Xt&&(Xt=new e),Xt}}]),e}(Qt),te=RegExp("^"+jt.source+"$"),ee={},ne={year:0,month:1,day:2,hour:3,minute:4,second:5},re={},ie=function(t){function e(n){var r;return(r=t.call(this)||this).zoneName=n,r.valid=e.isValidZone(n),r}S(e,t),e.create=function(t){return re[t]||(re[t]=new e(t)),re[t]},e.resetCache=function(){re={},ee={}},e.isValidSpecifier=function(t){return!(!t||!t.match(te))},e.isValidZone=function(t){try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(e){return!1}},e.parseGMTOffset=function(t){if(t){var e=t.match(/^Etc\/GMT([+-]\d{1,2})$/i);if(e)return-60*parseInt(e[1])}return null};var n=e.prototype;return n.offsetName=function(t,e){return xt(t,e.format,e.locale,this.name)},n.formatOffset=function(t,e){return Mt(this.offset(t),e)},n.offset=function(t){var e,n=new Date(t),r=(e=this.name,ee[e]||(ee[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),ee[e]),i=r.formatToParts?function(t,e){for(var n=t.formatToParts(e),r=[],i=0;i<n.length;i++){var s=n[i],a=s.type,o=s.value,u=ne[a];at(u)||(r[u]=parseInt(o,10))}return r}(r,n):function(t,e){var n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n),i=r[1],s=r[2];return[r[3],i,s,r[4],r[5],r[6]]}(r,n),s=i[0],a=i[1],o=i[2],u=i[3],c=St({year:s,month:a,day:o,hour:24===u?0:u,minute:i[4],second:i[5],millisecond:0}),l=n.valueOf();return(c-(l-=l%1e3))/6e4},n.equals=function(t){return"iana"===t.type&&t.name===this.name},k(e,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),e}(Qt),se=null,ae=function(t){function e(e){var n;return(n=t.call(this)||this).fixed=e,n}S(e,t),e.instance=function(t){return 0===t?e.utcInstance:new e(t)},e.parseSpecifier=function(t){if(t){var n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new e(Nt(n[1],n[2]))}return null},k(e,null,[{key:"utcInstance",get:function(){return null===se&&(se=new e(0)),se}}]);var n=e.prototype;return n.offsetName=function(){return this.name},n.formatOffset=function(t,e){return Mt(this.fixed,e)},n.offset=function(){return this.fixed},n.equals=function(t){return"fixed"===t.type&&t.fixed===this.fixed},k(e,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+Mt(this.fixed,"narrow")}},{key:"universal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}]),e}(Qt),oe=function(t){function e(e){var n;return(n=t.call(this)||this).zoneName=e,n}S(e,t);var n=e.prototype;return n.offsetName=function(){return null},n.formatOffset=function(){return""},n.offset=function(){return NaN},n.equals=function(){return!1},k(e,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),e}(Qt);function ue(t,e){var n;if(at(t)||null===t)return e;if(t instanceof Qt)return t;if("string"==typeof t){var r=t.toLowerCase();return"local"===r?e:"utc"===r||"gmt"===r?ae.utcInstance:null!=(n=ie.parseGMTOffset(t))?ae.instance(n):ie.isValidSpecifier(r)?ie.create(t):ae.parseSpecifier(r)||new oe(t)}return ot(t)?ae.instance(t):"object"==typeof t&&t.offset&&"number"==typeof t.offset?t:new oe(t)}var ce=function(){return Date.now()},le=null,he=null,fe=null,de=null,me=!1,ye=function(){function t(){}return t.resetCaches=function(){Ee.resetCache(),ie.resetCache()},k(t,null,[{key:"now",get:function(){return ce},set:function(t){ce=t}},{key:"defaultZoneName",get:function(){return t.defaultZone.name},set:function(t){le=t?ue(t):null}},{key:"defaultZone",get:function(){return le||Kt.instance}},{key:"defaultLocale",get:function(){return he},set:function(t){he=t}},{key:"defaultNumberingSystem",get:function(){return fe},set:function(t){fe=t}},{key:"defaultOutputCalendar",get:function(){return de},set:function(t){de=t}},{key:"throwOnInvalid",get:function(){return me},set:function(t){me=t}}]),t}(),pe={};function ve(t,e){void 0===e&&(e={});var n=JSON.stringify([t,e]),r=pe[n];return r||(r=new Intl.DateTimeFormat(t,e),pe[n]=r),r}var ge={},we={},be=null;function Oe(t,e,n,r,i){var s=t.listingMode(n);return"error"===s?null:"en"===s?r(e):i(e)}var ke=function(){function t(t,e,n){if(this.padTo=n.padTo||0,this.floor=n.floor||!1,!e&&ct()){var r={useGrouping:!1};n.padTo>0&&(r.minimumIntegerDigits=n.padTo),this.inf=function(t,e){void 0===e&&(e={});var n=JSON.stringify([t,e]),r=ge[n];return r||(r=new Intl.NumberFormat(t,e),ge[n]=r),r}(t,r)}}return t.prototype.format=function(t){if(this.inf){var e=this.floor?Math.floor(t):t;return this.inf.format(e)}return pt(this.floor?Math.floor(t):wt(t,3),this.padTo)},t}(),Se=function(){function t(t,e,n){var r;if(this.opts=n,this.hasIntl=ct(),t.zone.universal&&this.hasIntl?(r="UTC",n.timeZoneName?this.dt=t:this.dt=0===t.offset?t:gr.fromMillis(t.ts+60*t.offset*1e3)):"local"===t.zone.type?this.dt=t:(this.dt=t,r=t.zone.name),this.hasIntl){var i=Object.assign({},this.opts);r&&(i.timeZone=r),this.dtf=ve(e,i)}}var e=t.prototype;return e.format=function(){if(this.hasIntl)return this.dtf.format(this.dt.toJSDate());var t=function(t){switch(Ct(dt(t,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hour12"]))){case Ct(q):return"M/d/yyyy";case Ct(P):return"LLL d, yyyy";case Ct(z):return"LLLL d, yyyy";case Ct(R):return"EEEE, LLLL d, yyyy";case Ct(Z):return"h:mm a";case Ct(U):return"h:mm:ss a";case Ct(H):case Ct(B):return"h:mm a";case Ct(J):return"HH:mm";case Ct(W):return"HH:mm:ss";case Ct(G):case Ct(Y):return"HH:mm";case Ct(Q):return"M/d/yyyy, h:mm a";case Ct(K):return"LLL d, yyyy, h:mm a";case Ct(nt):return"LLLL d, yyyy, h:mm a";case Ct(it):return"EEEE, LLLL d, yyyy, h:mm a";case Ct(X):return"M/d/yyyy, h:mm:ss a";case Ct(tt):return"LLL d, yyyy, h:mm:ss a";case Ct(et):return"EEE, d LLL yyyy, h:mm a";case Ct(rt):return"LLLL d, yyyy, h:mm:ss a";case Ct(st):return"EEEE, LLLL d, yyyy, h:mm:ss a";default:return"EEEE, LLLL d, yyyy, h:mm a"}}(this.opts),e=Ee.create("en-US");return Gt.create(e).formatDateTimeFromString(this.dt,t)},e.formatToParts=function(){return this.hasIntl&&lt()?this.dtf.formatToParts(this.dt.toJSDate()):[]},e.resolvedOptions=function(){return this.hasIntl?this.dtf.resolvedOptions():{locale:"en-US",numberingSystem:"latn",outputCalendar:"gregory"}},t}(),Te=function(){function t(t,e,n){this.opts=Object.assign({style:"long"},n),!e&&ht()&&(this.rtf=function(t,e){void 0===e&&(e={});var n=JSON.stringify([t,e]),r=we[n];return r||(r=new Intl.RelativeTimeFormat(t,e),we[n]=r),r}(t,n))}var e=t.prototype;return e.format=function(t,e){return this.rtf?this.rtf.format(t,e):function(t,e,n,r){void 0===n&&(n="always"),void 0===r&&(r=!1);var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(t);if("auto"===n&&s){var a="days"===t;switch(e){case 1:return a?"tomorrow":"next "+i[t][0];case-1:return a?"yesterday":"last "+i[t][0];case 0:return a?"today":"this "+i[t][0]}}var o=Object.is(e,-0)||e<0,u=Math.abs(e),c=1===u,l=i[t],h=r?c?l[1]:l[2]||l[1]:c?i[t][0]:t;return o?u+" "+h+" ago":"in "+u+" "+h}(e,t,this.opts.numeric,"long"!==this.opts.style)},e.formatToParts=function(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]},t}(),Ee=function(){function t(t,e,n,r){var i=function(t){var e=t.indexOf("-u-");if(-1===e)return[t];var n,r=t.substring(0,e);try{n=ve(t).resolvedOptions()}catch(s){n=ve(r).resolvedOptions()}var i=n;return[r,i.numberingSystem,i.calendar]}(t),s=i[0],a=i[1],o=i[2];this.locale=s,this.numberingSystem=e||a||null,this.outputCalendar=n||o||null,this.intl=function(t,e,n){return ct()?n||e?(t+="-u",n&&(t+="-ca-"+n),e&&(t+="-nu-"+e),t):t:[]}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}t.fromOpts=function(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)},t.create=function(e,n,r,i){void 0===i&&(i=!1);var s=e||ye.defaultLocale;return new t(s||(i?"en-US":function(){if(be)return be;if(ct()){var t=(new Intl.DateTimeFormat).resolvedOptions().locale;return be=t&&"und"!==t?t:"en-US"}return be="en-US"}()),n||ye.defaultNumberingSystem,r||ye.defaultOutputCalendar,s)},t.resetCache=function(){be=null,pe={},ge={},we={}},t.fromObject=function(e){var n=void 0===e?{}:e,r=n.locale,i=n.numberingSystem,s=n.outputCalendar;return t.create(r,i,s)};var e=t.prototype;return e.listingMode=function(t){void 0===t&&(t=!0);var e=ct()&&lt(),n=this.isEnglish(),r=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e||n&&r||t?!e||n&&r?"en":"intl":"error"},e.clone=function(e){return e&&0!==Object.getOwnPropertyNames(e).length?t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1):this},e.redefaultToEN=function(t){return void 0===t&&(t={}),this.clone(Object.assign({},t,{defaultToEN:!0}))},e.redefaultToSystem=function(t){return void 0===t&&(t={}),this.clone(Object.assign({},t,{defaultToEN:!1}))},e.months=function(t,e,n){var r=this;return void 0===e&&(e=!1),void 0===n&&(n=!0),Oe(this,t,n,Vt,(function(){var n=e?{month:t,day:"numeric"}:{month:t},i=e?"format":"standalone";return r.monthsCache[i][t]||(r.monthsCache[i][t]=function(t){for(var e=[],n=1;n<=12;n++){var r=gr.utc(2016,n,1);e.push(t(r))}return e}((function(t){return r.extract(t,n,"month")}))),r.monthsCache[i][t]}))},e.weekdays=function(t,e,n){var r=this;return void 0===e&&(e=!1),void 0===n&&(n=!0),Oe(this,t,n,zt,(function(){var n=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=e?"format":"standalone";return r.weekdaysCache[i][t]||(r.weekdaysCache[i][t]=function(t){for(var e=[],n=1;n<=7;n++){var r=gr.utc(2016,11,13+n);e.push(t(r))}return e}((function(t){return r.extract(t,n,"weekday")}))),r.weekdaysCache[i][t]}))},e.meridiems=function(t){var e=this;return void 0===t&&(t=!0),Oe(this,void 0,t,(function(){return Rt}),(function(){if(!e.meridiemCache){var t={hour:"numeric",hour12:!0};e.meridiemCache=[gr.utc(2016,11,13,9),gr.utc(2016,11,13,19)].map((function(n){return e.extract(n,t,"dayperiod")}))}return e.meridiemCache}))},e.eras=function(t,e){var n=this;return void 0===e&&(e=!0),Oe(this,t,e,Bt,(function(){var e={era:t};return n.eraCache[t]||(n.eraCache[t]=[gr.utc(-40,1,1),gr.utc(2017,1,1)].map((function(t){return n.extract(t,e,"era")}))),n.eraCache[t]}))},e.extract=function(t,e,n){var r=this.dtFormatter(t,e).formatToParts().find((function(t){return t.type.toLowerCase()===n}));return r?r.value:null},e.numberFormatter=function(t){return void 0===t&&(t={}),new ke(this.intl,t.forceSimple||this.fastNumbers,t)},e.dtFormatter=function(t,e){return void 0===e&&(e={}),new Se(t,this.intl,e)},e.relFormatter=function(t){return void 0===t&&(t={}),new Te(this.intl,this.isEnglish(),t)},e.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||ct()&&new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},e.equals=function(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar},k(t,[{key:"fastNumbers",get:function(){return null==this.fastNumbersCached&&(this.fastNumbersCached=(!this.numberingSystem||"latn"===this.numberingSystem)&&("latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||ct()&&"latn"===new Intl.DateTimeFormat(this.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}}]),t}();function xe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t+e.source}),"");return RegExp("^"+r+"$")}function Ne(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(e,n){var r=e[0],i=e[1],s=e[2],a=n(t,s),o=a[0],u=a[1],c=a[2];return[Object.assign(r,o),i||u,c]}),[{},null,1]).slice(0,2)}}function De(t){if(null==t)return[null,null];for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var a=s[i],o=a[0],u=a[1],c=o.exec(t);if(c)return u(c)}return[null,null]}function Ae(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n){var r,i={};for(r=0;r<e.length;r++)i[e[r]]=vt(t[n+r]);return[i,null,n+r]}}var Me=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ie=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,9}))?)?)?/,je=RegExp(""+Ie.source+Me.source+"?"),Ce=RegExp("(?:T"+je.source+")?"),_e=Ae("weekYear","weekNumber","weekDay"),Le=Ae("year","ordinal"),$e=RegExp(Ie.source+" ?(?:"+Me.source+"|("+jt.source+"))?"),Ve=RegExp("(?: "+$e.source+")?");function Fe(t,e,n){var r=t[e];return at(r)?n:vt(r)}function qe(t,e){return[{year:Fe(t,e),month:Fe(t,e+1,1),day:Fe(t,e+2,1)},null,e+3]}function Pe(t,e){return[{hour:Fe(t,e,0),minute:Fe(t,e+1,0),second:Fe(t,e+2,0),millisecond:gt(t[e+3])},null,e+4]}function ze(t,e){var n=!t[e]&&!t[e+1],r=Nt(t[e+1],t[e+2]);return[{},n?null:ae.instance(r),e+3]}function Re(t,e){return[{},t[e]?ie.create(t[e]):null,e+1]}var Ze=/^P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})(?:[.,](-?\d{1,9}))?S)?)?)$/;function Ue(t){var e=t[1],n=t[2],r=t[3],i=t[4],s=t[5],a=t[6],o=t[7],u=t[8];return[{years:vt(e),months:vt(n),weeks:vt(r),days:vt(i),hours:vt(s),minutes:vt(a),seconds:vt(o),milliseconds:gt(u)}]}var He={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Be(t,e,n,r,i,s,a){var o={year:2===e.length?Et(vt(e)):vt(e),month:Lt.indexOf(n)+1,day:vt(r),hour:vt(i),minute:vt(s)};return a&&(o.second=vt(a)),t&&(o.weekday=t.length>3?Ft.indexOf(t)+1:qt.indexOf(t)+1),o}var Je=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function We(t){var e,n=t[1],r=t[2],i=t[3],s=t[4],a=t[5],o=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=Be(n,s,i,r,a,o,u);return e=c?He[c]:l?0:Nt(h,f),[d,new ae(e)]}var Ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ye=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Qe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Xe(t){var e=t[1],n=t[2],r=t[3];return[Be(e,t[4],r,n,t[5],t[6],t[7]),ae.utcInstance]}function Ke(t){var e=t[1],n=t[2],r=t[3],i=t[4],s=t[5],a=t[6];return[Be(e,t[7],n,r,i,s,a),ae.utcInstance]}var tn=xe(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ce),en=xe(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ce),nn=xe(/(\d{4})-?(\d{3})/,Ce),rn=xe(je),sn=Ne(qe,Pe,ze),an=Ne(_e,Pe,ze),on=Ne(Le,Pe),un=Ne(Pe,ze),cn=xe(/(\d{4})-(\d\d)-(\d\d)/,Ve),ln=xe($e),hn=Ne(qe,Pe,ze,Re),fn=Ne(Pe,ze,Re),dn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},mn=Object.assign({years:{months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},dn),yn=Object.assign({years:{months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},dn),pn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],vn=pn.slice(0).reverse();function gn(t,e,n){void 0===n&&(n=!1);var r={values:n?e.values:Object.assign({},t.values,e.values||{}),loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy};return new On(r)}function wn(t,e,n,r,i){var s,a=t[i][n],o=e[n]/a,u=Math.sign(o)!==Math.sign(r[i])&&0!==r[i]&&Math.abs(o)<=1?(s=o)<0?Math.floor(s):Math.ceil(s):Math.trunc(o);r[i]+=u,e[n]-=u*a}function bn(t,e){vn.reduce((function(n,r){return at(e[r])?n:(n&&wn(t,e,n,e,r),r)}),null)}var On=function(){function t(t){var e="longterm"===t.conversionAccuracy||!1;this.values=t.values,this.loc=t.loc||Ee.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=e?yn:mn,this.isLuxonDuration=!0}t.fromMillis=function(e,n){return t.fromObject(Object.assign({milliseconds:e},n))},t.fromObject=function(e){if(null==e||"object"!=typeof e)throw new _("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new t({values:At(e,t.normalizeUnit,["locale","numberingSystem","conversionAccuracy","zone"]),loc:Ee.fromObject(e),conversionAccuracy:e.conversionAccuracy})},t.fromISO=function(e,n){var r=De(e,[Ze,Ue])[0];if(r){var i=Object.assign(r,n);return t.fromObject(i)}return t.invalid("unparsable",'the input "'+e+"\" can't be parsed as ISO 8601")},t.invalid=function(e,n){if(void 0===n&&(n=null),!e)throw new _("need to specify a reason the Duration is invalid");var r=e instanceof Yt?e:new Yt(e,n);if(ye.throwOnInvalid)throw new I(r);return new t({invalid:r})},t.normalizeUnit=function(t){var e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t?t.toLowerCase():t];if(!e)throw new C(t);return e},t.isDuration=function(t){return t&&t.isLuxonDuration||!1};var e=t.prototype;return e.toFormat=function(t,e){void 0===e&&(e={});var n=Object.assign({},e,{floor:!1!==e.round&&!1!==e.floor});return this.isValid?Gt.create(this.loc,n).formatDurationFromString(this,t):"Invalid Duration"},e.toObject=function(t){if(void 0===t&&(t={}),!this.isValid)return{};var e=Object.assign({},this.values);return t.includeConfig&&(e.conversionAccuracy=this.conversionAccuracy,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e},e.toISO=function(){if(!this.isValid)return null;var t="P";return 0!==this.years&&(t+=this.years+"Y"),0===this.months&&0===this.quarters||(t+=this.months+3*this.quarters+"M"),0!==this.weeks&&(t+=this.weeks+"W"),0!==this.days&&(t+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(t+="T"),0!==this.hours&&(t+=this.hours+"H"),0!==this.minutes&&(t+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(t+=wt(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===t&&(t+="T0S"),t},e.toJSON=function(){return this.toISO()},e.toString=function(){return this.toISO()},e.valueOf=function(){return this.as("milliseconds")},e.plus=function(t){if(!this.isValid)return this;for(var e=kn(t),n={},r=0,i=pn;r<i.length;r++){var s=i[r];(mt(e.values,s)||mt(this.values,s))&&(n[s]=e.get(s)+this.get(s))}return gn(this,{values:n},!0)},e.minus=function(t){if(!this.isValid)return this;var e=kn(t);return this.plus(e.negate())},e.mapUnits=function(t){if(!this.isValid)return this;for(var e={},n=0,r=Object.keys(this.values);n<r.length;n++){var i=r[n];e[i]=Dt(t(this.values[i],i))}return gn(this,{values:e},!0)},e.get=function(e){return this[t.normalizeUnit(e)]},e.set=function(e){return this.isValid?gn(this,{values:Object.assign(this.values,At(e,t.normalizeUnit,[]))}):this},e.reconfigure=function(t){var e=void 0===t?{}:t,n=e.locale,r=e.numberingSystem,i=e.conversionAccuracy,s={loc:this.loc.clone({locale:n,numberingSystem:r})};return i&&(s.conversionAccuracy=i),gn(this,s)},e.as=function(t){return this.isValid?this.shiftTo(t).get(t):NaN},e.normalize=function(){if(!this.isValid)return this;var t=this.toObject();return bn(this.matrix,t),gn(this,{values:t},!0)},e.shiftTo=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!this.isValid)return this;if(0===n.length)return this;n=n.map((function(e){return t.normalizeUnit(e)}));var i,s={},a={},o=this.toObject();bn(this.matrix,o);for(var u=0,c=pn;u<c.length;u++){var l=c[u];if(n.indexOf(l)>=0){i=l;var h=0;for(var f in a)h+=this.matrix[f][l]*a[f],a[f]=0;ot(o[l])&&(h+=o[l]);var d=Math.trunc(h);for(var m in s[l]=d,a[l]=h-d,o)pn.indexOf(m)>pn.indexOf(l)&&wn(this.matrix,o,m,s,l)}else ot(o[l])&&(a[l]=o[l])}for(var y in a)0!==a[y]&&(s[i]+=y===i?a[y]:a[y]/this.matrix[i][y]);return gn(this,{values:s},!0).normalize()},e.negate=function(){if(!this.isValid)return this;for(var t={},e=0,n=Object.keys(this.values);e<n.length;e++){var r=n[e];t[r]=-this.values[r]}return gn(this,{values:t},!0)},e.equals=function(t){if(!this.isValid||!t.isValid)return!1;if(!this.loc.equals(t.loc))return!1;for(var e=0,n=pn;e<n.length;e++){var r=n[e];if(this.values[r]!==t.values[r])return!1}return!0},k(t,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),t}();function kn(t){if(ot(t))return On.fromMillis(t);if(On.isDuration(t))return t;if("object"==typeof t)return On.fromObject(t);throw new _("Unknown duration argument "+t+" of type "+typeof t)}var Sn="Invalid Interval";function Tn(t,e){return t&&t.isValid?e&&e.isValid?e<t?En.invalid("end before start","The end of an interval must be after its start, but you had start="+t.toISO()+" and end="+e.toISO()):null:En.invalid("missing or invalid end"):En.invalid("missing or invalid start")}var En=function(){function t(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}t.invalid=function(e,n){if(void 0===n&&(n=null),!e)throw new _("need to specify a reason the Interval is invalid");var r=e instanceof Yt?e:new Yt(e,n);if(ye.throwOnInvalid)throw new M(r);return new t({invalid:r})},t.fromDateTimes=function(e,n){var r=wr(e),i=wr(n),s=Tn(r,i);return null==s?new t({start:r,end:i}):s},t.after=function(e,n){var r=kn(n),i=wr(e);return t.fromDateTimes(i,i.plus(r))},t.before=function(e,n){var r=kn(n),i=wr(e);return t.fromDateTimes(i.minus(r),i)},t.fromISO=function(e,n){var r=(e||"").split("/",2),i=r[0],s=r[1];if(i&&s){var a=gr.fromISO(i,n),o=gr.fromISO(s,n);if(a.isValid&&o.isValid)return t.fromDateTimes(a,o);if(a.isValid){var u=On.fromISO(s,n);if(u.isValid)return t.after(a,u)}else if(o.isValid){var c=On.fromISO(i,n);if(c.isValid)return t.before(o,c)}}return t.invalid("unparsable",'the input "'+e+"\" can't be parsed asISO 8601")},t.isInterval=function(t){return t&&t.isLuxonInterval||!1};var e=t.prototype;return e.length=function(t){return void 0===t&&(t="milliseconds"),this.isValid?this.toDuration.apply(this,[t]).get(t):NaN},e.count=function(t){if(void 0===t&&(t="milliseconds"),!this.isValid)return NaN;var e=this.start.startOf(t),n=this.end.startOf(t);return Math.floor(n.diff(e,t).get(t))+1},e.hasSame=function(t){return!!this.isValid&&this.e.minus(1).hasSame(this.s,t)},e.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},e.isAfter=function(t){return!!this.isValid&&this.s>t},e.isBefore=function(t){return!!this.isValid&&this.e<=t},e.contains=function(t){return!!this.isValid&&this.s<=t&&this.e>t},e.set=function(e){var n=void 0===e?{}:e,r=n.start,i=n.end;return this.isValid?t.fromDateTimes(r||this.s,i||this.e):this},e.splitAt=function(){var e=this;if(!this.isValid)return[];for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var s=r.map(wr).filter((function(t){return e.contains(t)})).sort(),a=[],o=this.s,u=0;o<this.e;){var c=s[u]||this.e,l=+c>+this.e?this.e:c;a.push(t.fromDateTimes(o,l)),o=l,u+=1}return a},e.splitBy=function(e){var n=kn(e);if(!this.isValid||!n.isValid||0===n.as("milliseconds"))return[];for(var r,i,s=this.s,a=[];s<this.e;)i=+(r=s.plus(n))>+this.e?this.e:r,a.push(t.fromDateTimes(s,i)),s=i;return a},e.divideEqually=function(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]},e.overlaps=function(t){return this.e>t.s&&this.s<t.e},e.abutsStart=function(t){return!!this.isValid&&+this.e==+t.s},e.abutsEnd=function(t){return!!this.isValid&&+t.e==+this.s},e.engulfs=function(t){return!!this.isValid&&this.s<=t.s&&this.e>=t.e},e.equals=function(t){return!(!this.isValid||!t.isValid)&&this.s.equals(t.s)&&this.e.equals(t.e)},e.intersection=function(e){if(!this.isValid)return this;var n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>r?null:t.fromDateTimes(n,r)},e.union=function(e){if(!this.isValid)return this;var n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return t.fromDateTimes(n,r)},t.merge=function(t){var e=t.sort((function(t,e){return t.s-e.s})).reduce((function(t,e){var n=t[0],r=t[1];return r?r.overlaps(e)||r.abutsStart(e)?[n,r.union(e)]:[n.concat([r]),e]:[n,e]}),[[],null]),n=e[0],r=e[1];return r&&n.push(r),n},t.xor=function(e){var n,r=null,i=0,s=[],a=e.map((function(t){return[{time:t.s,type:"s"},{time:t.e,type:"e"}]})),o=(n=Array.prototype).concat.apply(n,a).sort((function(t,e){return t.time-e.time})),u=Array.isArray(o),c=0;for(o=u?o:o[Symbol.iterator]();;){var l;if(u){if(c>=o.length)break;l=o[c++]}else{if((c=o.next()).done)break;l=c.value}var h=l;1===(i+="s"===h.type?1:-1)?r=h.time:(r&&+r!=+h.time&&s.push(t.fromDateTimes(r,h.time)),r=null)}return t.merge(s)},e.difference=function(){for(var e=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.xor([this].concat(r)).map((function(t){return e.intersection(t)})).filter((function(t){return t&&!t.isEmpty()}))},e.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":Sn},e.toISO=function(t){return this.isValid?this.s.toISO(t)+"/"+this.e.toISO(t):Sn},e.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():Sn},e.toISOTime=function(t){return this.isValid?this.s.toISOTime(t)+"/"+this.e.toISOTime(t):Sn},e.toFormat=function(t,e){var n=(void 0===e?{}:e).separator,r=void 0===n?" \u2013 ":n;return this.isValid?""+this.s.toFormat(t)+r+this.e.toFormat(t):Sn},e.toDuration=function(t,e){return this.isValid?this.e.diff(this.s,t,e):On.invalid(this.invalidReason)},e.mapEndpoints=function(e){return t.fromDateTimes(e(this.s),e(this.e))},k(t,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),t}(),xn=function(){function t(){}return t.hasDST=function(t){void 0===t&&(t=ye.defaultZone);var e=gr.local().setZone(t).set({month:12});return!t.universal&&e.offset!==e.set({month:6}).offset},t.isValidIANAZone=function(t){return ie.isValidSpecifier(t)&&ie.isValidZone(t)},t.normalizeZone=function(t){return ue(t,ye.defaultZone)},t.months=function(t,e){void 0===t&&(t="long");var n=void 0===e?{}:e,r=n.locale,i=void 0===r?null:r,s=n.numberingSystem,a=void 0===s?null:s,o=n.outputCalendar,u=void 0===o?"gregory":o;return Ee.create(i,a,u).months(t)},t.monthsFormat=function(t,e){void 0===t&&(t="long");var n=void 0===e?{}:e,r=n.locale,i=void 0===r?null:r,s=n.numberingSystem,a=void 0===s?null:s,o=n.outputCalendar,u=void 0===o?"gregory":o;return Ee.create(i,a,u).months(t,!0)},t.weekdays=function(t,e){void 0===t&&(t="long");var n=void 0===e?{}:e,r=n.locale,i=void 0===r?null:r,s=n.numberingSystem,a=void 0===s?null:s;return Ee.create(i,a,null).weekdays(t)},t.weekdaysFormat=function(t,e){void 0===t&&(t="long");var n=void 0===e?{}:e,r=n.locale,i=void 0===r?null:r,s=n.numberingSystem,a=void 0===s?null:s;return Ee.create(i,a,null).weekdays(t,!0)},t.meridiems=function(t){var e=(void 0===t?{}:t).locale,n=void 0===e?null:e;return Ee.create(n).meridiems()},t.eras=function(t,e){void 0===t&&(t="short");var n=(void 0===e?{}:e).locale,r=void 0===n?null:n;return Ee.create(r,null,"gregory").eras(t)},t.features=function(){var t=!1,e=!1,n=!1,r=!1;if(ct()){t=!0,e=lt(),r=ht();try{n="America/New_York"===new Intl.DateTimeFormat("en",{timeZone:"America/New_York"}).resolvedOptions().timeZone}catch(i){n=!1}}return{intl:t,intlTokens:e,zones:n,relative:r}},t}();function Nn(t,e){var n=function(t){return t.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=n(e)-n(t);return Math.floor(On.fromMillis(r).as("days"))}var Dn={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},An={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Mn=Dn.hanidec.replace(/[\[|\]]/g,"").split("");function In(t,e){var n=t.numberingSystem;return void 0===e&&(e=""),new RegExp(""+Dn[n||"latn"]+e)}function jn(t,e){return void 0===e&&(e=function(t){return t}),{regex:t,deser:function(t){var n=t[0];return e(function(t){var e=parseInt(t,10);if(isNaN(e)){e="";for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(-1!==t[n].search(Dn.hanidec))e+=Mn.indexOf(t[n]);else for(var i in An){var s=An[i],a=s[0],o=s[1];r>=a&&r<=o&&(e+=r-a)}}return parseInt(e,10)}return e}(n))}}}function Cn(t){return t.replace(/\./,"\\.?")}function _n(t){return t.replace(/\./,"").toLowerCase()}function Ln(t,e){return null===t?null:{regex:RegExp(t.map(Cn).join("|")),deser:function(n){var r=n[0];return t.findIndex((function(t){return _n(r)===_n(t)}))+e}}}function $n(t,e){return{regex:t,deser:function(t){return Nt(t[1],t[2])},groups:e}}function Vn(t){return{regex:t,deser:function(t){return t[0]}}}var Fn={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},qn=null;function Pn(t,e,n){var r=function(t,e){var n;return(n=Array.prototype).concat.apply(n,t.map((function(t){return function(t,e){if(t.literal)return t;var n=Gt.macroTokenToFormatOpts(t.val);if(!n)return t;var r=Gt.create(e,n).formatDateTimeParts((qn||(qn=gr.fromMillis(1555555555555)),qn)).map((function(t){return function(t,e,n){var r=t.type,i=t.value;if("literal"===r)return{literal:!0,val:i};var s=n[r],a=Fn[r];return"object"==typeof a&&(a=a[s]),a?{literal:!1,val:a}:void 0}(t,0,n)}));return r.includes(void 0)?t:r}(t,e)})))}(Gt.parseFormat(n),t),i=r.map((function(e){return n=e,i=In(r=t),s=In(r,"{2}"),a=In(r,"{3}"),o=In(r,"{4}"),u=In(r,"{6}"),c=In(r,"{1,2}"),l=In(r,"{1,3}"),h=In(r,"{1,6}"),f=In(r,"{1,9}"),d=In(r,"{2,4}"),m=In(r,"{4,6}"),y=function(t){return{regex:RegExp((e=t.val,e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:function(t){return t[0]},literal:!0};var e},(p=function(t){if(n.literal)return y(t);switch(t.val){case"G":return Ln(r.eras("short",!1),0);case"GG":return Ln(r.eras("long",!1),0);case"y":return jn(h);case"yy":return jn(d,Et);case"yyyy":return jn(o);case"yyyyy":return jn(m);case"yyyyyy":return jn(u);case"M":return jn(c);case"MM":return jn(s);case"MMM":return Ln(r.months("short",!0,!1),1);case"MMMM":return Ln(r.months("long",!0,!1),1);case"L":return jn(c);case"LL":return jn(s);case"LLL":return Ln(r.months("short",!1,!1),1);case"LLLL":return Ln(r.months("long",!1,!1),1);case"d":return jn(c);case"dd":return jn(s);case"o":return jn(l);case"ooo":return jn(a);case"HH":return jn(s);case"H":return jn(c);case"hh":return jn(s);case"h":return jn(c);case"mm":return jn(s);case"m":case"q":return jn(c);case"qq":return jn(s);case"s":return jn(c);case"ss":return jn(s);case"S":return jn(l);case"SSS":return jn(a);case"u":return Vn(f);case"a":return Ln(r.meridiems(),0);case"kkkk":return jn(o);case"kk":return jn(d,Et);case"W":return jn(c);case"WW":return jn(s);case"E":case"c":return jn(i);case"EEE":return Ln(r.weekdays("short",!1,!1),1);case"EEEE":return Ln(r.weekdays("long",!1,!1),1);case"ccc":return Ln(r.weekdays("short",!0,!1),1);case"cccc":return Ln(r.weekdays("long",!0,!1),1);case"Z":case"ZZ":return $n(new RegExp("([+-]"+c.source+")(?::("+s.source+"))?"),2);case"ZZZ":return $n(new RegExp("([+-]"+c.source+")("+s.source+")?"),2);case"z":return Vn(/[a-z_+-/]{1,256}?/i);default:return y(t)}}(n)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"}).token=n,p;var n,r,i,s,a,o,u,c,l,h,f,d,m,y,p})),s=i.find((function(t){return t.invalidReason}));if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};var a=function(t){return["^"+t.map((function(t){return t.regex})).reduce((function(t,e){return t+"("+e.source+")"}),"")+"$",t]}(i),o=a[0],u=a[1],c=RegExp(o,"i"),l=function(t,e,n){var r=t.match(e);if(r){var i={},s=1;for(var a in n)if(mt(n,a)){var o=n[a],u=o.groups?o.groups+1:1;!o.literal&&o.token&&(i[o.token.val[0]]=o.deser(r.slice(s,s+u))),s+=u}return[r,i]}return[r,{}]}(e,c,u),h=l[0],f=l[1],d=f?function(t){var e;return e=at(t.Z)?at(t.z)?null:ie.create(t.z):new ae(t.Z),at(t.q)||(t.M=3*(t.q-1)+1),at(t.h)||(t.h<12&&1===t.a?t.h+=12:12===t.h&&0===t.a&&(t.h=0)),0===t.G&&t.y&&(t.y=-t.y),at(t.u)||(t.S=gt(t.u)),[Object.keys(t).reduce((function(e,n){var r=function(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(n);return r&&(e[r]=t[n]),e}),{}),e]}(f):[null,null];return{input:e,tokens:r,regex:c,rawMatches:h,matches:f,result:d[0],zone:d[1]}}var zn=[0,31,59,90,120,151,181,212,243,273,304,334],Rn=[0,31,60,91,121,152,182,213,244,274,305,335];function Zn(t,e){return new Yt("unit out of range","you specified "+e+" (of type "+typeof e+") as a "+t+", which is invalid")}function Un(t,e,n){var r=new Date(Date.UTC(t,e-1,n)).getUTCDay();return 0===r?7:r}function Hn(t,e,n){return n+(bt(t)?Rn:zn)[e-1]}function Bn(t,e){var n=bt(t)?Rn:zn,r=n.findIndex((function(t){return t<e}));return{month:r+1,day:e-n[r]}}function Jn(t){var e,n=t.year,r=t.month,i=t.day,s=Hn(n,r,i),a=Un(n,r,i),o=Math.floor((s-a+10)/7);return o<1?o=Tt(e=n-1):o>Tt(n)?(e=n+1,o=1):e=n,Object.assign({weekYear:e,weekNumber:o,weekday:a},It(t))}function Wn(t){var e,n=t.weekYear,r=t.weekNumber,i=t.weekday,s=Un(n,1,4),a=Ot(n),o=7*r+i-s-3;o<1?o+=Ot(e=n-1):o>a?(e=n+1,o-=Ot(n)):e=n;var u=Bn(e,o),c=u.month,l=u.day;return Object.assign({year:e,month:c,day:l},It(t))}function Gn(t){var e=t.year,n=Hn(e,t.month,t.day);return Object.assign({year:e,ordinal:n},It(t))}function Yn(t){var e=t.year,n=Bn(e,t.ordinal),r=n.month,i=n.day;return Object.assign({year:e,month:r,day:i},It(t))}function Qn(t){var e=ut(t.year),n=yt(t.month,1,12),r=yt(t.day,1,kt(t.year,t.month));return e?n?!r&&Zn("day",t.day):Zn("month",t.month):Zn("year",t.year)}function Xn(t){var e=t.hour,n=t.minute,r=t.second,i=t.millisecond,s=yt(e,0,23)||24===e&&0===n&&0===r&&0===i,a=yt(n,0,59),o=yt(r,0,59),u=yt(i,0,999);return s?a?o?!u&&Zn("millisecond",i):Zn("second",r):Zn("minute",n):Zn("hour",e)}function Kn(t){return new Yt("unsupported zone",'the zone "'+t.name+'" is not supported')}function tr(t){return null===t.weekData&&(t.weekData=Jn(t.c)),t.weekData}function er(t,e){var n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new gr(Object.assign({},n,e,{old:n}))}function nr(t,e,n){var r=t-60*e*1e3,i=n.offset(r);if(e===i)return[r,e];r-=60*(i-e)*1e3;var s=n.offset(r);return i===s?[r,i]:[t-60*Math.min(i,s)*1e3,Math.max(i,s)]}function rr(t,e){var n=new Date(t+=60*e*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function ir(t,e,n){return nr(St(t),e,n)}function sr(t,e){var n,r=Object.keys(e.values);-1===r.indexOf("milliseconds")&&r.push("milliseconds"),e=(n=e).shiftTo.apply(n,r);var i=t.o,s=t.c.year+e.years,a=t.c.month+e.months+3*e.quarters,o=Object.assign({},t.c,{year:s,month:a,day:Math.min(t.c.day,kt(s,a))+e.days+7*e.weeks}),u=On.fromObject({hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),c=nr(St(o),i,t.zone),l=c[0],h=c[1];return 0!==u&&(l+=u,h=t.zone.offset(l)),{ts:l,o:h}}function ar(t,e,n,r,i){var s=n.setZone,a=n.zone;if(t&&0!==Object.keys(t).length){var o=e||a,u=gr.fromObject(Object.assign(t,n,{zone:o,setZone:void 0}));return s?u:u.setZone(a)}return gr.invalid(new Yt("unparsable",'the input "'+i+"\" can't be parsed as "+r))}function or(t,e){return t.isValid?Gt.create(Ee.create("en-US"),{allowZ:!0,forceSimple:!0}).formatDateTimeFromString(t,e):null}function ur(t,e){var n=e.suppressSeconds,r=void 0!==n&&n,i=e.suppressMilliseconds,s=void 0!==i&&i,a=e.includeOffset,o=e.includeZone,u=void 0!==o&&o,c=e.spaceZone,l=void 0!==c&&c,h="HH:mm";return r&&0===t.second&&0===t.millisecond||(h+=":ss",s&&0===t.millisecond||(h+=".SSS")),(u||a)&&l&&(h+=" "),u?h+="z":a&&(h+="ZZ"),or(t,h)}var cr={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},lr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hr={ordinal:1,hour:0,minute:0,second:0,millisecond:0},fr=["year","month","day","hour","minute","second","millisecond"],dr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],mr=["year","ordinal","hour","minute","second","millisecond"];function yr(t){var e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new C(t);return e}function pr(t,e){for(var n=0,r=fr;n<r.length;n++){var i=r[n];at(t[i])&&(t[i]=cr[i])}var s=Qn(t)||Xn(t);if(s)return gr.invalid(s);var a=ye.now(),o=ir(t,e.offset(a),e),u=o[0],c=o[1];return new gr({ts:u,zone:e,o:c})}function vr(t,e,n){var r=!!at(n.round)||n.round,i=function(t,i){return t=wt(t,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(t,i)},s=function(r){return n.calendary?e.hasSame(t,r)?0:e.startOf(r).diff(t.startOf(r),r).get(r):e.diff(t,r).get(r)};if(n.unit)return i(s(n.unit),n.unit);var a=n.units,o=Array.isArray(a),u=0;for(a=o?a:a[Symbol.iterator]();;){var c;if(o){if(u>=a.length)break;c=a[u++]}else{if((u=a.next()).done)break;c=u.value}var l=c,h=s(l);if(Math.abs(h)>=1)return i(h,l)}return i(0,n.units[n.units.length-1])}var gr=function(){function t(t){var e=t.zone||ye.defaultZone,n=t.invalid||(Number.isNaN(t.ts)?new Yt("invalid input"):null)||(e.isValid?null:Kn(e));this.ts=at(t.ts)?ye.now():t.ts;var r=null,i=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e)){var s=[t.old.c,t.old.o];r=s[0],i=s[1]}else r=rr(this.ts,e.offset(this.ts)),r=(n=Number.isNaN(r.year)?new Yt("invalid input"):null)?null:r,i=n?null:e.offset(this.ts);this._zone=e,this.loc=t.loc||Ee.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}t.local=function(e,n,r,i,s,a,o){return at(e)?new t({ts:ye.now()}):pr({year:e,month:n,day:r,hour:i,minute:s,second:a,millisecond:o},ye.defaultZone)},t.utc=function(e,n,r,i,s,a,o){return at(e)?new t({ts:ye.now(),zone:ae.utcInstance}):pr({year:e,month:n,day:r,hour:i,minute:s,second:a,millisecond:o},ae.utcInstance)},t.fromJSDate=function(e,n){void 0===n&&(n={});var r,i=(r=e,"[object Date]"===Object.prototype.toString.call(r)?e.valueOf():NaN);if(Number.isNaN(i))return t.invalid("invalid input");var s=ue(n.zone,ye.defaultZone);return s.isValid?new t({ts:i,zone:s,loc:Ee.fromObject(n)}):t.invalid(Kn(s))},t.fromMillis=function(e,n){if(void 0===n&&(n={}),ot(e))return e<-864e13||e>864e13?t.invalid("Timestamp out of range"):new t({ts:e,zone:ue(n.zone,ye.defaultZone),loc:Ee.fromObject(n)});throw new _("fromMillis requires a numerical input")},t.fromSeconds=function(e,n){if(void 0===n&&(n={}),ot(e))return new t({ts:1e3*e,zone:ue(n.zone,ye.defaultZone),loc:Ee.fromObject(n)});throw new _("fromSeconds requires a numerical input")},t.fromObject=function(e){var n=ue(e.zone,ye.defaultZone);if(!n.isValid)return t.invalid(Kn(n));var r=ye.now(),i=n.offset(r),s=At(e,yr,["zone","locale","outputCalendar","numberingSystem"]),a=!at(s.ordinal),o=!at(s.year),u=!at(s.month)||!at(s.day),c=o||u,l=s.weekYear||s.weekNumber,h=Ee.fromObject(e);if((c||a)&&l)throw new j("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new j("Can't mix ordinal dates with month/day");var f,d,m=l||s.weekday&&!c,y=rr(r,i);m?(f=dr,d=lr,y=Jn(y)):a?(f=mr,d=hr,y=Gn(y)):(f=fr,d=cr);var p=!1,v=f,g=Array.isArray(v),w=0;for(v=g?v:v[Symbol.iterator]();;){var b;if(g){if(w>=v.length)break;b=v[w++]}else{if((w=v.next()).done)break;b=w.value}var O=b;at(s[O])?s[O]=p?d[O]:y[O]:p=!0}var k=(m?function(t){var e=ut(t.weekYear),n=yt(t.weekNumber,1,Tt(t.weekYear)),r=yt(t.weekday,1,7);return e?n?!r&&Zn("weekday",t.weekday):Zn("week",t.week):Zn("weekYear",t.weekYear)}(s):a?function(t){var e=ut(t.year),n=yt(t.ordinal,1,Ot(t.year));return e?!n&&Zn("ordinal",t.ordinal):Zn("year",t.year)}(s):Qn(s))||Xn(s);if(k)return t.invalid(k);var S=ir(m?Wn(s):a?Yn(s):s,i,n),T=new t({ts:S[0],zone:n,o:S[1],loc:h});return s.weekday&&c&&e.weekday!==T.weekday?t.invalid("mismatched weekday","you can't specify both a weekday of "+s.weekday+" and a date of "+T.toISO()):T},t.fromISO=function(t,e){void 0===e&&(e={});var n=De(t,[tn,sn],[en,an],[nn,on],[rn,un]);return ar(n[0],n[1],e,"ISO 8601",t)},t.fromRFC2822=function(t,e){void 0===e&&(e={});var n=De(function(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(t),[Je,We]);return ar(n[0],n[1],e,"RFC 2822",t)},t.fromHTTP=function(t,e){void 0===e&&(e={});var n=De(t,[Ge,Xe],[Ye,Xe],[Qe,Ke]);return ar(n[0],n[1],e,"HTTP",e)},t.fromFormat=function(e,n,r){if(void 0===r&&(r={}),at(e)||at(n))throw new _("fromFormat requires an input string and a format");var i=r,s=i.locale,a=void 0===s?null:s,o=i.numberingSystem,u=void 0===o?null:o,c=function(t,e,n){var r=Pn(t,e,n);return[r.result,r.zone,r.invalidReason]}(Ee.fromOpts({locale:a,numberingSystem:u,defaultToEN:!0}),e,n),l=c[0],h=c[1],f=c[2];return f?t.invalid(f):ar(l,h,r,"format "+n,e)},t.fromString=function(e,n,r){return void 0===r&&(r={}),t.fromFormat(e,n,r)},t.fromSQL=function(t,e){void 0===e&&(e={});var n=De(t,[cn,hn],[ln,fn]);return ar(n[0],n[1],e,"SQL",t)},t.invalid=function(e,n){if(void 0===n&&(n=null),!e)throw new _("need to specify a reason the DateTime is invalid");var r=e instanceof Yt?e:new Yt(e,n);if(ye.throwOnInvalid)throw new A(r);return new t({invalid:r})},t.isDateTime=function(t){return t&&t.isLuxonDateTime||!1};var e=t.prototype;return e.get=function(t){return this[t]},e.resolvedLocaleOpts=function(t){void 0===t&&(t={});var e=Gt.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e.locale,numberingSystem:e.numberingSystem,outputCalendar:e.calendar}},e.toUTC=function(t,e){return void 0===t&&(t=0),void 0===e&&(e={}),this.setZone(ae.instance(t),e)},e.toLocal=function(){return this.setZone(ye.defaultZone)},e.setZone=function(e,n){var r=void 0===n?{}:n,i=r.keepLocalTime,s=void 0!==i&&i,a=r.keepCalendarTime,o=void 0!==a&&a;if((e=ue(e,ye.defaultZone)).equals(this.zone))return this;if(e.isValid){var u=this.ts;if(s||o){var c=this.o-e.offset(this.ts);u=ir(this.toObject(),c,e)[0]}return er(this,{ts:u,zone:e})}return t.invalid(Kn(e))},e.reconfigure=function(t){var e=void 0===t?{}:t,n=e.locale,r=e.numberingSystem,i=e.outputCalendar;return er(this,{loc:this.loc.clone({locale:n,numberingSystem:r,outputCalendar:i})})},e.setLocale=function(t){return this.reconfigure({locale:t})},e.set=function(t){if(!this.isValid)return this;var e,n=At(t,yr,[]);at(n.weekYear)&&at(n.weekNumber)&&at(n.weekday)?at(n.ordinal)?(e=Object.assign(this.toObject(),n),at(n.day)&&(e.day=Math.min(kt(e.year,e.month),e.day))):e=Yn(Object.assign(Gn(this.c),n)):e=Wn(Object.assign(Jn(this.c),n));var r=ir(e,this.o,this.zone);return er(this,{ts:r[0],o:r[1]})},e.plus=function(t){return this.isValid?er(this,sr(this,kn(t))):this},e.minus=function(t){return this.isValid?er(this,sr(this,kn(t).negate())):this},e.startOf=function(t){if(!this.isValid)return this;var e={},n=On.normalizeUnit(t);switch(n){case"years":e.month=1;case"quarters":case"months":e.day=1;case"weeks":case"days":e.hour=0;case"hours":e.minute=0;case"minutes":e.second=0;case"seconds":e.millisecond=0}if("weeks"===n&&(e.weekday=1),"quarters"===n){var r=Math.ceil(this.month/3);e.month=3*(r-1)+1}return this.set(e)},e.endOf=function(t){var e;return this.isValid?this.plus((e={},e[t]=1,e)).startOf(t).minus(1):this},e.toFormat=function(t,e){return void 0===e&&(e={}),this.isValid?Gt.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):"Invalid DateTime"},e.toLocaleString=function(t){return void 0===t&&(t=q),this.isValid?Gt.create(this.loc.clone(t),t).formatDateTime(this):"Invalid DateTime"},e.toLocaleParts=function(t){return void 0===t&&(t={}),this.isValid?Gt.create(this.loc.clone(t),t).formatDateTimeParts(this):[]},e.toISO=function(t){return void 0===t&&(t={}),this.isValid?this.toISODate()+"T"+this.toISOTime(t):null},e.toISODate=function(){var t="yyyy-MM-dd";return this.year>9999&&(t="+"+t),or(this,t)},e.toISOWeekDate=function(){return or(this,"kkkk-'W'WW-c")},e.toISOTime=function(t){var e=void 0===t?{}:t,n=e.suppressMilliseconds,r=void 0!==n&&n,i=e.suppressSeconds,s=void 0!==i&&i,a=e.includeOffset;return ur(this,{suppressSeconds:s,suppressMilliseconds:r,includeOffset:void 0===a||a})},e.toRFC2822=function(){return or(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ")},e.toHTTP=function(){return or(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},e.toSQLDate=function(){return or(this,"yyyy-MM-dd")},e.toSQLTime=function(t){var e=void 0===t?{}:t,n=e.includeOffset,r=void 0===n||n,i=e.includeZone;return ur(this,{includeOffset:r,includeZone:void 0!==i&&i,spaceZone:!0})},e.toSQL=function(t){return void 0===t&&(t={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(t):null},e.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"},e.valueOf=function(){return this.toMillis()},e.toMillis=function(){return this.isValid?this.ts:NaN},e.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},e.toJSON=function(){return this.toISO()},e.toBSON=function(){return this.toJSDate()},e.toObject=function(t){if(void 0===t&&(t={}),!this.isValid)return{};var e=Object.assign({},this.c);return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e},e.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},e.diff=function(t,e,n){if(void 0===e&&(e="milliseconds"),void 0===n&&(n={}),!this.isValid||!t.isValid)return On.invalid(this.invalid||t.invalid,"created by diffing an invalid DateTime");var r,i=Object.assign({locale:this.locale,numberingSystem:this.numberingSystem},n),s=(r=e,Array.isArray(r)?r:[r]).map(On.normalizeUnit),a=t.valueOf()>this.valueOf(),o=function(t,e,n,r){var i,s=function(t,e,n){for(var r,i,s={},a=0,o=[["years",function(t,e){return e.year-t.year}],["months",function(t,e){return e.month-t.month+12*(e.year-t.year)}],["weeks",function(t,e){var n=Nn(t,e);return(n-n%7)/7}],["days",Nn]];a<o.length;a++){var u=o[a],c=u[0],l=u[1];if(n.indexOf(c)>=0){var h;r=c;var f,d=l(t,e);(i=t.plus(((h={})[c]=d,h)))>e?(t=t.plus(((f={})[c]=d-1,f)),d-=1):t=i,s[c]=d}}return[t,s,i,r]}(t,e,n),a=s[0],o=s[1],u=s[2],c=s[3],l=e-a,h=n.filter((function(t){return["hours","minutes","seconds","milliseconds"].indexOf(t)>=0}));0===h.length&&(u<e&&(u=a.plus(((i={})[c]=1,i))),u!==a&&(o[c]=(o[c]||0)+l/(u-a)));var f,d=On.fromObject(Object.assign(o,r));return h.length>0?(f=On.fromMillis(l,r)).shiftTo.apply(f,h).plus(d):d}(a?this:t,a?t:this,s,i);return a?o.negate():o},e.diffNow=function(e,n){return void 0===e&&(e="milliseconds"),void 0===n&&(n={}),this.diff(t.local(),e,n)},e.until=function(t){return this.isValid?En.fromDateTimes(this,t):this},e.hasSame=function(t,e){if(!this.isValid)return!1;if("millisecond"===e)return this.valueOf()===t.valueOf();var n=t.valueOf();return this.startOf(e)<=n&&n<=this.endOf(e)},e.equals=function(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)},e.toRelative=function(e){if(void 0===e&&(e={}),!this.isValid)return null;var n=e.base||t.fromObject({zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;return vr(n,this.plus(r),Object.assign(e,{numeric:"always",units:["years","months","days","hours","minutes","seconds"]}))},e.toRelativeCalendar=function(e){return void 0===e&&(e={}),this.isValid?vr(e.base||t.fromObject({zone:this.zone}),this,Object.assign(e,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},t.min=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.every(t.isDateTime))throw new _("min requires all arguments be DateTimes");return ft(n,(function(t){return t.valueOf()}),Math.min)},t.max=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.every(t.isDateTime))throw new _("max requires all arguments be DateTimes");return ft(n,(function(t){return t.valueOf()}),Math.max)},t.fromFormatExplain=function(t,e,n){void 0===n&&(n={});var r=n,i=r.locale,s=void 0===i?null:i,a=r.numberingSystem,o=void 0===a?null:a;return Pn(Ee.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0}),t,e)},t.fromStringExplain=function(e,n,r){return void 0===r&&(r={}),t.fromFormatExplain(e,n,r)},k(t,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?tr(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?tr(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?tr(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Gn(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?xn.months("short",{locale:this.locale})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?xn.months("long",{locale:this.locale})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?xn.weekdays("short",{locale:this.locale})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?xn.weekdays("long",{locale:this.locale})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.universal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return bt(this.year)}},{key:"daysInMonth",get:function(){return kt(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?Ot(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?Tt(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return q}},{key:"DATE_MED",get:function(){return P}},{key:"DATE_FULL",get:function(){return z}},{key:"DATE_HUGE",get:function(){return R}},{key:"TIME_SIMPLE",get:function(){return Z}},{key:"TIME_WITH_SECONDS",get:function(){return U}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return H}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return B}},{key:"TIME_24_SIMPLE",get:function(){return J}},{key:"TIME_24_WITH_SECONDS",get:function(){return W}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return G}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return Y}},{key:"DATETIME_SHORT",get:function(){return Q}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return X}},{key:"DATETIME_MED",get:function(){return K}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return tt}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return et}},{key:"DATETIME_FULL",get:function(){return nt}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return rt}},{key:"DATETIME_HUGE",get:function(){return it}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return st}}]),t}();function wr(t){if(gr.isDateTime(t))return t;if(t&&t.valueOf&&ot(t.valueOf()))return gr.fromJSDate(t);if(t&&"object"==typeof t)return gr.fromObject(t);throw new _("Unknown datetime argument: "+t+", of type "+typeof t)}b.DateTime=gr;var br={},Or="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Or){var kr=new Uint8Array(16);br=function(){return Or(kr),kr}}else{var Sr=new Array(16);br=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),Sr[e]=t>>>((3&e)<<3)&255;return Sr}}for(var Tr=[],Er=0;Er<256;++Er)Tr[Er]=(Er+256).toString(16).substr(1);var xr=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||br)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var s=0;s<16;++s)e[r+s]=i[s];return e||function(t,e){var n=e||0,r=Tr;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}(i)};const{DateTime:Nr}=b;const Dr=async function(t){const{body:e}=await t.get({endpoint:"/accounts/current"});return e},Ar=async function(t,{identity:e,db:n,role:r,email:i}){return await t.post({identity:e,endpoint:`/db/${n}/grant`,query:{role:r,email:i}})},Mr=async function(t,{identity:e,db:n,role:r,email:i}){return await t.post({identity:e,endpoint:`/db/${n}/revoke`,query:{role:r,email:i}})},Ir=async function(t,{db:e,ns:n,stream:r}){await t.delete({endpoint:`/db/${e}/ns/${n}/streams/${r}/annotation`})},jr=async function(t,{db:e,ns:n,stream:r}){try{const{body:i}=await t.get({endpoint:`/db/${e}/ns/${n}/streams/${r}/annotation`});return i}catch(i){if(i&&404===i.statusCode)return;if(i)throw i}},Cr=async function(t,{db:e,to:n}){await t.post({endpoint:`/db/${e}/clone?to=${n}`})},_r=async function(t,{identity:e,db:n}){await t.put({identity:e,endpoint:"/db/"+n})},Lr=async function(t,{identity:e,db:n}){await t.delete({identity:e,endpoint:"/db/"+n})},$r=async function(t,{db:e,to:n}){await t.post({endpoint:`/db/${e}/rename?to=${n}`})},Vr=async function(t,{each:e}){const{body:n}=await t.get({endpoint:"/db"});for(const r of n)await e(r)},Fr=async function(t,{db:e,ns:n,stream:r,event:i}){await t.delete({endpoint:`/db/${e}/ns/${n}/streams/${r}/events/${i}`})},qr=async function(t,{identity:e,db:n,ns:r,stream:i,event:s}){let{body:a}=await t.get({identity:e,endpoint:`/db/${n}/ns/${r}/streams/${i}/events/${s}`});return a},Pr=async function(t,{identity:e,db:n,ns:r}){await t.put({identity:e,endpoint:`/db/${n}/ns/${r}`})},zr=async function(t,{db:e,ns:n}){await t.delete({endpoint:`/db/${e}/ns/${n}`})},Rr=async function(t,{db:e,ns:n,from:r,after:i,to:s,until:a,types:o,limit:u,each:c}){const{body:l}=await t.get({endpoint:`/db/${e}/ns/${n}/events`,query:{types:o,from:r,after:i,to:s,until:a,limit:u,schema:"jsonapi"}});for(const h of l.data)await c(h);if(l.meta.cursor)return l.meta.cursor.after},Zr=async function(t,{db:e,ns:n,to:r}){await t.post({endpoint:`/db/${e}/ns/${n}/rename?to=${r}`})},Ur=async function(t,{db:e,ns:n}){await t.delete({endpoint:`/db/${e}/ns/${n}/contents`})},Hr=async function(t,{db:e,each:n}){const{body:r}=await t.get({endpoint:`/db/${e}/ns`});for(const i of r)await n(i)},Br=async function(t,{db:e,ns:n,stream:r,annotation:i}){await t.put({endpoint:`/db/${e}/ns/${n}/streams/${r}/annotation`,body:i})},Jr=async function(t,{db:e,ns:n,stream:r}){await t.delete({endpoint:`/db/${e}/ns/${n}/streams/${r}`})},Wr=async function(t,{db:e,ns:n,stream:r,from:i,after:s,to:a,until:o,types:u,limit:c,each:h}){const f=t.url({endpoint:`/db/${e}/ns/${n}/streams/${r}/events`,query:{types:u,from:i,after:s,to:a,until:o,limit:c,schema:"jsonapi"},headers:{accept:"text/event-stream"}}),d=new w(f,{headers:await t.auth()});let m,y;d.addEventListener("error",t=>{t.message?(d.close(),p.jobs.length=0,y(t)):d.close()});const p=new l;return d.addEventListener("message",t=>{!async function(t,e,n){p.run(async(r,i)=>{await e(t,n),i.success(),p.running||m()})}(JSON.parse(t.data),h,{cancel:async()=>{d.close(),p.jobs.length=0,m()}})}),new Promise((t,e)=>{m=t,y=e})},Gr=async function(t,{db:e,ns:n,stream:r,data:i,meta:s,id:a}){a||(a=xr()),s={tz:Nr.local().zoneName,...s},await t.put({endpoint:`/db/${e}/ns/${n}/streams/${r}/events/${a}`,body:{data:i||{},meta:s}})},Yr=async function(t,{db:e,ns:n,each:r}){const{body:i}=await t.get({endpoint:`/db/${e}/ns/${n}/streams`});for(const s of i)await r(s)};var Qr={};function Xr(t){var e=this;if(e instanceof Xr||(e=new Xr),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}function Kr(t,e){t.tail=new ei(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function ti(t,e){t.head=new ei(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ei(t,e,n,r){if(!(this instanceof ei))return new ei(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Qr=Xr,Xr.Node=ei,Xr.create=Xr,Xr.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null},Xr.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Xr.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Xr.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Kr(this,arguments[t]);return this.length},Xr.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)ti(this,arguments[t]);return this.length},Xr.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Xr.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Xr.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},Xr.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},Xr.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},Xr.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},Xr.prototype.map=function(t,e){e=e||this;for(var n=new Xr,r=this.head;null!==r;)n.push(t.call(e,r.value,this)),r=r.next;return n},Xr.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Xr,r=this.tail;null!==r;)n.push(t.call(e,r.value,this)),r=r.prev;return n},Xr.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=t(n,r.value,i),r=r.next;return n},Xr.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=t(n,r.value,i),r=r.prev;return n},Xr.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},Xr.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},Xr.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new Xr;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;null!==i&&r<t;r++)i=i.next;for(;null!==i&&r<e;r++,i=i.next)n.push(i.value);return n},Xr.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new Xr;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;null!==i&&r>e;r--)i=i.prev;for(;null!==i&&r>t;r--,i=i.prev)n.push(i.value);return n},Xr.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{!function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}(Xr)}catch(gs){}const ni=Symbol("max"),ri=Symbol("length"),ii=Symbol("lengthCalculator"),si=Symbol("allowStale"),ai=Symbol("maxAge"),oi=Symbol("dispose"),ui=Symbol("noDisposeOnSet"),ci=Symbol("lruList"),li=Symbol("cache"),hi=Symbol("updateAgeOnGet"),fi=()=>1,di=(t,e,n)=>{const r=t[li].get(e);if(r){const e=r.value;if(mi(t,e)){if(pi(t,r),!t[si])return}else n&&(t[hi]&&(r.value.now=Date.now()),t[ci].unshiftNode(r));return e.value}},mi=(t,e)=>{if(!e||!e.maxAge&&!t[ai])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[ai]&&n>t[ai]},yi=t=>{if(t[ri]>t[ni])for(let e=t[ci].tail;t[ri]>t[ni]&&null!==e;){const n=e.prev;pi(t,e),e=n}},pi=(t,e)=>{if(e){const n=e.value;t[oi]&&t[oi](n.key,n.value),t[ri]-=n.length,t[li].delete(n.key),t[ci].removeNode(e)}};class vi{constructor(t,e,n,r,i){this.key=t,this.value=e,this.length=n,this.now=r,this.maxAge=i||0}}const gi=(t,e,n,r)=>{let i=n.value;mi(t,i)&&(pi(t,n),t[si]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};var wi=class{constructor(t,e){this.stream=t,this.id=e}get account(){return this.db.account}get db(){return this.ns.db}get ns(){return this.stream.ns}async destroy(){return this.account.api.destroyEvent({db:this.db.name,ns:this.ns.name,stream:this.stream.id,event:this.id})}async read(){return this.account.api.readEvent({db:this.db.name,ns:this.ns.name,stream:this.stream.id,event:this.id})}};const bi=class{constructor(){this.cache=new class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[ni]=t.max||1/0;const e=t.length||fi;if(this[ii]="function"!=typeof e?fi:e,this[si]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[ai]=t.maxAge||0,this[oi]=t.dispose,this[ui]=t.noDisposeOnSet||!1,this[hi]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[ni]=t||1/0,yi(this)}get max(){return this[ni]}set allowStale(t){this[si]=!!t}get allowStale(){return this[si]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[ai]=t,yi(this)}get maxAge(){return this[ai]}set lengthCalculator(t){"function"!=typeof t&&(t=fi),t!==this[ii]&&(this[ii]=t,this[ri]=0,this[ci].forEach(t=>{t.length=this[ii](t.value,t.key),this[ri]+=t.length})),yi(this)}get lengthCalculator(){return this[ii]}get length(){return this[ri]}get itemCount(){return this[ci].length}rforEach(t,e){e=e||this;for(let n=this[ci].tail;null!==n;){const r=n.prev;gi(this,t,n,e),n=r}}forEach(t,e){e=e||this;for(let n=this[ci].head;null!==n;){const r=n.next;gi(this,t,n,e),n=r}}keys(){return this[ci].toArray().map(t=>t.key)}values(){return this[ci].toArray().map(t=>t.value)}reset(){this[oi]&&this[ci]&&this[ci].length&&this[ci].forEach(t=>this[oi](t.key,t.value)),this[li]=new Map,this[ci]=new Qr,this[ri]=0}dump(){return this[ci].map(t=>!mi(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ci]}set(t,e,n){if((n=n||this[ai])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[ii](e,t);if(this[li].has(t)){if(i>this[ni])return pi(this,this[li].get(t)),!1;const s=this[li].get(t).value;return this[oi]&&(this[ui]||this[oi](t,s.value)),s.now=r,s.maxAge=n,s.value=e,this[ri]+=i-s.length,s.length=i,this.get(t),yi(this),!0}const s=new vi(t,e,i,r,n);return s.length>this[ni]?(this[oi]&&this[oi](t,e),!1):(this[ri]+=s.length,this[ci].unshift(s),this[li].set(t,this[ci].head),yi(this),!0)}has(t){if(!this[li].has(t))return!1;const e=this[li].get(t).value;return!mi(this,e)}get(t){return di(this,t,!0)}peek(t){return di(this,t,!1)}pop(){const t=this[ci].tail;return t?(pi(this,t),t.value):null}del(t){pi(this,this[li].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const r=t[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const t=i-e;t>0&&this.set(r.k,r.v,t)}}}prune(){this[li].forEach((t,e)=>di(this,e,!1))}}({max:1e5,length:function(t,e){return 16},maxAge:3e5})}seen(t){if(this.cache.peek(t))return!0;this.cache.set(t,!0)}},Oi=new l;var ki,Si,Ti=class{constructor({ns:t,stream:e,from:n,after:r,to:i,until:s,types:a,filters:o}){this._ns=t,this.stream=e,this.from=n,this.after=r,this.to=i,this.until=s,this.types=a,this.filters=o||[],this.shouldRead=!0}get api(){return this.account.api}get account(){return this.db.account}get db(){return this.ns.db}get ns(){return this._ns||this.stream.ns}filter(t){return this.filters.push(t),this}group(t){return this.groupby=t,this.until||(this.until="caught-up"),this}rollup(t){return this.rollupto=t,this}async write(t){if(Array.isArray(t)){for(const e of t)await this.api.writeStream({db:this.db.name,ns:this.ns.name,stream:this.stream.id,id:e.id,data:e.data,meta:e.meta});return t.length}return 1===arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof String)&&(t={meta:{type:arguments[0]},data:{}}),2===arguments.length&&(t={meta:{type:arguments[0]},data:{...arguments[1]}}),await this.api.writeStream({db:this.db.name,ns:this.ns.name,stream:this.stream.id,id:t.id,data:t.data,meta:t.meta}),1}async each(t){let e=new bi,n={db:this.db.name,ns:this.ns.name,stream:this.stream?this.stream.id:void 0,from:this.from,after:this.after,to:this.to,until:this.until,types:this.types,filters:this.filters,groupby:this.groupby,rollupto:this.rollupto,limit:this.groupby?void 0:this.limit||50,each:async(n,r)=>await async function(t,e,n,r){return new Promise(async(i,s)=>{Oi.run(async(s,a)=>{e.meta&&e.meta.id&&t.seen(e.meta.id)||await n(e,r),i(),a.success()})})}(e,n,t,r)};await async function(t,e){let n=e.stream?t.readStream.bind(t):t.readDomain.bind(t),r=e.after;for(;;){let t=await n({...e,after:r});if(!t)break;r=t,e.from=void 0}return r}(this.api,n)}},Ei=class{constructor(t,e){this.id=t||xr(),this.ns=e}get api(){return this.account.api}get account(){return this.db.account}get db(){return this.ns.db}events(t){return new Ti({...t,stream:this})}event(t){return new wi(this,t)}async annotate(t){return this.api.annotateStream({db:this.db.name,ns:this.ns.name,stream:this.id,annotation:t})}annotation(){return new class{constructor(t){this.stream=t}get api(){return this.account.api}get account(){return this.db.account}get db(){return this.ns.db}get ns(){return this.stream.ns}async destroy(){return this.api.destroyAnnotation({db:this.db.name,ns:this.ns.name,stream:this.stream.id})}async read(){return this.api.readAnnotation({db:this.db.name,ns:this.ns.name,stream:this.stream.id})}}(this)}async destroy(){return this.api.destroyStream({db:this.db.name,ns:this.ns.name,stream:this.id})}},xi=class{constructor(t){this.api=t}async details(){return this.api.getAccount()}dbs(){return new class{constructor(t){this.account=t}get api(){return this.account.api}async each(t){return this.api.listDatabases({each:t}).catch(t=>{throw t})}async all(){let t=[];return await this.each(e=>t.push(e)),t.sort((t,e)=>t.localeCompare(e)),t}}(this)}db(t){return new class{constructor(t,e){this.name=t,this.account=e}get api(){return this.account.api}namespaces(){return new class{constructor(t){this.db=t}get api(){return this.account.api}get account(){return this.db.account}async each(t){return this.api.listNamespaces({db:this.db.name,each:t}).catch(t=>{throw t})}}(this)}namespace(t){return this.ns(t)}ns(t){return new class{constructor(t,e){this.name=t,this.db=e}get api(){return this.account.api}get account(){return this.db.account}streams(){return new class{constructor(t){this.ns=t}get api(){return this.account.api}get account(){return this.db.account}get db(){return this.ns.db}stream(t){return this.ns.stream(t)}async each(t){return this.api.listStreams({db:this.db.name,ns:this.ns.name,each:async e=>await t(this.stream(e))}).catch(t=>{throw t})}}(this)}stream(t){return new Ei(t,this)}events(t){return"string"==typeof t&&(t={types:[t]}),new Ti({...t,ns:this})}async create(){return await this.api.createNamespace({db:this.db.name,ns:this.name}),this}async destroy(){await this.api.destroyNamespace({db:this.db.name,ns:this.name})}async truncate(){await this.api.truncateNamespace({db:this.db.name,ns:this.name})}async rename(t){return await this.api.renameNamespace({db:this.db.name,ns:this.name,to:t}),this.name=t,this}async export(){return await this.streams().each(t=>this.stream(t.id).export()),this}}(t,this)}streams(){return this.ns("").streams()}events(t){return this.ns("").events(t)}stream(t){return this.ns("").stream(t)}async create(){return await this.api.createDatabase({db:this.name}),this}async clone(t){await this.api.cloneDatabase({db:this.name,to:t})}async destroy(){await this.api.destroyDatabase({db:this.name})}async rename(t){return await this.api.renameDatabase({db:this.name,to:t}),this.name=t,this}async grant({role:t,email:e}){return await this.api.grantAccount({db:this.name,role:t,email:e}),this}async revoke({role:t,email:e}){return await this.api.revokeAccount({db:this.name,role:t,email:e}),this}}(t,this)}databases(){return this.dbs()}database(t){return this.db(t)}},Ni=function(t,e){let n={};return Object.keys(t).filter(t=>!t.startsWith(e)).forEach(e=>{n[e]=t[e]}),n},Di={exports:{}};ki=this,Si=function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,r){return e(n(t),r)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}var r=n(e);r.right,r.left;function i(t){return t}function s(t,e,n,r){return function t(i,s){if(s>=r.length)return n(i);const a=new Map,o=r[s++];let u=-1;for(const e of i){const t=o(e,++u,i),n=a.get(t);n?n.push(e):a.set(t,[e])}for(const[e,n]of a)a.set(e,t(n,s));return e(a)}(t,0)}Array.prototype.slice;Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);t.group=function(t,...e){return s(t,i,i,e)},t.rollup=function(t,e,...n){return s(t,i,e,n)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof Di.exports?Si(Di.exports):"function"==typeof define&&define.amd?define(["exports"],Si):Si((ki=ki||self).d3=ki.d3||{}),Di=Di.exports;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.typeChecker=function(t){var e="[object "+t+"]";return function(t){return Mi(t)===e}};var Mi=function(t){return Object.prototype.toString.call(t)};Ai.comparable=function(t){return t instanceof Date?t.getTime():Ai.isArray(t)?t.map(Ai.comparable):t&&"function"==typeof t.toJSON?t.toJSON():t},Ai.isArray=Ai.typeChecker("Array"),Ai.isObject=Ai.typeChecker("Object"),Ai.isFunction=Ai.typeChecker("Function"),Ai.isVanillaObject=function(t){return t&&(t.constructor===Object||t.constructor===Array||"function Object() { [native code] }"===t.constructor.toString()||"function Array() { [native code] }"===t.constructor.toString())&&!t.toJSON},Ai.equals=function(t,e){if(null==t&&t==e)return!0;if(t===e)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))return!1;if(Ai.isArray(t)){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(!Ai.equals(t[n],e[n]))return!1;return!0}if(Ai.isObject(t)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!Ai.equals(t[i],e[i]))return!1;return!0}return!1};var Ii,ji={},Ci=this&&this.__extends||(Ii=function(t,e){return(Ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ii(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r};Object.defineProperty(ji,"__esModule",{value:!0});var Li=function(t,e,n,r,i,s){var a=e[r];if(Ai.isArray(t)&&isNaN(Number(a)))for(var o=0,u=t.length;o<u;o++)if(!Li(t[o],e,n,r,o,t))return!1;return r===e.length||null==t?n(t,i,s):Li(t[a],e,n,r+1,a,t)},$i=function(){function t(t,e,n){this.params=t,this.owneryQuery=e,this.options=n,this.init()}return t.prototype.init=function(){},t.prototype.reset=function(){this.done=!1,this.success=!1},t}();ji.BaseOperation=$i;var Vi=function(t){function e(e,n,r,i){var s=t.call(this,e,n,r)||this;return s._children=i,s}return Ci(e,t),e.prototype.reset=function(){this.success=!1,this.done=!1;for(var t=0,e=this._children.length;t<e;t++)this._children[t].reset()},e.prototype.childrenNext=function(t,e,n){for(var r=!0,i=!0,s=0,a=this._children.length;s<a;s++){var o=this._children[s];if(o.next(t,e,n),o.success||(i=!1),o.done){if(!o.success)break}else r=!1}this.done=r,this.success=i},e}($i);ji.GroupOperation=Vi;var Fi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ci(e,t),e.prototype.next=function(t,e,n){this.childrenNext(t,e,n)},e}(Vi),qi=function(t){function e(e,n,r,i,s){var a=t.call(this,n,r,i,s)||this;return a.keyPath=e,a._nextNestedValue=function(t,e,n){return a.childrenNext(t,e,n),!a.done},a}return Ci(e,t),e.prototype.next=function(t,e,n){Li(t,this.keyPath,this._nextNestedValue,0,e,n)},e}(Vi);ji.createTester=function(t,e){if(t instanceof Function)return t;if(t instanceof RegExp)return function(e){return"string"==typeof e&&t.test(e)};var n=Ai.comparable(t);return function(t){return e(n,Ai.comparable(t))}};var Pi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ci(e,t),e.prototype.init=function(){this._test=ji.createTester(this.params,this.options.compare)},e.prototype.next=function(t,e,n){this._test(t,e,n)&&(this.done=!0,this.success=!0)},e}($i);ji.EqualsOperation=Pi,ji.createEqualsOperation=function(t,e,n){return new Pi(t,e,n)};var zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ci(e,t),e.prototype.next=function(){this.done=!0,this.success=!1},e}($i);ji.numericalOperationCreator=function(t){return function(e,n,r){return null==e?new zi(e,n,r):t(e,n,r)}},ji.numericalOperation=function(t){return ji.numericalOperationCreator((function(e,n,r){var i=typeof Ai.comparable(e),s=t(e);return new Pi((function(t){return typeof Ai.comparable(t)===i&&s(t)}),n,r)}))};var Ri=function(t,e,n,r){var i=r.operations[t];if(!i)throw new Error("Unsupported operation: "+t);return i(e,n,r)},Zi=function(t,e,n,r){if(function(t){for(var e in t)if("$"===e.charAt(0))return!0;return!1}(e)){var i=Ui(e,r),s=i[0];if(i[1].length)throw new Error("Property queries must contain only operations, or exact objects.");return new qi(t,e,n,r,s)}return new qi(t,e,n,r,[new Pi(e,n,r)])};ji.createQueryOperation=function(t,e,n){var r=Ui(t,n),i=r[0],s=r[1],a=_i([new qi([],t,e,n,i)],s);return 1===a.length?a[0]:new Fi(t,e,n,a)};var Ui=function(t,e){var n=[],r=[];if(!Ai.isVanillaObject(t))return n.push(new Pi(t,t,e)),[n,r];for(var i in t)if("$"===i.charAt(0)){var s=Ri(i,t[i],t,e);null!=s&&n.push(s)}else r.push(Zi(i.split("."),t[i],t,e));return[n,r]};ji.createQueryTester=function(t,e){var n=void 0===e?{}:e,r=n.compare,i=n.operations,s=ji.createQueryOperation(t,null,{compare:r||Ai.equals,operations:Object.assign({},i||{})});return function(t,e,n){return s.reset(),s.next(t,e,n),s.success}};var Hi={};(function(t){"use strict";var e,n=this&&this.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});Object.defineProperty(Hi,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){this._test=ji.createTester(this.params,this.options.compare)},e.prototype.reset=function(){t.prototype.reset.call(this),this.success=!0},e.prototype.next=function(t){this._test(t)&&(this.done=!0,this.success=!1)},e}(ji.BaseOperation),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){this._queryOperation=ji.createQueryOperation(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){this._queryOperation.reset()},e.prototype.next=function(t,e,n){this._queryOperation.next(t,e,n),this.done=this._queryOperation.done,this.success=this._queryOperation.success},e}(ji.BaseOperation),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.next=function(e,n,r){t.prototype.next.call(this,e,n,r),this.success=!this.success},e}(i),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){var t=this;this._ops=this.params.map((function(e){return ji.createQueryOperation(e,null,t.options)}))},e.prototype.reset=function(){this.done=!1,this.success=!1;for(var t=0,e=this._ops.length;t<e;t++)this._ops[t].reset()},e.prototype.next=function(t,e,n){for(var r=!1,i=!1,s=0,a=this._ops.length;s<a;s++){var o=this._ops[s];if(o.next(t,e,n),o.success){r=!0,i=o.success;break}}this.success=i,this.done=r},e}(ji.BaseOperation),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.next=function(e,n,r){t.prototype.next.call(this,e,n,r),this.success=!this.success},e}(a),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.next=function(t,e,n){n.hasOwnProperty(e)===this.params&&(this.done=!0,this.success=!0)},e}(ji.BaseOperation),c=function(t){function e(e,n,r){return t.call(this,e,n,r,e.map((function(t){return ji.createQueryOperation(t,n,r)})))||this}return n(e,t),e.prototype.next=function(t,e,n){this.childrenNext(t,e,n)},e}(ji.GroupOperation);Hi.$eq=function(t,e,n){return new ji.EqualsOperation(t,e,n)},Hi.$ne=function(t,e,n){return new r(t,e,n)},Hi.$or=function(t,e,n){return new a(t,e,n)},Hi.$nor=function(t,e,n){return new o(t,e,n)},Hi.$elemMatch=function(t,e,n){return new i(t,e,n)},Hi.$nin=function(t,e,n){return new o(t,e,n)},Hi.$in=function(t,e,n){return new a(t,e,n)},Hi.$lt=ji.numericalOperation((function(t){return function(e){return e<t}})),Hi.$lte=ji.numericalOperation((function(t){return function(e){return e<=t}})),Hi.$gt=ji.numericalOperation((function(t){return function(e){return e>t}})),Hi.$gte=ji.numericalOperation((function(t){return function(e){return e>=t}})),Hi.$mod=function(t,e,n){var r=t[0],i=t[1];return new ji.EqualsOperation((function(t){return Ai.comparable(t)%r===i}),e,n)},Hi.$exists=function(t,e,n){return new u(t,e,n)},Hi.$regex=function(t,e,n){return new ji.EqualsOperation(new RegExp(t,e.$options),e,n)},Hi.$not=function(t,e,n){return new s(t,e,n)},Hi.$type=function(t,e,n){return new ji.EqualsOperation((function(e){return null!=e&&(e instanceof t||e.constructor===t)}),e,n)},Hi.$and=function(t,e,n){return new c(t,e,n)},Hi.$all=Hi.$and,Hi.$size=function(t,e,n){return new ji.EqualsOperation((function(e){return e&&e.length===t}),e,n)},Hi.$options=function(){return null},Hi.$where=function(e,n,r){var i;if(Ai.isFunction(e))i=e;else{if(t.env.CSP_ENABLED)throw new Error('In CSP mode, sift does not support strings in "$where" condition');i=new Function("obj","return "+e)}return new ji.EqualsOperation((function(t){return i.bind(t)(t)}),n,r)}}).call(this,require("_process"));var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.createQueryTester=ji.createQueryTester,Bi.EqualsOperation=ji.EqualsOperation,Bi.createEqualsOperation=ji.createEqualsOperation,function(t){for(var e in t)Bi.hasOwnProperty(e)||(Bi[e]=t[e])}(Hi),Bi.default=function(t,e){var n=void 0===e?{}:e,r=n.compare,i=n.operations;return ji.createQueryTester(t,{compare:r,operations:Object.assign({},Hi,i)})};var Ji={};Ji=Bi.default,Object.assign(Ji,Bi);const{DateTime:Wi}=b;const Gi=/[|\\{}()[\]^$+*?.-]/g;var Yi;const Qi=new Map;function Xi(t,e){e={caseSensitive:!1,...e};const n=t+JSON.stringify(e);if(Qi.has(n))return Qi.get(n);const r="!"===t[0];r&&(t=t.slice(1)),t=(t=>{if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(Gi,"\\$&")})(t).replace(/\\\*/g,".*");const i=new RegExp(`^${t}$`,e.caseSensitive?"":"i");return i.negated=r,Qi.set(n,i),i}(Yi=(t,e,n)=>{if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError(`Expected two arrays, got ${typeof t} ${typeof e}`);if(0===e.length)return t;const r="!"===e[0][0];e=e.map(t=>Xi(t,n));const i=[];for(const s of t){let t=r;for(const n of e)n.test(s)&&(t=!n.negated);t&&i.push(s)}return i}).isMatch=(t,e,n)=>{const r=Array.isArray(t)?t:[t],i=Array.isArray(e)?e:[e];return r.some(t=>i.every(e=>{const r=Xi(e,n),i=r.test(t);return r.negated?!i:i}))};const{DateTime:Ki}=b;const ts=async function(t,{db:e,ns:n,stream:r}){delete t.annotations[`${e}.${n}.${r}`]},es=async function(t,{db:e,ns:n,stream:r}){return t.annotations[`${e}.${n}.${r}`]},ns=async function(t,{db:e}){},rs=async function(t,{db:e}){t.events=t.events.filter(t=>t.meta.db!==e),t.index.events=Ni(t.index.events,e+".")},is=async function(t,{each:e}){const n=t.events.map(t=>t.meta.db).sort().filter((t,e,n)=>!e||t!==n[e-1]);for(const r of n)await e(r)},ss=async function(t,{db:e,ns:n,stream:r,event:i}){const s=t.index.events[`${e}.${n}.${r}.${i}`];delete t.index.events[`${e}.${n}.${r}.${i}`],delete t.events[s]},as=async function(t,{identity:e,db:n,ns:r,stream:i,event:s}){const a=t.index.events[`${n}.${r}.${i}.${s}`];return t.events[a]},os=async function(t,{identity:e,db:n,ns:r}){},us=async function(t,{db:e,ns:n}){t.events=t.events.filter(t=>t.meta.db!==e||t.meta.ns!==n),t.index.events=Ni(t.index.events,`${e}.${n}.`)},cs=async function(t,{db:e,ns:n,from:r,after:i,to:s,until:a,types:o,filters:u,groupby:c,rollupto:l,limit:h,each:f}){let d=t.events.filter(t=>t.meta.db===e&&t.meta.ns===n);if(o&&(o=Array.isArray(o)?o:[o],d=d.filter(t=>o.some(e=>e===t.meta.type))),u&&u.forEach(t=>{let e={};Object.keys(t).forEach(n=>{n.startsWith("$")||n.startsWith("meta.")?e[n]=t[n]:e["data."+n]=t[n]}),d=d.filter(Ji(e))}),c&&c.timestamp)if(l){d=Di.rollup(d,t=>{let e={};for(const n of Object.keys(l))"$count"===l[n]&&(e[n]=t.length);return e},t=>Wi.fromISO(t.meta.ts).toFormat(c.timestamp));let t=[];for(let[e,n]of d){for(const t of Object.keys(l))if("$key"===l[t]){n[t]=e;break}t.push(n)}d=t}else d=Di.group(d,t=>Wi.fromISO(t.meta.ts).toFormat(c.timestamp));for(const m of d)await f(m)},ls=async function(t,{db:e,ns:n}){t.events=t.events.filter(t=>t.meta.db!==e||t.meta.ns!==n),t.index.events=Ni(t.index.events,`${e}.${n}.`)},hs=async function(t,{db:e,each:n}){const r=t.events.filter(t=>t.meta.db===e).map(t=>t.meta.ns).sort().filter((t,e,n)=>!e||t!==n[e-1]);for(const i of r)await n(i)},fs=async function(t,{db:e,ns:n,stream:r,annotation:i}){t.annotations[`${e}.${n}.${r}`]=i},ds=async function(t,{db:e,ns:n,stream:r}){t.events=t.events.filter(t=>t.meta.db!==e||t.meta.ns!==n||t.meta.stream!==r),t.index.events=Ni(t.index.events,`${e}.${n}.${r}.`)},ms=async function(t,{db:e,ns:n,stream:r,from:i,after:s,to:a,until:o,types:u,limit:c,each:l}){let h=t.events.filter(t=>t.meta.db===e&&t.meta.ns===n&&t.meta.stream===r);if(u&&(u=Array.isArray(u)?u:[u],h=h.filter(t=>u.some(e=>Yi.isMatch(t.meta.type,e)))),i){const t=h.findIndex(t=>t.meta.id===i);t>=0&&(h=h.slice(t))}if(s){const t=h.findIndex(t=>t.meta.id===s);t>=0&&(h=h.slice(t+1))}if(a){const t=h.findIndex(t=>t.meta.id===a);t>=0&&(h=h.slice(0,t+1))}if(o){const t=h.findIndex(t=>t.meta.id===o);t>=0&&(h=h.slice(0,t))}c&&(h.length=Math.min(h.length,c));for(const f of h)await l(f)},ys=async function(t,{db:e,ns:n,stream:r,data:i,meta:s,id:a}){const o={data:i||{},meta:{tz:Ki.local().zoneName,ts:(new Date).toISOString(),...s,id:a||xr(),stream:r,ns:n,db:e}},u=t.events.push(o)-1;t.index.events[`${e}.${n}.${r}.${o.meta.id}`]=u},ps=async function(t,{db:e,ns:n,each:r}){const i=t.events.filter(t=>t.meta.db===e&&t.meta.ns===n).map(t=>t.meta.stream).sort().filter((t,e,n)=>!e||t!==n[e-1]);for(const s of i)await r(s)};var vs={};(function(t){const e=class{constructor({credentials:t}){t&&(this.email=t.email,this.password=t.password)}get email(){return localStorage.getItem("email")}set email(t){localStorage.setItem("email",t)}async authenticate(t,{email:e,password:n}){localStorage.setItem("email",e),this.password=n,await t.details()}forget(){localStorage.removeItem("authorization"),localStorage.removeItem("email")}get credentials(){if(this.email||this.password)return{email:this.email,password:this.password}}async authorization(){return localStorage.getItem("authorization")||(this.credentials&&this.credentials.apikey?"Apikey "+this.credentials.apikey:this.credentials&&this.credentials.email&&this.credentials.password?"Basic "+(t=`${this.credentials.email}:${this.credentials.password}`,btoa(unescape(encodeURIComponent(t)))):void 0);var t}async authorized(t){localStorage.setItem("authorization",t)}async revoked(t){localStorage.removeItem("authorization")}};class i{async connect(t){return null===t.server?async function(t){const e=new class{constructor(){this.type="local",this.store={events:[],index:{events:{}},annotations:{}}}async destroyAnnotation(t){return n.handle(async()=>ts(this.store,t))}async readAnnotation(t){return n.handle(async()=>es(this.store,t))}async createDatabase(t){return n.handle(async()=>ns(this.store,t))}async destroyDatabase(t){return n.handle(async()=>rs(this.store,t))}async listDatabases(t){return n.handle(async()=>is(this.store,t))}async destroyEvent(t){return n.handle(async()=>ss(this.store,t))}async readEvent(t){return n.handle(async()=>as(this.store,t))}async createNamespace(t){return n.handle(async()=>os(this.store,t))}async destroyNamespace(t){return n.handle(async()=>us(this.store,t))}async readNamespace(t){return n.handle(async()=>cs(this.store,t))}async truncateNamespace(t){return n.handle(async()=>ls(this.store,t))}async listNamespaces(t){return n.handle(async()=>hs(this.store,t))}async annotateStream(t){return n.handle(async()=>fs(this.store,t))}async destroyStream(t){return n.handle(async()=>ds(this.store,t))}async readStream(t){return n.handle(async()=>ms(this.store,t))}async writeStream(t){return n.handle(async()=>ys(this.store,t))}async listStreams(t){return n.handle(async()=>ps(this.store,t))}}(t);return new xi(e)}(t):t.server?s(t,t.server):s(t,`https://api${t&&t.environment?"-"+t.environment:""}.persistr.com`)}}async function s(t,e){const i=new class{constructor(t,e){this.type="persistr",this.identity=t,this.server=e,this.http=new class{constructor(t,e){this.server=t,this.identity=e,this.headers={}}url({endpoint:t,query:e}){return`${this.server}${t}${c(e)}`}async auth(){let t=void 0,e=void 0;var n;return this.identity&&this.identity.authorization&&(e=await this.identity.authorization()),e?t={authorization:e}:this.identity&&this.identity.credentials&&(this.identity.credentials.apikey?t={Authorization:"Apikey "+this.identity.credentials.apikey,...t}:this.identity.credentials.email&&this.identity.credentials.password&&(t={Authorization:"Basic "+(n=`${this.identity.credentials.email}:${this.identity.credentials.password}`,r(unescape(encodeURIComponent(n)))),...t})),t}async fetch({method:t,endpoint:e,query:r,body:i,headers:s}){const a=`${this.server}${e}${c(r)}`;let o={method:t,headers:{...this.headers,...await this.auth(),"content-type":"application/json",...s},credentials:"same-origin",mode:"cors"};i&&(o.headers["content-type"]&&o.headers["content-type"].includes("json")?o.body=JSON.stringify(i):o.body=i);let l=void 0;try{l=await u(a,{...o})}catch(f){if("ECONNREFUSED"===f.code)throw new n.ConnectionRefused;throw new n.Fetch(f.message)}if(!l.ok)throw new n.StatusCode(a,l.status,l.statusText,await l.text());l.headers.has("Authorization")&&this.identity.authorized&&this.identity.authorized(l.headers.get("Authorization"));let h=await l.text();return h&&(l.headers.has("content-type")?l.headers.get("content-type").includes("json")&&(h=JSON.parse(h)):h=JSON.parse(h)),{body:h||""}}async get(t){return await this.fetch({...t,method:"GET"})}async post(t){return await this.fetch({...t,method:"POST"})}async put(t){return await this.fetch({...t,method:"PUT"})}async patch(t){return await this.fetch({...t,method:"PATCH"})}async delete(t){return await this.fetch({...t,method:"DELETE"})}}(this.server,this.identity)}async getAccount(t){return n.handle(async()=>Dr(this.http,t))}async grantAccount(t){return n.handle(async()=>Ar(this.http,t))}async revokeAccount(t){return n.handle(async()=>Mr(this.http,t))}async destroyAnnotation(t){return n.handle(async()=>Ir(this.http,t))}async readAnnotation(t){return n.handle(async()=>jr(this.http,t))}async cloneDatabase(t){return n.handle(async()=>Cr(this.http,t))}async createDatabase(t){return n.handle(async()=>_r(this.http,t))}async destroyDatabase(t){return n.handle(async()=>Lr(this.http,t))}async renameDatabase(t){return n.handle(async()=>$r(this.http,t))}async listDatabases(t){return n.handle(async()=>Vr(this.http,t))}async destroyEvent(t){return n.handle(async()=>Fr(this.http,t))}async readEvent(t){return n.handle(async()=>qr(this.http,t))}async createNamespace(t){return n.handle(async()=>Pr(this.http,t))}async destroyNamespace(t){return n.handle(async()=>zr(this.http,t))}async readNamespace(t){return n.handle(async()=>Rr(this.http,t))}async renameNamespace(t){return n.handle(async()=>Zr(this.http,t))}async truncateNamespace(t){return n.handle(async()=>Ur(this.http,t))}async listNamespaces(t){return n.handle(async()=>Hr(this.http,t))}async annotateStream(t){return n.handle(async()=>Br(this.http,t))}async destroyStream(t){return n.handle(async()=>Jr(this.http,t))}async readStream(t){return n.handle(async()=>Wr(this.http,t))}async writeStream(t){return n.handle(async()=>Gr(this.http,t))}async listStreams(t){return n.handle(async()=>Yr(this.http,t))}}(t,e);return new xi(i)}vs={Persistr:i,persistr:new i,Identity:e},"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)&&(t.persistr=vs.persistr)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();